{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Combobox(_ref){let{name,options,displayValue,value,onChange,defaultValue,'aria-label':ariaLabel,children}=_ref;const[isOpen,setIsOpen]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[selectedValue,setSelectedValue]=useState(defaultValue||value||null);const comboboxRef=useRef(null);// Filter options based on search term\nconst filteredOptions=options===null||options===void 0?void 0:options.filter(option=>displayValue(option).toLowerCase().includes(searchTerm.toLowerCase()));// Handle click outside to close dropdown\nuseEffect(()=>{function handleClickOutside(event){if(comboboxRef.current&&!comboboxRef.current.contains(event.target)){setIsOpen(false);}}document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Handle option selection\nconst handleSelect=option=>{setSelectedValue(option);setIsOpen(false);if(onChange){onChange({target:{name,value:option}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:comboboxRef,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-indigo-500\",onClick:()=>setIsOpen(!isOpen),\"aria-haspopup\":\"listbox\",\"aria-expanded\":isOpen,\"aria-labelledby\":ariaLabel,children:[/*#__PURE__*/_jsx(\"span\",{children:selectedValue?displayValue(selectedValue):'Select an option'}),/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-gray-400\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-10 mt-1 w-full bg-gray-800 rounded-md shadow-lg max-h-60 overflow-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500\",placeholder:\"Search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),onClick:e=>e.stopPropagation()})}),/*#__PURE__*/_jsx(\"ul\",{className:\"py-1\",role:\"listbox\",children:filteredOptions===null||filteredOptions===void 0?void 0:filteredOptions.map((option,index)=>/*#__PURE__*/_jsx(\"li\",{role:\"option\",className:\"px-4 py-2 hover:bg-gray-700 cursor-pointer text-gray-200\",onClick:()=>handleSelect(option),\"aria-selected\":selectedValue===option,children:children?children(option):displayValue(option)},index))})]}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:name,value:selectedValue||''})]});}export function ComboboxLabel(_ref2){let{children}=_ref2;return/*#__PURE__*/_jsx(\"span\",{className:\"block\",children:children});}export function ComboboxOption(_ref3){let{value,children}=_ref3;return children;}","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","Combobox","_ref","name","options","displayValue","value","onChange","defaultValue","ariaLabel","children","isOpen","setIsOpen","searchTerm","setSearchTerm","selectedValue","setSelectedValue","comboboxRef","filteredOptions","filter","option","toLowerCase","includes","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleSelect","className","ref","type","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","placeholder","e","stopPropagation","role","map","index","ComboboxLabel","_ref2","ComboboxOption","_ref3"],"sources":["/Users/ddm/expense-tracker/src/components/Combobox.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nexport function Combobox({ name, options, displayValue, value, onChange, defaultValue, 'aria-label': ariaLabel, children }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedValue, setSelectedValue] = useState(defaultValue || value || null);\n  const comboboxRef = useRef(null);\n\n  // Filter options based on search term\n  const filteredOptions = options?.filter(option => \n    displayValue(option).toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Handle click outside to close dropdown\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (comboboxRef.current && !comboboxRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Handle option selection\n  const handleSelect = (option) => {\n    setSelectedValue(option);\n    setIsOpen(false);\n    if (onChange) {\n      onChange({ target: { name, value: option } });\n    }\n  };\n\n  return (\n    <div className=\"relative\" ref={comboboxRef}>\n      <button\n        type=\"button\"\n        className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n        onClick={() => setIsOpen(!isOpen)}\n        aria-haspopup=\"listbox\"\n        aria-expanded={isOpen}\n        aria-labelledby={ariaLabel}\n      >\n        <span>{selectedValue ? displayValue(selectedValue) : 'Select an option'}</span>\n        <svg className=\"h-5 w-5 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n          <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n        </svg>\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute z-10 mt-1 w-full bg-gray-800 rounded-md shadow-lg max-h-60 overflow-auto\">\n          <div className=\"p-2\">\n            <input\n              type=\"text\"\n              className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n              placeholder=\"Search...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              onClick={(e) => e.stopPropagation()}\n            />\n          </div>\n          <ul className=\"py-1\" role=\"listbox\">\n            {filteredOptions?.map((option, index) => (\n              <li\n                key={index}\n                role=\"option\"\n                className=\"px-4 py-2 hover:bg-gray-700 cursor-pointer text-gray-200\"\n                onClick={() => handleSelect(option)}\n                aria-selected={selectedValue === option}\n              >\n                {children ? children(option) : displayValue(option)}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      \n      {/* Hidden input to store the actual value for form submission */}\n      <input\n        type=\"hidden\"\n        name={name}\n        value={selectedValue || ''}\n      />\n    </div>\n  );\n}\n\nexport function ComboboxLabel({ children }) {\n  return <span className=\"block\">{children}</span>;\n}\n\nexport function ComboboxOption({ value, children }) {\n  return children;\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}