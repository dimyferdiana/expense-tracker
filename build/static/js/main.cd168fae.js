/*! For license information please see main.cd168fae.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},61:(e,t,n)=>{n.d(t,{Mq:()=>u,T0:()=>o,d6:()=>c,e0:()=>s,expenseDB:()=>a,mh:()=>h,qF:()=>l,transferDB:()=>d});var r=n(379),i=n(319);const s=async()=>{try{const{data:e,error:t}=await i.A.from("expenses").select("count",{count:"exact"}).limit(1);return t&&"42P01"===t.code?(console.error("Database tables do not exist yet. Please run the SQL setup script from MIGRATION-GUIDE.md in the Supabase SQL Editor."),{success:!1,message:"Database tables not found. Please create them using the SQL script in MIGRATION-GUIDE.md."}):t?(console.error("Error checking database:",t),{success:!1,error:t}):(console.log("Supabase database tables exist and are ready to use."),{success:!0})}catch(e){return console.error("Error initializing Supabase database:",e),{success:!1,error:e}}},a={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("expenses").select("*").eq("user_id",e).order("date",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error("Error getting expenses:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const n={user_id:t,amount:parseFloat(e.amount),description:e.description,category:e.category,date:e.date,wallet_id:e.wallet_id,notes:e.notes||"",tags:e.tags.map((e=>"object"===typeof e?e.id:e))||[],is_income:e.is_income,photo_url:e.photoUrl||null};console.log("Adding expense with data:",n);const{data:r,error:s}=await i.A.from("expenses").insert([n]).select().single();if(s)throw s;return r}catch(n){throw console.error("Error adding expense:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const n={user_id:t,amount:parseFloat(e.amount),description:e.description,category:e.category,date:e.date,wallet_id:e.wallet_id,notes:e.notes||"",tags:e.tags.map((e=>"object"===typeof e?e.id:e))||[],is_income:e.is_income,photo_url:e.photoUrl||null},{data:r,error:s}=await i.A.from("expenses").update(n).eq("id",e.id).select().single();if(s)throw s;return r}catch(n){throw console.error("Error updating expense:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("expenses").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Expense not found or unauthorized");const{error:s}=await i.A.from("expenses").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting expense:",n),n}}},o={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("categories").select("*").eq("user_id",e);if(n)throw n;return t||[]}catch(t){return console.error("Error getting categories:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("categories").insert([{name:e.name,color:e.color||"blue",user_id:t}]).select().single();if(r)throw r;return n}catch(n){throw console.error("Error adding category:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("categories").select("*").eq("id",e.id).eq("user_id",t).single();if(r)throw r;if(!n)throw new Error("Category not found or unauthorized");const{data:s,error:a}=await i.A.from("categories").update(e).eq("id",e.id).eq("user_id",t).select().single();if(a)throw a;return s}catch(n){throw console.error("Error updating category:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("categories").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Category not found or unauthorized");const{error:s}=await i.A.from("categories").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting category:",n),n}}},l={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("wallets").select("*").eq("user_id",e);if(n)throw n;return t||[]}catch(t){return console.error("Error getting wallets:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:s}=await i.A.from("wallets").insert([(0,r.A)((0,r.A)({},e),{},{user_id:t})]).select().single();if(s)throw s;return n}catch(n){throw console.error("Error adding wallet:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("wallets").select("*").eq("id",e.id).eq("user_id",t).single();if(r)throw r;if(!n)throw new Error("Wallet not found or unauthorized");const{data:s,error:a}=await i.A.from("wallets").update(e).eq("id",e.id).eq("user_id",t).select().single();if(a)throw a;return s}catch(n){throw console.error("Error updating wallet:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("wallets").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Wallet not found or unauthorized");const{error:s}=await i.A.from("wallets").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting wallet:",n),n}}},c={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("tags").select("*").eq("user_id",e);if(n)throw n;return t||[]}catch(t){return console.error("Error getting tags:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("tags").insert([{name:e.name,color:e.color||"blue",user_id:t}]).select().single();if(r)throw r;return n}catch(n){throw console.error("Error adding tag:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("tags").select("*").eq("id",e.id).eq("user_id",t).single();if(r)throw r;if(!n)throw new Error("Tag not found or unauthorized");const{data:s,error:a}=await i.A.from("tags").update({name:e.name,color:e.color}).eq("id",e.id).eq("user_id",t).select().single();if(a)throw a;return s}catch(n){throw console.error("Error updating tag:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("tags").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Tag not found or unauthorized");const{error:s}=await i.A.from("tags").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting tag:",n),n}}},d={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("transfers").select("*").eq("user_id",e).order("date",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error("Error getting transfers:",t),[]}},getById:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("transfers").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;return n}catch(n){return console.error("Error getting transfer by ID:",n),null}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const n={user_id:t,from_wallet_id:e.fromWallet,to_wallet_id:e.toWallet,amount:parseFloat(e.amount),date:e.date,notes:e.notes||"",photo_url:e.photoUrl||"",from_wallet_name:e.fromWalletName||"",to_wallet_name:e.toWalletName||"",timestamp:e.timestamp||(new Date).toISOString()},{data:s,error:a}=await i.A.from("transfers").insert([n]).select().single();if(a)throw a;return(0,r.A)((0,r.A)({},s),{},{fromWallet:s.from_wallet_id,toWallet:s.to_wallet_id,fromWalletName:s.from_wallet_name,toWalletName:s.to_wallet_name,photoUrl:s.photo_url})}catch(n){throw console.error("Error adding transfer:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:s}=await i.A.from("transfers").select("*").eq("id",e.id).eq("user_id",t).single();if(s)throw s;if(!n)throw new Error("Transfer not found or unauthorized");const a={from_wallet_id:e.fromWallet,to_wallet_id:e.toWallet,amount:parseFloat(e.amount),date:e.date,notes:e.notes||"",photo_url:e.photoUrl||"",from_wallet_name:e.fromWalletName||"",to_wallet_name:e.toWalletName||"",timestamp:e.timestamp||(new Date).toISOString()},{data:o,error:l}=await i.A.from("transfers").update(a).eq("id",e.id).eq("user_id",t).select().single();if(l)throw l;return(0,r.A)((0,r.A)({},o),{},{fromWallet:o.from_wallet_id,toWallet:o.to_wallet_id,fromWalletName:o.from_wallet_name,toWalletName:o.to_wallet_name,photoUrl:o.photo_url})}catch(n){throw console.error("Error updating transfer:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("transfers").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Transfer not found or unauthorized");const{error:s}=await i.A.from("transfers").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting transfer:",n),n}}},u={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("recurring").select("*").eq("user_id",e).order("nextDate",{ascending:!0});if(n)throw n;return t||[]}catch(t){return console.error("Error getting recurring transactions:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:s}=await i.A.from("recurring").insert([(0,r.A)((0,r.A)({},e),{},{user_id:t})]).select().single();if(s)throw s;return n}catch(n){throw console.error("Error adding recurring transaction:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("recurring").select("*").eq("id",e.id).eq("user_id",t).single();if(r)throw r;if(!n)throw new Error("Recurring transaction not found or unauthorized");const{data:s,error:a}=await i.A.from("recurring").update(e).eq("id",e.id).eq("user_id",t).select().single();if(a)throw a;return s}catch(n){throw console.error("Error updating recurring transaction:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("recurring").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Recurring transaction not found or unauthorized");const{error:s}=await i.A.from("recurring").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting recurring transaction:",n),n}},getDueTransactions:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return[];const n=t instanceof Date?t.toISOString().slice(0,10):t;try{const{data:t,error:r}=await i.A.from("recurring").select("*").eq("user_id",e).lte("nextDate",n);if(r)throw r;return t||[]}catch(r){return console.error("Error getting due recurring transactions:",r),[]}}},h={getAll:async e=>{if(!e)return[];try{const{data:t,error:n}=await i.A.from("budgets").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error("Error getting budgets:",t),[]}},add:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:s}=await i.A.from("budgets").insert([(0,r.A)((0,r.A)({},e),{},{user_id:t})]).select().single();if(s)throw s;return n}catch(n){throw console.error("Error adding budget:",n),n}},update:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("budgets").select("*").eq("id",e.id).eq("user_id",t).single();if(r)throw r;if(!n)throw new Error("Budget not found or unauthorized");const{data:s,error:a}=await i.A.from("budgets").update(e).eq("id",e.id).eq("user_id",t).select().single();if(a)throw a;return s}catch(n){throw console.error("Error updating budget:",n),n}},delete:async(e,t)=>{if(!t)throw new Error("User not authenticated");try{const{data:n,error:r}=await i.A.from("budgets").select("*").eq("id",e).eq("user_id",t).single();if(r&&"PGRST116"!==r.code)throw r;if(!n)throw new Error("Budget not found or unauthorized");const{error:s}=await i.A.from("budgets").delete().eq("id",e).eq("user_id",t);if(s)throw s;return e}catch(n){throw console.error("Error deleting budget:",n),n}}}},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=b.prototype;var v=x.prototype=new y;v.constructor=x,p(v,b.prototype),v.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+C(o=e[c],c);l+=T(o,t,i,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,d=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),s=r(n(736)),a=n(745);class o{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter((e=>{let[t,n]=e;return void 0!==n})).map((e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]})).forEach((e=>{let[t,n]=e;o.searchParams.append(t,n)}))):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer="count=".concat(a)),new s.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<i&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,g=!1,p=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(m=!1,v(e),!p)if(null!==r(c))p=!0,M(_);else{var t=r(d);null!==t&&D(w,t.startTime-e)}}function _(e,n){p=!1,m&&(m=!1,y(N),N=-1),g=!0;var s=f;try{for(v(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),v(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&D(w,u.startTime-n),l=!1}return l}finally{h=null,f=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,N=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function A(){if(null!==j){var e=t.unstable_now();C=e;var n=!0;try{n=j(!0,e)}finally{n?k():(S=!1,j=null)}}else S=!1}if("function"===typeof x)k=function(){x(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,k=function(){O.postMessage(null)}}else k=function(){b(A,0)};function M(e){j=e,S||(S=!0,k())}function D(e,n){N=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(m?(y(N),N=-1):m=!0,D(w,s-a))):(e.sortIndex=o,n(c,e),p||g||(p=!0,M(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),s=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let i=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),s=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&s&&s.length>1&&(o=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(a=[],i=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:a,count:o,status:l,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},319:(e,t,n)=>{n.d(t,{A:()=>Wt});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class i extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class c{constructor(e){let{headers:t={},customFetch:r,region:i=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,(function*(){try{const{headers:r,method:o,body:l}=t;let c,d={},{region:u}=t;u||(u=this.region),u&&"any"!==u&&(d["x-region"]=u),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",c=l):"string"===typeof l?(d["Content-Type"]="text/plain",c=l):"undefined"!==typeof FormData&&l instanceof FormData?c=l:(d["Content-Type"]="application/json",c=JSON.stringify(l)));const h=yield this.fetch("".concat(this.url,"/").concat(e),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),r),body:c}).catch((e=>{throw new i(e)})),f=h.headers.get("x-relay-error");if(f&&"true"===f)throw new s(h);if(!h.ok)throw new a(h);let g,p=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return g="application/json"===p?yield h.json():"application/octet-stream"===p?yield h.blob():"text/event-stream"===p?h:"multipart/form-data"===p?yield h.formData():yield h.text(),{data:g,error:null}}catch(r){return{data:null,error:r}}}))}}var d=n(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:f,PostgrestTransformBuilder:g,PostgrestBuilder:p,PostgrestError:m}=d,b={"X-Client-Info":"realtime-js/".concat("2.11.2")};var y,x,v,w,_,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(y||(y={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(x||(x={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(v||(v={})),function(e){e.websocket="websocket"}(w||(w={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(_||(_={}));class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+i));s+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class j{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const N=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((n,i)=>(n[i]=E(i,e,t,r),n)),{})},E=(e,t,n,r)=>{const i=t.find((t=>t.name===e)),s=null===i||void 0===i?void 0:i.type,a=n[e];return s&&!r.includes(s)?C(s,a):T(a)},C=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return M(t,n)}switch(e){case k.bool:return A(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return P(t);case k.json:case k.jsonb:return O(t);case k.timestamp:return D(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return T(t)}},T=e=>e,A=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},P=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},O=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(i){r=s?s.split(","):[]}return r.map((e=>C(t,e)))}return e},D=e=>"string"===typeof e?e.replace(" ","T"):e,L=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class I{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter((e=>e.status===t)).forEach((e=>e.callback(n)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var R,F,z,B;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(R||(R={}));class U{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=U.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=U.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=U.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,((e,t)=>{s[e]||(o[e]=t)})),this.map(s,((e,t)=>{const n=i[e];if(n){const r=t.map((e=>e.presence_ref)),i=n.map((e=>e.presence_ref)),s=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=n.filter((e=>r.indexOf(e.presence_ref)<0));s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(i,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,((t,r)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map((e=>e.presence_ref)),r=s.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,s,r)})),this.map(s,((t,n)=>{let i=e[t];if(!i)return;const s=n.map((e=>e.presence_ref));i=i.filter((e=>s.indexOf(e.presence_ref)<0)),e[t]=i,r(t,i,n),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(F||(F={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(z||(z={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(B||(B={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=x.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new I(this,v.join,this.params,this.timeout),this.rejoinTimer=new j((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=x.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=x.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=x.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=x.errored,this.rejoinTimer.scheduleTimeout())})),this._on(v.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new U(this),this.broadcastEndpointURL=L(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s,private:a}}=this.params;this._onError((t=>null===e||void 0===e?void 0:e(B.CHANNEL_ERROR,t))),this._onClose((()=>null===e||void 0===e?void 0:e(B.CLOSED)));const o={},l={broadcast:i,presence:s,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,s=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,d=n&&n[r];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),void(null===e||void 0===e||e(B.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(B.SUBSCRIBED))}null===e||void 0===e||e(B.SUBSCRIBED)})).receive("error",(t=>{null===e||void 0===e||e(B.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null===e||void 0===e||e(B.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("error",(()=>n("error"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:s,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=x.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(v.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new I(this,v.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout((()=>r.abort()),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new I(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=v;if(n&&[a,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let d=this._onMessage(s,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s})).map((e=>e.callback(d,n))):null===(i=this.bindings[s])||void 0===i||i.filter((e=>{var n,r,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s})).map((e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:s}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:s};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)}))}_isClosed(){return this.state===x.closed}_isJoined(){return this.state===x.joined}_isJoining(){return this.state===x.joining}_isLeaving(){return this.state===x.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(v.close,{},e)}_onError(e){this._on(v.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=x.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=N(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=N(e.columns,e.old_record)),t}}const H=()=>{},V="undefined"!==typeof WebSocket;class q{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=b,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(w.websocket),this.httpEndpoint=L(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new j((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(V)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new J(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),n.e(952).then(n.t.bind(n,952,23)).then((e=>{let{default:t}=e;this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return _.Connecting;case y.open:return _.Open;case y.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=new W("realtime:".concat(e),t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let n=null;try{n=JSON.parse(atob(e.split(".")[1]))}catch(t){}if(n&&n.exp){if(!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",'InvalidJWTToken: Invalid value for JWT claim "exp" with value '.concat(n.exp)),Promise.reject('InvalidJWTToken: Invalid value for JWT claim "exp" with value '.concat(n.exp))}this.accessTokenValue=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(v.access_token,{access_token:e})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:i}=e;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(i&&"("+i+")"||""),r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(v.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class J{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=y.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class K extends Y{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class G extends Y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Q=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const X=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},Z=e=>{if(Array.isArray(e))return e.map((e=>Z(e)));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[i]=Z(r)})),t};var ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const te=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ne=(e,t,r)=>ee(void 0,void 0,void 0,(function*(){const i=yield Q(void 0,void 0,void 0,(function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response}));e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then((n=>{t(new K(te(n),e.status||500))})).catch((e=>{t(new G(te(e),e))})):t(new G(te(e),e))}));function re(e,t,n,r,i,s){return ee(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))})(t,r,i,s)).then((e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>ne(e,o,r)))}))}))}function ie(e,t,n,r){return ee(this,void 0,void 0,(function*(){return re(e,"GET",t,n,r)}))}function se(e,t,n,r,i){return ee(this,void 0,void 0,(function*(){return re(e,"POST",t,r,i,n)}))}function ae(e,t,n,r,i){return ee(this,void 0,void 0,(function*(){return re(e,"DELETE",t,r,i,n)}))}var oe=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const le={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ce={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class de{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=X(r)}uploadOrUpdate(e,t,n,r){return oe(this,void 0,void 0,(function*(){try{let i;const s=Object.assign(Object.assign({},ce),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=n,a["cache-control"]="max-age=".concat(s.cacheControl),a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:i,headers:a},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(i){if($(i))return{data:null,error:i};throw i}}))}upload(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return oe(this,void 0,void 0,(function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+"/object/upload/sign/".concat(s));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ce.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:s}),l=yield o.json();if(o.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if($(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield se(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new Y("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}))}update(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t,n){return oe(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}))}copy(e,t,n){return oe(this,void 0,void 0,(function*(){try{return{data:{path:(yield se(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}))}createSignedUrl(e,t,n){return oe(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),i=yield se(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(s))},{data:i,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return oe(this,void 0,void 0,(function*(){try{const r=yield se(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null}))),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}))}download(e,t){return oe(this,void 0,void 0,(function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield ie(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(i),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}))}info(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield ie(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Z(e),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}))}exists(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return ee(this,void 0,void 0,(function*(){return re(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)}))}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if($(n)&&n instanceof G){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(n).concat(o))}}}remove(e){return oe(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}))}list(e,t,n){return oe(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},le),t),{prefix:e||""});return{data:yield se(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ue={"X-Client-Info":"storage-js/".concat("2.7.1")};var he=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},ue),t),this.fetch=X(n)}listBuckets(){return he(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if($(e))return{data:null,error:e};throw e}}))}getBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}))}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return he(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,i){return ee(this,void 0,void 0,(function*(){return re(e,"PUT",t,r,i,n)}))}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}))}}class ge extends fe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new de(this.url,this.headers,e,this.fetch)}}let pe="";pe="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const me={headers:{"X-Client-Info":"supabase-js-".concat(pe,"/").concat("2.49.4")}},be={schema:"public"},ye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xe={};var ve=n(630),we=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const _e=e=>{let t;return t=e||("undefined"===typeof fetch?ve.default:fetch),function(){return t(...arguments)}},ke=(e,t,n)=>{const r=_e(n),i="undefined"===typeof Headers?ve.Headers:Headers;return(n,s)=>we(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Object.assign(Object.assign({},s),{headers:l}))}))};var Se=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const je="2.69.1",Ne=3e4,Ee=9e4,Ce={"X-Client-Info":"gotrue-js/".concat(je)},Te="X-Supabase-Api-Version",Ae={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Pe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Oe extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Me(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class De extends Oe{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Le extends Oe{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ie extends Oe{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Re extends Ie{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Fe extends Ie{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ze extends Ie{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Be extends Ie{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ue extends Ie{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class We extends Ie{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function He(e){return Me(e)&&"AuthRetryableFetchError"===e.name}class Ve extends Ie{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class qe extends Ie{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ye=" \t\n\r=".split(""),$e=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ye.length;t+=1)e[Ye[t].charCodeAt(0)]=-2;for(let t=0;t<Je.length;t+=1)e[Je[t].charCodeAt(0)]=t;return e})();function Ke(e,t,n){const r=$e[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ge(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)Ke(e.charCodeAt(a),i,s);return t.join("")}function Qe(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Xe(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Qe(r,t)}}function Ze(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Ke(e.charCodeAt(i),n,r);return new Uint8Array(t)}const et=()=>"undefined"!==typeof window&&"undefined"!==typeof document,tt={tested:!1,writable:!1},nt=()=>{if(!et())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(tt.tested)return tt.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tt.tested=!0,tt.writable=!0}catch(t){tt.tested=!0,tt.writable=!1}return tt.writable};const rt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},it=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},st=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},at=async(e,t)=>{await e.removeItem(t)};class ot{constructor(){this.promise=new ot.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function lt(e){const t=e.split(".");if(3!==t.length)throw new qe("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Pe.test(t[n]))throw new qe("JWT not in base64url format");return{header:JSON.parse(Ge(t[0])),payload:JSON.parse(Ge(t[1])),signature:Ze(t[2]),raw:{header:t[0],payload:t[1]}}}function ct(e){return("0"+e.toString(16)).substr(-2)}async function dt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ct).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await it(e,"".concat(t,"-code-verifier"),i);const s=await dt(r);return[s,r===s?"plain":"s256"]}ot.promiseConstructor=Promise;const ht=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;var ft=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const gt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pt=[502,503,504];async function mt(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new We(gt(e),0);if(pt.includes(e.status))throw new We(gt(e),e.status);let r,i;try{r=await e.json()}catch(a){throw new Le(gt(a),a)}const s=function(e){const t=e.headers.get(Te);if(!t)return null;if(!t.match(ht))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(a){return null}}(e);if(s&&s.getTime()>=Ae.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new Ve(gt(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Re}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0))throw new Ve(gt(r),e.status,r.weak_password.reasons);throw new De(gt(r),e.status||500,i)}async function bt(e,t,n,r){var i;const s=Object.assign({},null===r||void 0===r?void 0:r.headers);s[Te]||(s[Te]=Ae.name),(null===r||void 0===r?void 0:r.jwt)&&(s.Authorization="Bearer ".concat(r.jwt));const a=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,s){const a=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new We(gt(l),0)}o.ok||await mt(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await mt(l)}}(e,t,n+o,{headers:s,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function yt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xt(e){const t=yt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function vt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wt(e){return{data:e,error:null}}function _t(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=ft(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function kt(e){return e}var St=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class jt{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=rt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await bt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await bt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:vt})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=St(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await bt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:_t,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Me(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await bt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:vt})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await bt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:kt});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t})),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Me(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await bt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:vt})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await bt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:vt})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await bt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:vt})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await bt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await bt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}}const Nt={getItem:e=>nt()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{nt()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{nt()&&globalThis.localStorage.removeItem(e)}};function Et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ct=!!(globalThis&&nt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Tt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class At extends Tt{}async function Pt(e,t,n){Ct&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout((()=>{r.abort(),Ct&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===t)throw Ct&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new At('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ct)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ct&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ct&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ot={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ce,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mt(e,t,n){return await n()}class Dt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dt.nextInstanceID,Dt.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ot),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new jt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=rt(r.fetch),this.lock=r.lock||Mt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:et()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Pt:this.lock=Mt,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:nt()?this.storage=Nt:(this.memoryStorage={},this.storage=Et(this.memoryStorage)):(this.memoryStorage={},this.storage=Et(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(je,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(r){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),et()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Me(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Me(t)?{error:t}:{error:new Le("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await bt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:yt}),{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await ut(this.storage,this.storageKey)),i=await bt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:yt})}else{if(!("phone"in e))throw new ze("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await bt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:yt})}}const{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await bt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:xt})}else{if(!("phone"in e))throw new ze("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await bt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:xt})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Fe}}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await st(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await bt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:yt});if(await at(this.storage,"".concat(this.storageKey,"-code-verifier")),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Fe}}catch(i){if(Me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:s}=e,a=await bt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:yt}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Fe}}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,s;try{if("email"in e){const{email:r,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await ut(this.storage,this.storageKey));const{error:o}=await bt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await bt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(s=null===n||void 0===n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new ze("You must provide either an email or phone number.")}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:a}=await bt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:yt});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,s=null;return"pkce"===this.flowType&&([i,s]=await ut(this.storage,this.storageKey)),await bt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:wt})}catch(i){if(Me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Re;const{error:r}=await bt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:i}=e,{error:s}=await bt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:s,error:a}=await bt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a}}throw new ze("You must provide either an email or phone number and a type")}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await st(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ee;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await bt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:vt}):await this._useSession((async e=>{var t,n,r;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await bt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:vt}):{data:{user:null},error:new Re}}))}catch(t){if(Me(t))return function(e){return Me(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await at(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession((async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Re;const s=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await ut(this.storage,this.storageKey));const{data:l,error:c}=await bt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:vt});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}))}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Re;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:s}=lt(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Me(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Re;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!et())throw new Be("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Be(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ue("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Be("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ue("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!i||!a||!s||!l)throw new Be("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Ne&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const m={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await st(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession((async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Me(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await at(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}}))}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await ut(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})}));if(r)throw r;return et()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Me(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:i,error:s}=t;if(s)throw s;return await bt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await bt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:yt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&He(t)&&Date.now()+n-i<Ne},new Promise(((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(i){if(!r(s,i))return void t(i)}})()})))}catch(i){if(this._debug(t,"error",i),Me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),et()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await st(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Ee;if(this._debug(t,"session has".concat(r?"":" not"," expired with margin of ").concat(Ee,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),He(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new ot;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Re;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Me(i)){const e={session:null,error:i};return He(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}}));if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await it(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await at(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Ne);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const t=Date.now();try{return await this._useSession((async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Ne);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Ne,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Tt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await ut(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await bt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await bt(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})}))}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:s,error:a}=await bt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})}))}catch(t){if(Me(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await bt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Me(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),i=n.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=lt(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find((t=>t.kid===e));if(t)return t;if(t=this.jwks.keys.find((t=>t.kid===e)),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await bt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new qe("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find((t=>t.kid===e)),!t)throw new qe("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:s,raw:{header:a,payload:o}}=lt(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:s},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,s,function(e){const t=[];return Xe(e,(e=>t.push(e))),new Uint8Array(t)}("".concat(a,".").concat(o))))throw new qe("Invalid JWT signature");return{data:{claims:i,header:r,signature:s},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}Dt.nextInstanceID=0;const Lt=Dt;class It extends Lt{constructor(e){super(e)}}var Rt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class Ft{constructor(e,t,n){var r,i,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl="".concat(a,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(a,"/auth/v1"),this.storageUrl="".concat(a,"/storage/v1"),this.functionsUrl="".concat(a,"/functions/v1");const o="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),l=function(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:o,realtime:l,global:c}=t,d={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>Se(this,void 0,void 0,(function*(){return""}))};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!==n&&void 0!==n?n:{},{db:be,realtime:xe,auth:Object.assign(Object.assign({},ye),{storageKey:o}),global:me});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=ke(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u("".concat(a,"/rest/v1"),{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ge(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Rt(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:a,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new It({url:this.authUrl,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:a,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new q(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const zt="https://mplrakcyrohgkqdhzpry.supabase.co",Bt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wbHJha2N5cm9oZ2txZGh6cHJ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0NjQ4NTIsImV4cCI6MjA2MzA0MDg1Mn0.uPw-jom-Hsio1-yot4tJQ15FKrPxe0itLfyXPY-qREw";const Ut=((e,t,n)=>new Ft(e,t,n))(zt,Bt),Wt=Ut},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class s extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=i?"".concat(i,".order"):"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":"".concat(r,".offset"),s="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=s},379:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,s=r.fetch.bind(r),a=r.Headers,o=r.Request,l=r.Response},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>s})},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(g,e)||!u.call(f,e)&&(h.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,y);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var I,R=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function se(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var be=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function je(e){if(e=xi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==ke||null!==Se)&&(Te(),Ee())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Me=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Me=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Me=!1}function Le(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ie=!1,Re=null,Fe=!1,ze=null,Be={onError:function(e){Ie=!0,Re=e}};function Ue(e,t,n,r,i,s,a,o,l){Ie=!1,Re=null,Le.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,$e=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Qe=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ut(o):0!==(s&=a)&&(r=ut(s))}else 0!==(a=n&~i)?r=ut(a):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,St,jt,Nt=!1,Et=[],Ct=null,Tt=null,At=null,Pt=new Map,Ot=new Map,Mt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function It(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Rt(e){var t=yi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void jt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Nt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==At&&Ft(At)&&(At=null),Pt.forEach(zt),Ot.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Tt&&Ut(Tt,e),null!==At&&Ut(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Mt.shift()}var Ht=v.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=1,Yt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Jt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=4,Yt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Yt(e,t,n,r){if(Vt){var i=Kt(e,t,n,r);if(null===i)Vr(e,t,r,$t,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=It(Ct,e,t,n,r,i),!0;case"dragenter":return Tt=It(Tt,e,t,n,r,i),!0;case"mouseover":return At=It(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,It(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,It(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&wt(s),null===(s=Kt(e,t,n,r))&&Vr(e,t,r,$t,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var $t=null;function Kt(e,t,n,r){if($t=null,null!==(e=yi(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=R({},cn,{view:0,detail:0}),hn=sn(un),fn=R({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),gn=sn(fn),pn=sn(R({},fn,{dataTransfer:0})),mn=sn(R({},un,{relatedTarget:0})),bn=sn(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),vn=sn(R({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function jn(){return Sn}var Nn=R({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Nn),Cn=sn(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(R({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),An=sn(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Pn),Mn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var In=d&&"TextEvent"in window&&!Ln,Rn=d&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=Jr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,Yn=null;function $n(e){Fr(e,0)}function Kn(e){if(Y(vi(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Jn&&(Jn.detachEvent("onpropertychange",nr),Yn=Jn=null)}function nr(e){if("value"===e.propertyName&&Kn(Yn)){var t=[];qn(t,Yn,e,we(e)),Pe($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Jn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Yn)}function sr(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,br=null,yr=null,xr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Jr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function jr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}d&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=jr("animationend"),Er=jr("animationiteration"),Cr=jr("animationstart"),Tr=jr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),l(t,[e])}for(var Mr=0;Mr<Pr.length;Mr++){var Dr=Pr[Mr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Nr,"onAnimationEnd"),Or(Er,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var d=Re;Ie=!1,Re=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Rr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Rr(i,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Ir.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Gt(t)){case 1:var i=qt;break;case 4:i=Jt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=s,i=we(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Nr:case Er:case Cr:l=bn;break;case Tr:l=An;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var f,g=r;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Oe(g,h))&&d.push(qr(g,p,f)))),u)break;g=g.return}0<d.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[gi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=gn,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,p="onPointerLeave",h="onPointerEnter",g="pointer"),u=null==l?o:vi(l),f=null==c?o:vi(c),(o=new d(p,g+"leave",l,n,i)).target=u,o.relatedTarget=f,p=null,yi(i)===r&&((d=new d(h,g+"enter",c,n,i)).target=f,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,g=0,f=d=l;f;f=Yr(f))g++;for(f=0,p=h;p;p=Yr(p))f++;for(;0<g-f;)d=Yr(d),g--;for(;0<f-g;)h=Yr(h),f--;for(;g--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yr(d),h=Yr(h)}d=null}else d=null;null!==l&&$r(a,o,l,d,!1),null!==c&&null!==u&&$r(a,u,c,d,!0)}if("select"===(l=(o=r?vi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Gn;else if(Vn(o))if(Qn)m=ar;else{m=ir;var b=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?qn(a,m,n,i):(b&&b(e,o,r),"focusout"===e&&(b=o._wrapperState)&&b.controlled&&"number"===o.type&&ee(o,"number",o.value)),b=r?vi(r):window,e){case"focusin":(Vn(b)||"true"===b.contentEditable)&&(mr=b,br=r,yr=null);break;case"focusout":yr=br=mr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,vr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":vr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wn?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Rn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wn&&(y=en()):(Xt="value"in(Qt=i)?Qt.value:Qt.textContent,Wn=!0)),0<(b=Jr(r,x)).length&&(x=new vn(x,e,null,n,i),a.push({event:x,listeners:b}),y?x.data=y:null!==(y=Un(n))&&(x.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=Xt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Jr(r,"onBeforeInput")).length&&(i=new vn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Oe(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Oe(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Oe(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,fi="__reactProps$"+ui,gi="__reactContainer$"+ui,pi="__reactEvents$"+ui,mi="__reactListeners$"+ui,bi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var _i=[],ki=-1;function Si(e){return{current:e}}function ji(e){0>ki||(e.current=_i[ki],_i[ki]=null,ki--)}function Ni(e,t){ki++,_i[ki]=e.current,e.current=t}var Ei={},Ci=Si(Ei),Ti=Si(!1),Ai=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){ji(Ti),ji(Ci)}function Di(e,t,n){if(Ci.current!==Ei)throw Error(s(168));Ni(Ci,t),Ni(Ti,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return R({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ci.current,Ni(Ci,e),Ni(Ti,Ti.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,ji(Ti),ji(Ci),Ni(Ci,e)):ji(Ti),Ni(Ti,n)}var Fi=null,zi=!1,Bi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Wi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=xt;try{var n=Fi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ye(Ze,Wi),i}finally{xt=t,Bi=!1}}return null}var Hi=[],Vi=0,qi=null,Ji=0,Yi=[],$i=0,Ki=null,Gi=1,Qi="";function Xi(e,t){Hi[Vi++]=Ji,Hi[Vi++]=qi,qi=e,Ji=t}function Zi(e,t,n){Yi[$i++]=Gi,Yi[$i++]=Qi,Yi[$i++]=Ki,Ki=e;var r=Gi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gi=1<<32-at(t)+i|n<<i|r,Qi=s+e}else Gi=1<<s|n<<i|r,Qi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Hi[--Vi],Hi[Vi]=null,Ji=Hi[--Vi],Hi[Vi]=null;for(;e===Ki;)Ki=Yi[--$i],Yi[$i]=null,Qi=Yi[--$i],Yi[$i]=null,Gi=Yi[--$i],Yi[$i]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Gi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!is)return ds(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ps=v.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Rc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?d(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:u(e,t,n,r,null);bs(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return g(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return u(t,e=e.get(n)||null,r,i,null);bs(t,r)}return null}function p(i,s,o,l){for(var c=null,d=null,u=s,p=s=0,m=null;null!==u&&p<o.length;p++){u.index>p?(m=u,u=null):m=u.sibling;var b=f(i,u,o[p],l);if(null===b){null===u&&(u=m);break}e&&u&&null===b.alternate&&t(i,u),s=a(b,s,p),null===d?c=b:d.sibling=b,d=b,u=m}if(p===o.length)return n(i,u),is&&Xi(i,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(i,o[p],l))&&(s=a(u,s,p),null===d?c=u:d.sibling=u,d=u);return is&&Xi(i,p),c}for(u=r(i,u);p<o.length;p++)null!==(m=g(u,i,p,o[p],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?p:m.key),s=a(m,s,p),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach((function(e){return t(i,e)})),is&&Xi(i,p),c}function m(i,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,p=o,m=o=0,b=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(b=p,p=null):b=p.sibling;var x=f(i,p,y.value,c);if(null===x){null===p&&(p=b);break}e&&p&&null===x.alternate&&t(i,p),o=a(x,o,m),null===u?d=x:u.sibling=x,u=x,p=b}if(y.done)return n(i,p),is&&Xi(i,m),d;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,m),null===u?d=y:u.sibling=y,u=y);return is&&Xi(i,m),d}for(p=r(i,p);!y.done;m++,y=l.next())null!==(y=g(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach((function(e){return t(i,e)})),is&&Xi(i,m),d}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=s;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(r,d.sibling),(s=i(d,a.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&ys(c)===d.type){n(r,d.sibling),(s=i(d,a.props)).ref=ms(r,d,a),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===k?((s=Lc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(d=a.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case O:return e(r,s,(d=a._init)(a._payload),l)}if(te(a))return p(r,s,a,l);if(L(a))return m(r,s,a,l);bs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Rc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var vs=xs(!0),ws=xs(!1),_s=Si(null),ks=null,Ss=null,js=null;function Ns(){js=Ss=ks=null}function Es(e){var t=_s.current;ji(_s),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){ks=e,js=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ps=null;function Os(e){null===Ps?Ps=[e]:Ps.push(e)}function Ms(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=i.baseState;for(a=0,d=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){u=g.call(f,u,h);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(f,u,h):g)||void 0===h)break e;u=R({},u,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=u):d=d.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Il|=a,e.lanes=a,e.memoizedState=u}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs={},qs=Si(Vs),Js=Si(Vs),Ys=Si(Vs);function $s(e){if(e===Vs)throw Error(s(174));return e}function Ks(e,t){switch(Ni(Ys,t),Ni(Js,e),Ni(qs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ji(qs),Ni(qs,t)}function Gs(){ji(qs),ji(Js),ji(Ys)}function Qs(e){$s(Ys.current);var t=$s(qs.current),n=le(t,e.type);t!==n&&(Ni(Js,e),Ni(qs,n))}function Xs(e){Js.current===e&&(ji(qs),ji(Js))}var Zs=Si(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=v.ReactCurrentDispatcher,ia=v.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function fa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Xa:Za,e=n(r,i),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(da)}if(ra.current=Qa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==ua;return ua=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((sa&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Il|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,La(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,ja.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&sa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ja(e,t,n,r){t.value=n,t.getSnapshot=r,Ea(t)&&Ca(e)}function Na(e,t,n){return n((function(){Ea(t)&&Ca(e)}))}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return ya().memoizedState}function Oa(e,t,n,r){var i=ba();aa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}aa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Da(e,t){return Oa(8390656,8,e,t)}function La(e,t){return Ma(2048,8,e,t)}function Ia(e,t){return Ma(4,2,e,t)}function Ra(e,t){return Ma(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Fa.bind(null,t,e),n)}function Ba(){}function Ua(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Il|=n,e.baseState=!0),t)}function Va(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{xt=n,ia.transition=r}}function qa(){return ya().memoizedState}function Ja(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$a(e))Ka(t,n);else if(null!==(n=Ms(e,t,n,r))){nc(n,e,r,ec()),Ga(n,t,r)}}function Ya(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($a(e))Ka(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ms(e,t,i,r))&&(nc(n,e,r,i=ec()),Ga(n,t,r))}}function $a(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qa={readContext:As,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:As,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ja.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ta,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Va.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=ba();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&sa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Na.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,ja.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Tl.identifierPrefix;if(is){var n=Qi;t=":"+t+"R"+(n=(Gi&~(1<<32-at(Gi)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:As,useCallback:Ua,useContext:As,useEffect:La,useImperativeHandle:za,useInsertionEffect:Ia,useLayoutEffect:Ra,useMemo:Wa,useReducer:va,useRef:Pa,useState:function(){return va(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(ya(),oa.memoizedState,e)},useTransition:function(){return[va(xa)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:As,useCallback:Ua,useContext:As,useEffect:La,useImperativeHandle:za,useInsertionEffect:Ia,useLayoutEffect:Ra,useMemo:Wa,useReducer:wa,useRef:Pa,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(nc(t,e,r,n),Bs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ei,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Oi(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Is(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Oi(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,ql=r),uo(0,t)},n}function go(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=v.ReactCurrentOwner,xo=!1;function vo(e,t,n,r){t.child=null===e?ws(t,null,n,r):vs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=pa(e,t,n,r,s,i),n=ma(),null===e||xo?(is&&n&&es(t),t.flags|=1,vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function _o(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vo(e,t,i)}return t.flags|=1,(e=Mc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Vo(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return No(e,t,n,r,i)}function So(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Ml,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Ml,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni(Ml,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni(Ml,Ol),Ol|=r;return vo(e,t,i,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,i){var s=Oi(n)?Ai:Ci.current;return s=Pi(t,s),Ts(t,i),n=pa(e,t,n,r,s,i),r=ma(),null===e||xo?(is&&r&&es(t),t.flags|=1,vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function Eo(e,t,n,r,i){if(Oi(n)){var s=!0;Ii(t)}else s=!1;if(Ts(t,i),null===t.stateNode)Ho(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pi(t,c=Oi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ls=!1;var h=t.memoizedState;a.state=h,Ws(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ti.current||Ls?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ls||io(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Rs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=Oi(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Ls=!1,h=t.memoizedState,a.state=h,Ws(t,r,a,i);var g=t.memoizedState;o!==u||h!==g||Ti.current||Ls?("function"===typeof f&&(no(t,n,f,r),g=t.memoizedState),(c=Ls||io(t,n,c,r,h,g,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,g,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,g,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,i)}function Co(e,t,n,r,i,s){jo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ri(t,n,!1),Vo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vs(t,e.child,null,s),t.child=vs(t,null,o,s)):vo(e,t,o,s),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ks(e,t.containerInfo)}function Ao(e,t,n,r,i){return fs(),gs(i),t.flags|=256,vo(e,t,n,r),t.child}var Po,Oo,Mo,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ni(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,i,0,null),e=Lc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ic({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vs(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Tl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return pc(),zo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Yi[$i++]=Gi,Yi[$i++]=Qi,Yi[$i++]=Ki,Gi=e.id,Qi=e.overflow,Ki=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Mc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&gs(r),vs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Uo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:case 17:return Oi(t.type)&&Mi(),Jo(t),null;case 3:return r=t.stateNode,Gs(),ji(Ti),ji(Ci),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oo(e,t),Jo(t),null;case 5:Xs(t);var i=$s(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Jo(t),null}if(e=$s(qs.current),us(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":G(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":J(r),Z(r,a,!0);break;case"textarea":J(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":G(e,r),i=K(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?me(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zr("scroll",e):null!=d&&x(e,a,d,l))}switch(n){case"input":J(e),Z(e,r,!1);break;case"textarea":J(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=$s(Ys.current),$s(qs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Jo(t),null;case 13:if(ji(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Jo(t),null);case 4:return Gs(),Oo(e,t),null===e&&Wr(t.stateNode.containerInfo),Jo(t),null;case 10:return Es(t.type._context),Jo(t),null;case 19:if(ji(Zs),null===(a=t.memoizedState))return Jo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Wl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Jo(t),null}else 2*Qe()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Zs.current,Ni(Zs,r?1&n|2:1&n),t):(Jo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Jo(t),6&t.subtreeFlags&&(t.flags|=8192)):Jo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $o(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gs(),ji(Ti),ji(Ci),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ji(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ji(Zs),null;case 4:return Gs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Mo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$s(qs.current);var s,a=null;switch(n){case"input":i=K(e,i),r=K(e,r),a=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ye(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Go=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[pi],delete t[mi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(a,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){Sc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),bl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:pl(t,e),bl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),bl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),xe(l,o);var d=xe(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?me(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):x(i,u,h,d)}switch(l){case"input":X(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;null!=g?ne(i,!!a.multiple,g,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(pl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(pl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:pl(t,e),bl(e);break;case 13:pl(t,e),bl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Qe())),4&r&&gl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(d=Go)||u,pl(t,e),Go=d):pl(t,e),bl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(g=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==g?(g.return=f,Xo=g):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ko;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Ko;var c=Go;if(Ko=a,(Go=l)&&!c)for(Xo=i;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Xo=l):_l(i);for(;null!==s;)Xo=s,xl(s,t,n),s=s.sibling;Xo=i,Ko=o,Go=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xo=s):vl(e)}}function vl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Go||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Sl=Math.ceil,jl=v.ReactCurrentDispatcher,Nl=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Cl=0,Tl=null,Al=null,Pl=0,Ol=0,Ml=Si(0),Dl=0,Ll=null,Il=0,Rl=0,Fl=0,zl=null,Bl=null,Ul=0,Wl=1/0,Hl=null,Vl=!1,ql=null,Jl=null,Yl=!1,$l=null,Kl=0,Gl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==ps.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Ql=null,Error(s(185));bt(e,n,r),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(Rl|=n),4===Dl&&oc(e,Pl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Wl=Qe()+500,zi&&Wi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?Pl:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai((function(){0===(6&Cl)&&Wi()})),n=null;else{switch(vt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cl;Cl|=2;var a=gc();for(Tl===e&&Pl===t||(Hl=null,Wl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ns(),jl.current=a,Cl=i,null!==Al?t=0:(Tl=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=gt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,hc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=gt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ll,hc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Bl,Hl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bl,Hl),t);break}wc(e,Bl,Hl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bl,Hl),r);break}wc(e,Bl,Hl);break;default:throw Error(s(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=gt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Hl),rc(e,Qe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Wl=Qe()+500,zi&&Wi())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var n=El.transition,r=xt;try{if(El.transition=null,xt=1,e)return e()}finally{xt=r,El.transition=n,0===(6&(Cl=t))&&Wi()}}function uc(){Ol=Ml.current,ji(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:Gs(),ji(Ti),ji(Ci),na();break;case 5:Xs(r);break;case 4:Gs();break;case 13:case 19:ji(Zs);break;case 10:Es(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Tl=e,Al=e=Mc(e.current,null),Pl=Ol=t,Dl=0,Ll=null,Fl=Rl=Il=0,Bl=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ns(),ra.current=Qa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,da=!1,ua=0,Nl.current=null,null===n||null===n.return){Dl=1,Ll=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=mo(o);if(null!==g){g.flags&=-257,bo(g,o,l,0,t),1&g.mode&&po(a,d,t),c=d;var p=(t=g).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){po(a,d,t),pc();break e}c=Error(s(426))}else if(is&&1&l.mode){var b=mo(o);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),bo(b,o,l,0,t),gs(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Us(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Jl||!Jl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Us(a,go(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(v){t=v,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function gc(){var e=jl.current;return jl.current=Qa,null===e?Qa:e}function pc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Tl||0===(268435455&Il)&&0===(268435455&Rl)||oc(Tl,Pl)}function mc(e,t){var n=Cl;Cl|=2;var r=gc();for(Tl===e&&Pl===t||(Hl=null,hc(e,t));;)try{bc();break}catch(i){fc(e,i)}if(Ns(),Cl=n,jl.current=r,null!==Al)throw Error(s(261));return Tl=null,Pl=0,Dl}function bc(){for(;null!==Al;)xc(Al)}function yc(){for(;null!==Al&&!Ke();)xc(Al)}function xc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?vc(e):Al=t,Nl.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ol)))return void(Al=n)}else{if(null!==(n=$o(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=xt,i=El.transition;try{El.transition=null,xt=1,function(e,t,n,r){do{_c()}while(null!==$l);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Tl&&(Al=Tl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Tc(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=El.transition,El.transition=null;var o=xt;xt=1;var l=Cl;Cl|=4,Nl.current=null,function(e,t){if(ei=Vt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var g;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(g=h.firstChild);)f=h,h=g;for(;;){if(h===e)break t;if(f===n&&++d===i&&(l=o),f===a&&++u===r&&(c=o),null!==(g=h.nextSibling))break;f=(h=f).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,b=p.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(s(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=tl,tl=!1}(e,n),ml(n,e),gr(ti),Vt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ge(),Cl=l,xt=o,El.transition=a}else e.current=n;if(Yl&&(Yl=!1,$l=e,Kl=i),a=e.pendingLanes,0===a&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=ql,ql=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Ql?Gl++:(Gl=0,Ql=e):Gl=0,Wi()}(e,t,n,r)}finally{El.transition=i,xt=r}return null}function _c(){if(null!==$l){var e=vt(Kl),t=El.transition,n=xt;try{if(El.transition=null,xt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Kl=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var f=(u=Xo).sibling,g=u.return;if(sl(u),u===d){Xo=null;break}if(null!==f){f.return=g,Xo=f;break}Xo=g}}}var p=a.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xo=y;break e}Xo=a.return}}var x=e.current;for(Xo=x;null!==Xo;){var v=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Xo=v;else e:for(o=x;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Cl=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{xt=n,El.transition=t}}return!1}function kc(e,t,n){e=zs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(bt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=zs(t,e=go(t,e=lo(n,e),1),1),e=ec(),null!==t&&(bt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>Qe()-Ul?hc(e,0):Fl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ds(e,t))&&(bt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function Tc(e,t){return Ye(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Lc(n.children,i,a,t);case S:o=8,i|=8;break;case j:return(e=Pc(12,n,t,2|i)).elementType=j,e.lanes=a,e;case T:return(e=Pc(13,n,t,i)).elementType=T,e.lanes=a,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=a,e;case M:return Ic(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case C:o=11;break e;case P:o=14;break e;case O:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Rc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function Uc(e){if(!e)return Ei;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Wc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=Uc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,bt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,a))&&(nc(e,i,a,s),Bs(e,i,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fs();break;case 5:Qs(t);break;case 1:Oi(t.type)&&Ii(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ro(e,t,n):(Ni(Zs,1&Zs.current),null!==(e=Vo(e,t,n))?e.sibling:null);Ni(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Vo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ji,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ts(t,n),i=pa(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Ii(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Is(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),vo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),i){case 0:t=No(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Rs(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Vo(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),jo(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ro(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vs(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ni(_s,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ti.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Cs(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=As(i)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Ho(e,t),t.tag=1,Oi(r)?(e=!0,Ii(t)):e=!1,Ts(t,n),so(t,r,i),oo(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Vc(a);o.call(e)}}Hc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Vc(a);s.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[gi]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Vc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[gi]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Vc(a)}Kc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Kc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[gi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Rt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Cl)&&(Wl=Qe()+500,Wi()))}break;case 13:dc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Jc(e,1)}},_t=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Jc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Jc(e,t)}},St=function(){return xt},jt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));Y(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[xi,vi,wi,Ne,Ee,cc]},td={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,a,o),e[gi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[gi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class s extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e))).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach((e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))})),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=s},745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(r.version)}},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let s=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer="count=".concat(n)),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>'"'.concat(e,'"')));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push("count=".concat(r)),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>'"'.concat(e,'"')));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const s=r(n(829));t.PostgrestQueryBuilder=s.default;const a=r(n(736));t.PostgrestFilterBuilder=a.default;const o=r(n(374));t.PostgrestTransformBuilder=o.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".f985087a.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="expense-tracker:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkexpense_tracker=self.webpackChunkexpense_tracker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,i=n(43),s=n.t(i,2),a=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l=r.Pop,h=null,m=b();function b(){return(o.state||{idx:null}).idx}function y(){l=r.Pop;let e=b(),t=null==e?null:e-m;m=e,h&&h({action:l,location:v.location,delta:t})}function x(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,o.replaceState(c({},o.state,{idx:m}),""));let v={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),h=e,()=>{s.removeEventListener(d,y),h=null}},createHref:e=>t(s,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=g(v.location,e,t);n&&n(i,e),m=b()+1;let c=f(i,m),d=v.createHref(i);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(d)}a&&h&&h({action:l,location:v.location,delta:1})},replace:function(e,t){l=r.Replace;let i=g(v.location,e,t);n&&n(i,e),m=b();let s=f(i,m),c=v.createHref(i);o.replaceState(s,"",c),a&&h&&h({action:l,location:v.location,delta:0})},go:e=>o.go(e)};return v}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let s=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=M(i);a=P(s[o],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=z([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:A(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=_(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,S=3,j=2,N=1,E=10,C=-2,T=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=C),t&&(r+=j),n.filter((e=>!T(e))).reduce(((e,t)=>e+(k.test(t)?S:""===t?N:E)),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:z([s,d.pathname]),pathnameBase:B(z([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=z([s,d.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=I(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:W(i)}}(i,s),d=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],q=(new Set(V),["get",...V]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}const Y=i.createContext(null);const $=i.createContext(null);const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function Z(){return null!=i.useContext(G)}function ee(){return Z()||u(!1),i.useContext(G).location}function te(e){i.useContext(K).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(Q);return e?function(){let{router:e}=he(de.UseNavigateStable),t=ge(ue.UseNavigateStable),n=i.useRef(!1);te((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,J({fromRouteId:t},i)))}),[e,t]);return r}():function(){Z()||u(!1);let e=i.useContext(Y),{basename:t,future:n,navigator:r}=i.useContext(K),{matches:s}=i.useContext(Q),{pathname:a}=ee(),o=JSON.stringify(R(s,n.v7_relativeSplatPath)),l=i.useRef(!1);te((()=>{l.current=!0}));let c=i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:z([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,o,a,e]);return c}()}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(K),{matches:s}=i.useContext(Q),{pathname:a}=ee(),o=JSON.stringify(R(s,r.v7_relativeSplatPath));return i.useMemo((()=>F(e,JSON.parse(o),a,"path"===n)),[e,o,a,n])}function ie(e,t,n,s){Z()||u(!1);let{navigator:a,static:o}=i.useContext(K),{matches:l}=i.useContext(Q),c=l[l.length-1],d=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,g=ee();if(t){var p;let e="string"===typeof t?m(t):t;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),f=e}else f=g;let b=f.pathname||"/",y=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=!o&&n&&n.matches&&n.matches.length>0?n.matches:x(e,{pathname:y});let w=ce(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:z([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:z([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,s);return t&&w?i.createElement(G.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:r.Pop}},w):w}function se(){let e=function(){var e;let t=i.useContext(X),n=fe(ue.UseRouteError),r=ge(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ae=i.createElement(se,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Q.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(Y);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Q.Provider,{value:t},r)}function ce(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,r,s)=>{let a,u=!1,h=null,f=null;var g;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,c&&(d<0&&0===s?(g="route-fallback",!1||pe[g]||(pe[g]=!0),u=!0,f=null):d===s&&(u=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),m=()=>{let t;return t=a?h:u?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(le,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=i.useContext(Y);return t||u(!1),t}function fe(e){let t=i.useContext($);return t||u(!1),t}function ge(e){let t=function(){let e=i.useContext(Q);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function be(e){let{to:t,replace:n,state:r,relative:s}=e;Z()||u(!1);let{future:a,static:o}=i.useContext(K),{matches:l}=i.useContext(Q),{pathname:c}=ee(),d=ne(),h=F(t,R(l,a.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return i.useEffect((()=>d(JSON.parse(f),{replace:n,state:r,relative:s})),[d,f,s,n,r]),null}function ye(e){u(!1)}function xe(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&u(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:d,navigator:o,static:l,future:J({v7_relativeSplatPath:!1},c)})),[d,c,o,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:g="",hash:p="",state:b=null,key:y="default"}=s,x=i.useMemo((()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:g,hash:p,state:b,key:y},navigationType:a}}),[d,f,g,p,b,y,a]);return null==x?null:i.createElement(K.Provider,{value:h},i.createElement(G.Provider,{children:n,value:x}))}function ve(e){let{children:t,location:n}=e;return ie(we(t),n)}new Promise((()=>{}));i.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,we(e.props.children,s));e.type!==ye&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,s)),n.push(a)})),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Kd){}new Map;const je=s.startTransition;l.flushSync,s.useId;function Ne(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),b((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return g("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,o)));let l=a.current,[c,d]=i.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},h=i.useCallback((e=>{u&&je?je((()=>d(e))):d(e)}),[d,u]);return i.useLayoutEffect((()=>l.listen(h)),[l,h]),i.useEffect((()=>me(r)),[r]),i.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,g=ke(e,Se),{basename:m}=i.useContext(K),b=!1;if("string"===typeof d&&Ce.test(d)&&(n=d,Ee))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:b=!0}catch(Kd){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||u(!1);let{basename:r,navigator:s}=i.useContext(K),{hash:a,pathname:o,search:l}=re(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:z([r,o])),s.createHref({pathname:c,search:l,hash:a})}(d,{relative:s}),x=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ne(),d=ee(),u=re(e,{relative:o});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(d)===p(u);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}}),[d,c,u,r,s,n,e,a,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return i.createElement("a",_e({},g,{href:n||y,onClick:b||a?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:c}))}));var Ae,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));var Oe=n(319),Me=n(379);const De="expense-tracker-db",Le="expenses",Ie="categories",Re="tags",Fe="wallets",ze="recurring",Be="budgets",Ue="transfers",We={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Le,"readonly").objectStore(Le).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Le,"readwrite").objectStore(Le),a=(0,Me.A)((0,Me.A)({},e),{},{id:e.id||Date.now(),walletId:e.walletId||"cash",isIncome:e.isIncome||!1,notes:e.notes||"",photoUrl:e.photoUrl||""}),o=s.add(a);o.onsuccess=()=>{t(a),i.close()},o.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Le,"readwrite").objectStore(Le),a=(0,Me.A)((0,Me.A)({},e),{},{walletId:e.walletId||"cash",isIncome:e.isIncome||!1,notes:e.notes||"",photoUrl:e.photoUrl||""}),o=s.put(a);o.onsuccess=()=>{t(e),i.close()},o.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Le,"readwrite").objectStore(Le).delete(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))},He={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Ie,"readonly").objectStore(Ie).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ie,"readwrite").objectStore(Ie).add(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ie,"readwrite").objectStore(Ie).put(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ie,"readwrite").objectStore(Ie).delete(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))},Ve={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Re,"readonly").objectStore(Re).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Re,"readwrite").objectStore(Re).add(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Re,"readwrite").objectStore(Re).put(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Re,"readwrite").objectStore(Re).delete(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))},qe={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Fe,"readonly").objectStore(Fe).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Fe,"readwrite").objectStore(Fe).add(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Fe,"readwrite").objectStore(Fe).put(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Fe,"readwrite").objectStore(Fe).delete(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))},Je={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(ze,"readonly").objectStore(ze).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),getById:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(ze,"readonly").objectStore(ze).get(e);s.onsuccess=()=>{t(s.result),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(ze,"readwrite").objectStore(ze).add(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(ze,"readwrite").objectStore(ze).put(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(ze,"readwrite").objectStore(ze).delete(e);s.onsuccess=()=>{t(!0),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),getDueTransactions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(ze,"readonly").objectStore(ze).index("nextDate"),a=(e=>e.toISOString().split("T")[0])(e),o=IDBKeyRange.upperBound(a),l=s.getAll(o);l.onsuccess=()=>{t(l.result),i.close()},l.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))}},Ye={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Be,"readonly").objectStore(Be).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),getByCategory:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Be,"readonly").objectStore(Be).index("category").getAll(e);s.onsuccess=()=>{t(s.result),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Be,"readwrite").objectStore(Be),a=(0,Me.A)((0,Me.A)({},e),{},{id:e.id||Date.now()}),o=s.add(a);o.onsuccess=()=>{t(a),i.close()},o.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Be,"readwrite").objectStore(Be).put(e);s.onsuccess=()=>{t(e),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Be,"readwrite").objectStore(Be).delete(e);s.onsuccess=()=>{t(!0),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))},$e={getAll:()=>new Promise(((e,t)=>{const n=window.indexedDB.open(De,7);n.onsuccess=n=>{const r=n.target.result,i=r.transaction(Ue,"readonly").objectStore(Ue).getAll();i.onsuccess=()=>{e(i.result),r.close()},i.onerror=e=>{t(e),r.close()}},n.onerror=e=>{t(e.target.error)}})),add:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ue,"readwrite").objectStore(Ue),a=(0,Me.A)((0,Me.A)({},e),{},{id:e.id||Date.now(),date:e.date||(new Date).toISOString().slice(0,10),photoUrl:e.photoUrl||""}),o=s.add(a);o.onsuccess=()=>{t(a),i.close()},o.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),update:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ue,"readwrite").objectStore(Ue);if(!e.id)return n(new Error("Transfer ID is required for update")),void i.close();const a=(0,Me.A)((0,Me.A)({},e),{},{date:e.date||(new Date).toISOString().slice(0,10),photoUrl:e.photoUrl||""}),o=s.put(a);o.onsuccess=()=>{t(a),i.close()},o.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}})),delete:e=>new Promise(((t,n)=>{const r=window.indexedDB.open(De,7);r.onsuccess=r=>{const i=r.target.result,s=i.transaction(Ue,"readwrite").objectStore(Ue).delete(e);s.onsuccess=()=>{t(!0),i.close()},s.onerror=e=>{n(e),i.close()}},r.onerror=e=>{n(e.target.error)}}))};var Ke=n(61);class Ge{constructor(e){this.user=e,this.syncStatus={lastSync:this.getLastSyncTime(),inProgress:!1,conflicts:[],errors:[],hasLocalChanges:this.hasLocalChanges(),isOnline:navigator.onLine},window.addEventListener("online",this.handleOnlineStatusChange.bind(this)),window.addEventListener("offline",this.handleOnlineStatusChange.bind(this))}getSyncStatus(){return this.syncStatus}handleOnlineStatusChange(){this.syncStatus.isOnline=navigator.onLine,this.saveStatusToLocalStorage()}getLastSyncTime(){return localStorage.getItem("lastSyncTime")||null}hasLocalChanges(){return"true"===localStorage.getItem("hasLocalChanges")}markLocalChange(){this.syncStatus.hasLocalChanges=!0,localStorage.setItem("hasLocalChanges","true"),this.saveStatusToLocalStorage()}clearLocalChanges(){this.syncStatus.hasLocalChanges=!1,localStorage.removeItem("hasLocalChanges"),this.saveStatusToLocalStorage()}saveStatusToLocalStorage(){localStorage.setItem("syncStatus",JSON.stringify(this.syncStatus)),this.syncStatus.lastSync&&localStorage.setItem("lastSyncTime",this.syncStatus.lastSync)}async fullSync(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bidirectional";if(this.syncStatus.inProgress)throw new Error("Sync already in progress");if(!this.syncStatus.isOnline)throw new Error("Cannot sync while offline");if(null===(e=this.user)||void 0===e||!e.id)throw new Error("User not authenticated");this.syncStatus.inProgress=!0,this.syncStatus.errors=[],this.syncStatus.conflicts=[],this.saveStatusToLocalStorage();try{let e={success:!0,conflicts:[],stats:{}};switch(t){case"upload":e=await this.uploadToCloud();break;case"download":e=await this.downloadFromCloud();break;default:e=await this.bidirectionalSync()}return this.syncStatus.lastSync=(new Date).toISOString(),this.clearLocalChanges(),console.log("".concat(t," sync completed successfully:"),e.stats),e}catch(n){throw this.syncStatus.errors.push({message:n.message,timestamp:(new Date).toISOString(),type:t}),n}finally{this.syncStatus.inProgress=!1,this.saveStatusToLocalStorage()}}async uploadToCloud(){const e={expenses:{uploaded:0,errors:0},categories:{uploaded:0,errors:0},wallets:{uploaded:0,errors:0},transfers:{uploaded:0,errors:0},tags:{uploaded:0,errors:0},budgets:{uploaded:0,errors:0},recurring:{uploaded:0,errors:0}};return await this.uploadDataType("categories",He,Ke.T0,e),await this.uploadDataType("tags",Ve,Ke.d6,e),await this.uploadDataType("wallets",qe,Ke.qF,e),await this.uploadDataType("budgets",Ye,Ke.mh,e),await this.uploadDataType("recurring",Je,Ke.Mq,e),await this.uploadDataType("transfers",$e,Ke.transferDB,e),await this.uploadDataType("expenses",We,Ke.expenseDB,e),{success:!0,conflicts:[],stats:e}}async downloadFromCloud(){const e={expenses:{downloaded:0,errors:0},categories:{downloaded:0,errors:0},wallets:{downloaded:0,errors:0},transfers:{downloaded:0,errors:0},tags:{downloaded:0,errors:0},budgets:{downloaded:0,errors:0},recurring:{downloaded:0,errors:0}};return await this.downloadDataType("categories",Ke.T0,He,e),await this.downloadDataType("tags",Ke.d6,Ve,e),await this.downloadDataType("wallets",Ke.qF,qe,e),await this.downloadDataType("budgets",Ke.mh,Ye,e),await this.downloadDataType("recurring",Ke.Mq,Je,e),await this.downloadDataType("transfers",Ke.transferDB,$e,e),await this.downloadDataType("expenses",Ke.expenseDB,We,e),{success:!0,conflicts:[],stats:e}}async bidirectionalSync(){const e={expenses:{uploaded:0,downloaded:0,conflicts:0},categories:{uploaded:0,downloaded:0,conflicts:0},wallets:{uploaded:0,downloaded:0,conflicts:0},transfers:{uploaded:0,downloaded:0,conflicts:0},tags:{uploaded:0,downloaded:0,conflicts:0},budgets:{uploaded:0,downloaded:0,conflicts:0},recurring:{uploaded:0,downloaded:0,conflicts:0}},t=[],n=[{name:"categories",local:He,remote:Ke.T0},{name:"tags",local:Ve,remote:Ke.d6},{name:"wallets",local:qe,remote:Ke.qF},{name:"budgets",local:Ye,remote:Ke.mh},{name:"recurring",local:Je,remote:Ke.Mq},{name:"transfers",local:$e,remote:Ke.transferDB},{name:"expenses",local:We,remote:Ke.expenseDB}];for(const i of n)try{const n=await this.syncDataTypeBidirectional(i.name,i.local,i.remote,e[i.name]);n.conflicts.length>0&&(t.push(...n.conflicts),e[i.name].conflicts=n.conflicts.length)}catch(r){console.error("Error syncing ".concat(i.name,":"),r),this.syncStatus.errors.push({message:"".concat(i.name,": ").concat(r.message),timestamp:(new Date).toISOString(),type:"bidirectional"})}return{success:!0,conflicts:t,stats:e}}async uploadDataType(e,t,n,r){try{const a=await t.getAll();for(const t of a)try{const i=this.transformForSupabase(e,t);await n.add(i,this.user.id),r[e].uploaded++}catch(i){if(i.message.includes("duplicate")||"23505"===i.code)try{const i=this.transformForSupabase(e,t);await n.update(i,this.user.id),r[e].uploaded++}catch(s){console.error("Error updating ".concat(e,":"),s),r[e].errors++}else console.error("Error uploading ".concat(e,":"),i),r[e].errors++}}catch(i){console.error("Error getting local ".concat(e,":"),i),r[e].errors++}}async downloadDataType(e,t,n,r){try{const s=await t.getAll(this.user.id),a=await n.getAll();for(const e of a)await n.delete(e.id);for(const t of s)try{const i=this.transformFromSupabase(e,t);await n.add(i),r[e].downloaded++}catch(i){console.error("Error downloading ".concat(e,":"),i),r[e].errors++}}catch(i){console.error("Error getting remote ".concat(e,":"),i),r[e].errors++}}async syncDataTypeBidirectional(e,t,n,r){const i=[];try{const[a,o]=await Promise.all([t.getAll(),n.getAll(this.user.id)]),l=new Map(a.map((e=>[e.id,e]))),c=new Map(o.map((e=>[e.id,e])));for(const[t,i]of l)if(!c.has(t))try{const t=this.transformForSupabase(e,i);await n.add(t,this.user.id),r.uploaded++}catch(s){console.error("Error uploading new ".concat(e,":"),s)}for(const[n,i]of c)if(!l.has(n))try{const n=this.transformFromSupabase(e,i);await t.add(n),r.downloaded++}catch(s){console.error("Error downloading new ".concat(e,":"),s)}for(const[n,d]of l){const a=c.get(n);if(a){if(this.detectConflict(e,d,a))try{const s=this.transformFromSupabase(e,a);await t.update(s),r.downloaded++,i.push({id:n,type:e,localVersion:d,remoteVersion:a,resolution:"remote_wins"})}catch(s){console.error("Error resolving conflict for ".concat(e,":"),s)}}}}catch(s){throw console.error("Error in bidirectional sync for ".concat(e,":"),s),s}return{conflicts:i}}transformForSupabase(e,t){const n=(0,Me.A)({},t);switch(e){case"expenses":n.walletId&&(n.wallet_id=n.walletId,delete n.walletId),void 0!==n.isIncome&&(n.is_income=n.isIncome,delete n.isIncome),n.photoUrl&&(n.photo_url=n.photoUrl,delete n.photoUrl);break;case"transfers":n.fromWallet&&(n.from_wallet_id=n.fromWallet,delete n.fromWallet),n.toWallet&&(n.to_wallet_id=n.toWallet,delete n.toWallet),n.fromWalletName&&(n.from_wallet_name=n.fromWalletName,delete n.fromWalletName),n.toWalletName&&(n.to_wallet_name=n.toWalletName,delete n.toWalletName),n.photoUrl&&(n.photo_url=n.photoUrl,delete n.photoUrl)}return n}transformFromSupabase(e,t){const n=(0,Me.A)({},t);switch(delete n.user_id,delete n.created_at,delete n.updated_at,e){case"expenses":n.wallet_id&&(n.walletId=n.wallet_id,delete n.wallet_id),void 0!==n.is_income&&(n.isIncome=n.is_income,delete n.is_income),n.photo_url&&(n.photoUrl=n.photo_url,delete n.photo_url);break;case"transfers":n.from_wallet_id&&(n.fromWallet=n.from_wallet_id,delete n.from_wallet_id),n.to_wallet_id&&(n.toWallet=n.to_wallet_id,delete n.to_wallet_id),n.from_wallet_name&&(n.fromWalletName=n.from_wallet_name,delete n.from_wallet_name),n.to_wallet_name&&(n.toWalletName=n.to_wallet_name,delete n.to_wallet_name),n.photo_url&&(n.photoUrl=n.photo_url,delete n.photo_url)}return n}detectConflict(e,t,n){const r=(0,Me.A)({},t),i=(0,Me.A)({},n);delete r.created_at,delete r.updated_at,delete i.created_at,delete i.updated_at,delete i.user_id;const s=this.transformFromSupabase(e,i);return JSON.stringify(r)!==JSON.stringify(s)}async exportLocalData(){try{var e;const[t,n,r,i,s,a,o]=await Promise.all([We.getAll(),He.getAll(),qe.getAll(),$e.getAll(),Ve.getAll(),Ye.getAll(),Je.getAll()]);return{version:"1.0",exportDate:(new Date).toISOString(),userId:(null===(e=this.user)||void 0===e?void 0:e.id)||"anonymous",data:{expenses:t,categories:n,wallets:r,transfers:i,tags:s,budgets:a,recurring:o},metadata:{totalExpenses:t.length,totalCategories:n.length,totalWallets:r.length,totalTransfers:i.length,totalTags:s.length,totalBudgets:a.length,totalRecurring:o.length}}}catch(t){throw console.error("Error exporting data:",t),new Error("Export failed: ".concat(t.message))}}async importLocalData(e){try{if(!e.version||!e.data)throw new Error("Invalid backup file format");const{data:n}=e,r=[this.clearDataType(We),this.clearDataType(He),this.clearDataType(qe),this.clearDataType($e),this.clearDataType(Ve),this.clearDataType(Ye),this.clearDataType(Je)];await Promise.all(r);const i=[{name:"categories",data:n.categories||[],db:He},{name:"tags",data:n.tags||[],db:Ve},{name:"wallets",data:n.wallets||[],db:qe},{name:"budgets",data:n.budgets||[],db:Ye},{name:"recurring",data:n.recurring||[],db:Je},{name:"transfers",data:n.transfers||[],db:$e},{name:"expenses",data:n.expenses||[],db:We}],s={};for(const e of i)try{let t=0;for(const n of e.data)await e.db.add(n),t++;s[e.name]={imported:t,total:e.data.length}}catch(t){console.error("Error importing ".concat(e.name,":"),t),s[e.name]={imported:0,total:e.data.length,error:t.message}}return this.markLocalChange(),{success:!0,stats:s}}catch(t){throw console.error("Error importing data:",t),new Error("Import failed: ".concat(t.message))}}async clearDataType(e){try{const t=await e.getAll();for(const n of t)await e.delete(n.id)}catch(t){console.error("Error clearing data type:",t)}}}const Qe=e=>e.inProgress?"Syncing...":e.isOnline?e.hasLocalChanges?"Pending sync":e.errors.length>0?"Error":"Ready":"Offline",Xe=e=>e.inProgress?"\ud83d\udd04":e.isOnline?e.hasLocalChanges?"\u23f3":e.errors.length>0?"\u26a0\ufe0f":"\u2705":"\ud83d\udcf4",Ze=e=>{if(!e)return"Never";const t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):i<24?"".concat(i,"h ago"):s<7?"".concat(s,"d ago"):t.toLocaleDateString()};let et=null;const tt=e=>{et=e&&e.id?new Ge(e):null};var nt=n(579);const rt=(0,i.createContext)(),it=()=>(0,i.useContext)(rt),st=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{(async()=>{try{const{data:{session:t},error:n}=await Oe.A.auth.getSession();if(n)console.error("Error getting session:",n),await Oe.A.auth.signOut(),r(null),tt(null);else{var e;const n=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null;r(n),tt(n)}}catch(t){console.error("Session error:",t),r(null),tt(null)}finally{a(!1)}})();const{data:{subscription:e}}=Oe.A.auth.onAuthStateChange((async(e,t)=>{var n,i;console.log("Auth state changed:",e,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email);const s=null!==(i=null===t||void 0===t?void 0:t.user)&&void 0!==i?i:null;"SIGNED_OUT"===e?(r(null),tt(null)):"SIGNED_IN"===e?(r(s),tt(s)):"TOKEN_REFRESHED"===e?r(s):"USER_UPDATED"===e&&(r(s),tt(s)),"TOKEN_REFRESHED"!==e||t||(console.warn("Token refresh failed, signing out user"),await Oe.A.auth.signOut(),r(null),tt(null)),a(!1)}));return()=>e.unsubscribe()}),[]);const o=async()=>{try{const{error:e}=await Oe.A.auth.signOut();if(e)throw e;r(null),tt(null)}catch(e){console.error("Sign out error:",e),r(null),tt(null)}},l={user:n,loading:s,signUp:async(e,t)=>{try{const{data:n,error:r}=await Oe.A.auth.signUp({email:e,password:t});if(r)throw r;return n}catch(n){throw console.error("Signup error:",n),n}},signIn:async(e,t)=>{try{const{data:n,error:r}=await Oe.A.auth.signInWithPassword({email:e,password:t});if(r)throw r;return n}catch(n){throw console.error("Sign in error:",n),n}},signOut:o,resetPassword:async e=>{try{const{data:t,error:n}=await Oe.A.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(n)throw n;return t}catch(t){throw console.error("Reset password error:",t),t}},updatePassword:async e=>{try{const{data:t,error:n}=await Oe.A.auth.updateUser({password:e});if(n)throw n;return t}catch(t){throw console.error("Update password error:",t),t}},isSessionValid:async()=>{try{const{data:{session:e},error:t}=await Oe.A.auth.getSession();return!t&&e&&e.user}catch(e){return console.error("Session validation error:",e),!1}},refreshSession:async()=>{try{var e,t;const{data:n,error:i}=await Oe.A.auth.refreshSession();if(i)throw i;return r(null!==(e=null===(t=n.session)||void 0===t?void 0:t.user)&&void 0!==e?e:null),n.session}catch(n){throw console.error("Manual session refresh failed:",n),await o(),n}}};return(0,nt.jsx)(rt.Provider,{value:l,children:t})},at=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),{signIn:o,loading:l}=it(),c=ne();return(0,nt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,nt.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-md",children:[(0,nt.jsx)("div",{children:(0,nt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-300",children:"Sign in to your account"})}),s&&(0,nt.jsx)("div",{className:"bg-red-900/50 border border-red-800 text-red-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:s})}),(0,nt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),a(""),e&&n)try{const{error:t}=await o(e,n);if(t)throw new Error(t.message);c("/dashboard")}catch(r){a(r.message)}else a("Please fill in all fields")},children:[(0,nt.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,nt.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,nt.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>r(e.target.value)})]})]}),(0,nt.jsx)("div",{className:"flex items-center justify-between",children:(0,nt.jsx)("div",{className:"text-sm",children:(0,nt.jsx)(Te,{to:"/forgot-password",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Forgot your password?"})})}),(0,nt.jsx)("div",{children:(0,nt.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign in"})}),(0,nt.jsx)("div",{className:"text-center",children:(0,nt.jsxs)("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",(0,nt.jsx)(Te,{to:"/signup",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Sign up"})]})})]})]})})},ot=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),{signUp:u,loading:h}=it(),f=ne();return(0,nt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,nt.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-md",children:[(0,nt.jsx)("div",{children:(0,nt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-300",children:"Create your account"})}),o&&(0,nt.jsx)("div",{className:"bg-red-900/50 border border-red-800 text-red-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:o})}),c&&(0,nt.jsx)("div",{className:"bg-green-900/50 border border-green-800 text-green-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:c})}),(0,nt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),l(""),d(""),e&&n&&s)if(n===s)if(n.length<6)l("Password must be at least 6 characters");else try{const{error:t,user:r}=await u(e,n);if(t)throw new Error(t.message);r?(d("Registration successful! Please check your email to confirm your account."),setTimeout((()=>{f("/login")}),3e3)):d("Registration successful! Please check your email to confirm your account before logging in.")}catch(r){l(r.message)}else l("Passwords do not match");else l("Please fill in all fields")},children:[(0,nt.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,nt.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,nt.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>r(e.target.value)})]}),(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,nt.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:s,onChange:e=>a(e.target.value)})]})]}),(0,nt.jsx)("div",{children:(0,nt.jsx)("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creating account...":"Sign up"})}),(0,nt.jsx)("div",{className:"text-center",children:(0,nt.jsxs)("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",(0,nt.jsx)(Te,{to:"/login",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Sign in"})]})})]})]})})},lt=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),{resetPassword:o,loading:l}=it();return(0,nt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,nt.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-md",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-300",children:"Reset your password"}),(0,nt.jsx)("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Enter your email address and we'll send you instructions to reset your password."})]}),n&&(0,nt.jsx)("div",{className:"bg-red-900/50 border border-red-800 text-red-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:n})}),s&&(0,nt.jsx)("div",{className:"bg-green-900/50 border border-green-800 text-green-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:s})}),(0,nt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async n=>{if(n.preventDefault(),r(""),a(""),e)try{const{error:n,success:r}=await o(e);if(n)throw new Error(n.message);r&&(a("Password reset instructions have been sent to your email."),t(""))}catch(i){r(i.message)}else r("Please enter your email address")},children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-300",children:"Email address"}),(0,nt.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 appearance-none block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Your email address",value:e,onChange:e=>t(e.target.value)})]}),(0,nt.jsx)("div",{children:(0,nt.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Sending instructions...":"Reset Password"})}),(0,nt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,nt.jsx)("div",{className:"text-sm",children:(0,nt.jsx)(Te,{to:"/login",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Back to login"})}),(0,nt.jsx)("div",{className:"text-sm",children:(0,nt.jsx)(Te,{to:"/signup",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Create account"})})]})]})]})})},ct=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),{updatePassword:c,loading:d}=it(),u=ne();return(0,nt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,nt.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-md",children:[(0,nt.jsx)("div",{children:(0,nt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-indigo-300",children:"Set new password"})}),s&&(0,nt.jsx)("div",{className:"bg-red-900/50 border border-red-800 text-red-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:s})}),o&&(0,nt.jsx)("div",{className:"bg-green-900/50 border border-green-800 text-green-300 px-4 py-3 rounded relative",role:"alert",children:(0,nt.jsx)("span",{className:"block sm:inline",children:o})}),(0,nt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),a(""),l(""),e&&n)if(e===n)if(e.length<6)a("Password must be at least 6 characters");else try{const{error:t,success:n}=await c(e);if(t)throw new Error(t.message);n&&(l("Password has been updated successfully."),setTimeout((()=>{u("/login")}),3e3))}catch(r){a(r.message)}else a("Passwords do not match");else a("Please fill in all fields")},children:[(0,nt.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"password",className:"sr-only",children:"New Password"}),(0,nt.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"New Password",value:e,onChange:e=>t(e.target.value)})]}),(0,nt.jsxs)("div",{children:[(0,nt.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm New Password"}),(0,nt.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 placeholder-gray-500 text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm New Password",value:n,onChange:e=>r(e.target.value)})]})]}),(0,nt.jsx)("div",{children:(0,nt.jsx)("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Updating password...":"Update Password"})}),(0,nt.jsx)("div",{className:"text-center",children:(0,nt.jsxs)("p",{className:"text-sm text-gray-400",children:["Remember your password?"," ",(0,nt.jsx)(Te,{to:"/login",className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Sign in"})]})})]})]})})},dt=e=>{let{children:t}=e;const{user:n,loading:r}=it(),i=ee();return r?(0,nt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,nt.jsx)("div",{className:"text-indigo-400",children:(0,nt.jsxs)("svg",{className:"animate-spin h-10 w-10 mr-3",viewBox:"0 0 24 24",children:[(0,nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}):n?t:(0,nt.jsx)(be,{to:"/login",state:{from:i},replace:!0})};function ut(e){let{name:t,options:n,displayValue:r,value:s,onChange:a,defaultValue:o,"aria-label":l,id:c,children:d}=e;const[u,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(""),[p,m]=(0,i.useState)(o||s||null),[b,y]=(0,i.useState)(-1),x=(0,i.useRef)(null),v=(0,i.useRef)(null),w=null===n||void 0===n?void 0:n.filter((e=>r(e).toLowerCase().includes(f.toLowerCase())));(0,i.useEffect)((()=>{function e(e){x.current&&!x.current.contains(e.target)&&h(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const _=e=>{m(e),h(!1),y(-1),a&&a({target:{name:t,value:e}})};return(0,i.useEffect)((()=>{if(b>=0&&v.current){const e=v.current.getElementsByTagName("li");e[b]&&e[b].scrollIntoView({block:"nearest"})}}),[b]),(0,nt.jsxs)("div",{className:"relative",ref:x,children:[(0,nt.jsxs)("button",{type:"button",id:c,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:()=>h(!u),"aria-haspopup":"listbox","aria-expanded":u,"aria-labelledby":l,"aria-controls":"".concat(c,"-listbox"),onKeyDown:e=>{if(u)switch(e.key){case"ArrowDown":e.preventDefault(),y((e=>e<w.length-1?e+1:e));break;case"ArrowUp":e.preventDefault(),y((e=>e>0?e-1:e));break;case"Enter":case" ":e.preventDefault(),b>=0&&b<w.length&&_(w[b]);break;case"Escape":e.preventDefault(),h(!1),y(-1);break;case"Tab":h(!1),y(-1)}else"Enter"!==e.key&&" "!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),h(!0),y(0))},role:"combobox",children:[(0,nt.jsx)("span",{children:p?r(p):"Select an option"}),(0,nt.jsx)("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),u&&(0,nt.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-gray-800 rounded-md shadow-lg max-h-60 overflow-auto",role:"presentation",children:[(0,nt.jsx)("div",{className:"p-2",children:(0,nt.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Search...",value:f,onChange:e=>g(e.target.value),onClick:e=>e.stopPropagation(),"aria-label":"Search options"})}),(0,nt.jsx)("ul",{id:"".concat(c,"-listbox"),className:"py-1",role:"listbox",ref:v,"aria-label":l,children:null===w||void 0===w?void 0:w.map(((e,t)=>(0,nt.jsx)("li",{role:"option",className:"px-4 py-2 hover:bg-gray-700 cursor-pointer text-gray-200 ".concat(b===t?"bg-gray-700":""),onClick:()=>_(e),"aria-selected":p===e,onMouseEnter:()=>y(t),children:d?d(e):r(e)},t)))})]}),(0,nt.jsx)("input",{type:"hidden",name:t,value:p||""})]})}function ht(e){let{children:t,htmlFor:n}=e;return(0,nt.jsx)("label",{htmlFor:n,className:"block",children:t})}function ft(e){let{value:t,children:n}=e;return n}function gt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const pt={blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",lime:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-300",rose:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-300",teal:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300",cyan:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300",orange:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},mt=e=>pt[e]||pt.gray,bt=e=>{for(const[t,n]of Object.entries(pt))if(n===e)return t;return"gray"},yt=Object.keys(pt),xt=["children","color","className","removable","onRemove"];const vt=function(e){let{children:t,color:n="gray",className:r="",removable:i,onRemove:s}=e,a=gt(e,xt);const o=mt(n);return(0,nt.jsxs)("span",(0,Me.A)((0,Me.A)({className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(o," ").concat(r)},a),{},{children:[t,!0===i&&(0,nt.jsxs)("button",{type:"button",className:"ml-1.5 -mr-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-gray-400 hover:bg-gray-200 hover:text-gray-500 focus:outline-none focus:bg-gray-500 focus:text-white",onClick:e=>{e.stopPropagation(),"function"===typeof s&&s()},children:[(0,nt.jsx)("span",{className:"sr-only",children:"Remove tag"}),(0,nt.jsx)("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]}))},wt=(0,i.forwardRef)(((e,t)=>{let{selectedTags:n=[],availableTags:r=[],onChange:s,dbInitialized:a=!1,id:o}=e;const{user:l}=it(),[c,d]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(""),[p,m]=(0,i.useState)([]);(0,i.useImperativeHandle)(t,(()=>({openAddTagModal:()=>h(!0),getTemporaryTags:()=>p})));const b=[...r,...p].filter((e=>e.name.toLowerCase().includes(c.toLowerCase()))).filter((e=>!n.some((t=>"object"===typeof t?t.id===e.id:t===e.id)))),y=e=>{const t=[...n,e];s(t),d("")},x=["blue","green","yellow","indigo","purple","pink","lime","rose","teal","cyan","orange"],v=(e,t)=>e.color||x[t%x.length],w=async()=>{if(!f.trim())return;const e=f.trim().toLowerCase().replace(/\s+/g,"-"),t=["blue","green","yellow","indigo","purple","pink","lime","rose","teal","cyan","orange"],n=t[Math.floor(Math.random()*t.length)],r={id:e,name:f.trim(),color:n};if(a&&l)try{const t=(await Ke.d6.getAll(l.id)).find((t=>t.id===e||t.name.toLowerCase()===f.trim().toLowerCase()));if(t)y(t);else{await Ke.d6.add(r,l.id);const t=(await Ke.d6.getAll(l.id)).find((t=>t.id===e));t?y(t):(m((e=>[...e,r])),y(r))}}catch(i){console.error("Error saving tag to database:",i),m((e=>[...e,r])),y(r)}else{m((e=>[...e,r])),y(r);try{const t=JSON.parse(localStorage.getItem("expense-tags")||"[]");t.some((t=>t.id===e||t.name.toLowerCase()===f.trim().toLowerCase()))||(t.push(r),localStorage.setItem("expense-tags",JSON.stringify(t)))}catch(Kd){console.error("Error saving tag to localStorage:",Kd)}}g(""),h(!1)};return(0,nt.jsxs)("div",{className:"space-y-4",children:[n.length>0&&(0,nt.jsx)("div",{className:"p-4 flex flex-wrap gap-2 mb-4 border-b border-gray-700",children:n.map(((e,t)=>{const i=(e=>{if("object"===typeof e&&null!==e&&e.name)return e;const t=e,n=[...r,...p].find((e=>e.id===t));return n||{id:t,name:t}})(e);return i?(0,nt.jsx)(vt,{color:v(i,t),removable:!0,onRemove:()=>(e=>{const t=n.filter((t=>"object"===typeof t?t.id!==e:t!==e));s(t)})("object"===typeof e?e.id:e),children:i.name},"object"===typeof e?e.id:e):null}))}),(0,nt.jsx)("div",{className:"relative mb-4",children:(0,nt.jsx)("input",{id:o,type:"text",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Search tags...",value:c,onChange:e=>d(e.target.value),"aria-label":"Search tags"})}),(0,nt.jsx)("div",{className:"flex flex-wrap gap-2",children:0===b.length?(0,nt.jsx)("p",{className:"text-gray-400 text-sm",children:"No matching tags found"}):b.map(((e,t)=>(0,nt.jsx)(vt,{color:v(e,t),className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>y(e),children:e.name},e.id)))}),u&&(0,nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Add New Tag"}),(0,nt.jsx)("div",{className:"mb-4",children:(0,nt.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Tag name",value:f,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},autoFocus:!0})}),(0,nt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-300",onClick:()=>{g(""),h(!1)},children:"Cancel"}),(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-300",onClick:w,disabled:!f.trim(),children:"Add Tag"})]})]})})]})}));function _t(e){let{selectedTags:t,availableTags:n,onChange:r,id:s="tags",dbInitialized:a=!1}=e;const o=i.useRef();return(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,nt.jsx)("label",{htmlFor:s,className:"font-medium text-gray-300",children:"Tags"}),(0,nt.jsx)("button",{type:"button",className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors",onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.openAddTagModal()},children:"+ Add New Tag"})]}),(0,nt.jsx)(wt,{ref:o,selectedTags:t,availableTags:n,onChange:r,dbInitialized:a,id:s})]})}function kt(e){const t=e.getDay();return 0===t||6===t}function St(e,t){return e&&t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function jt(e){let{value:t,onChange:n,onClose:r,isSingleDatePicker:s=!1,pickerLabel:a="Select Date Range"}=e;const o=new Date,[l,c]=(0,i.useState)(o.getMonth()),[d,u]=(0,i.useState)(o.getFullYear()),[h,f]=(0,i.useState)("start"),[g,p]=(0,i.useState)({start:(null===t||void 0===t?void 0:t.start)||null,end:(null===t||void 0===t?void 0:t.end)||null}),m=function(e,t){return new Date(e,t+1,0).getDate()}(d,l),b=new Date(d,l,1).getDay();return(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg w-full max-w-xs mt-2",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,nt.jsx)("button",{type:"button",onClick:()=>{0===l?(c(11),u(d-1)):c(l-1)},className:"text-gray-400 hover:text-white px-2",children:"\u2190"}),(0,nt.jsx)("span",{className:"text-white font-semibold",children:new Date(d,l).toLocaleString("en-US",{month:"long",year:"numeric"})}),(0,nt.jsx)("button",{type:"button",onClick:()=>{11===l?(c(0),u(d+1)):c(l+1)},className:"text-gray-400 hover:text-white px-2",children:"\u2192"})]}),(0,nt.jsx)("div",{className:"grid grid-cols-7 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(((e,t)=>(0,nt.jsx)("div",{className:"text-xs text-center ".concat(0===t||6===t?"text-red-400":"text-gray-300"),children:e},e)))}),(0,nt.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array(b).fill(null).map(((e,t)=>(0,nt.jsx)("div",{},t))),Array(m).fill(null).map(((e,r)=>{const i=new Date(d,l,r+1);let a=!1;s?void 0!==(null===t||void 0===t?void 0:t.start)?a=St(i,g.start):void 0!==(null===t||void 0===t?void 0:t.end)&&(a=St(i,g.end)):a=St(i,g.start)||St(i,g.end);const o=!s&&function(e,t,n){return!(!t||!n)&&e>=t&&e<=n}(i,g.start,g.end);return(0,nt.jsx)("button",{className:"w-8 h-8 rounded-full text-sm flex items-center justify-center transition-colors\n                ".concat(kt(i)?"text-red-400":"text-gray-200","\n                ").concat(a?"bg-indigo-600 text-white":o?"bg-indigo-900 text-white":"hover:bg-gray-700","\n              "),onClick:()=>(e=>{s?(void 0!==(null===t||void 0===t?void 0:t.start)?(p({start:e,end:null}),n&&n({start:e,end:null})):void 0!==(null===t||void 0===t?void 0:t.end)&&(p({start:null,end:e}),n&&n({start:null,end:e})),f("start")):"start"===h?(p({start:e,end:null}),f("end")):(e<g.start?p({start:e,end:g.start}):p({start:g.start,end:e}),f("start"),n&&n({start:g.start,end:e<g.start?g.start:e}))})(i),type:"button",children:r+1},r)}))]}),(0,nt.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,nt.jsx)("div",{className:"text-xs text-gray-300",children:s?a:(0,nt.jsxs)(nt.Fragment,{children:[g.start?"Start: ".concat(g.start.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})):"Pick start date",(0,nt.jsx)("br",{}),g.end?"End: ".concat(g.end.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})):g.start?"Pick end date":""]})}),(0,nt.jsx)("button",{className:"px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",onClick:r,type:"button",children:"Done"})]})]})}function Nt(e){let{open:t,onClose:n,onSave:r}=e;const[s,a]=(0,i.useState)("");return t?(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-sm shadow-lg",children:[(0,nt.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Add New Category"}),(0,nt.jsx)("input",{type:"text",className:"w-full px-3 py-2 mb-4 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Category name",value:s,onChange:e=>a(e.target.value),autoFocus:!0}),(0,nt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500",onClick:n,children:"Cancel"}),(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",onClick:()=>{s.trim()&&(r(s.trim()),a(""))},children:"Save"})]})]})}):null}const Et=function(e){let{addExpense:t,dbInitialized:n=!1,onClose:r,onSubmit:s}=e;const{user:a}=it(),o=new Date,l=o.toISOString().slice(0,10),c=o.toTimeString().slice(0,5),[d,u]=(0,i.useState)({name:"",amount:"",category:"food",tags:[],walletId:null,wallet_id:null,is_income:!1,notes:"",photoUrl:"",date:l,time:c}),[h,f]=(0,i.useState)(""),[g,p]=(0,i.useState)(!1),m=(0,i.useRef)(null),[b,y]=(0,i.useState)(""),[x,v]=(0,i.useState)(null),[w,_]=(0,i.useState)(null),[k,S]=(0,i.useState)([{id:"food",name:"Food"},{id:"transportation",name:"Transportation"},{id:"entertainment",name:"Entertainment"},{id:"utilities",name:"Utilities"},{id:"housing",name:"Housing"},{id:"healthcare",name:"Healthcare"},{id:"other",name:"Other"}]),[j,N]=(0,i.useState)([{id:"essential",name:"Essential"},{id:"recurring",name:"Recurring"},{id:"emergency",name:"Emergency"},{id:"personal",name:"Personal"},{id:"work",name:"Work"}]),[E,C]=(0,i.useState)([{id:"cash",name:"Cash",type:"cash",balance:0},{id:"bank",name:"Bank Account",type:"bank",balance:0},{id:"credit",name:"Credit Card",type:"credit_card",balance:0},{id:"ewallet",name:"E-Wallet",type:"e_wallet",balance:0}]),[T,A]=(0,i.useState)(!1),[P,O]=(0,i.useState)(""),[M,D]=(0,i.useState)(""),[L,I]=(0,i.useState)(null),[R,F]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{if(n&&a){const e=await Ke.T0.getAll(a.id);if(e.length>0){S(e);const t=e.find((e=>"food"===e.id))||e[0];t&&u((e=>(0,Me.A)((0,Me.A)({},e),{},{category:t.id})))}const t=await Ke.d6.getAll(a.id);t.length>0&&N(t);const n=await Ke.qF.getAll(a.id);if(n.length>0){C(n);const e=n[0];e&&u((t=>(0,Me.A)((0,Me.A)({},t),{},{walletId:e.id,wallet_id:e.id})))}else console.error("No wallets found in database"),alert("Please add a wallet before adding transactions")}else z()}catch(h){console.error("Error loading form data:",h),z()}})()}),[n,a]);const z=()=>{const e=localStorage.getItem("expense-categories");if(e){const t=JSON.parse(e);S(t);const n=t.find((e=>"food"===e.id))||t[0];n&&u((e=>(0,Me.A)((0,Me.A)({},e),{},{category:n.id})))}const t=localStorage.getItem("expense-tags");t&&N(JSON.parse(t));const n=localStorage.getItem("wallets");if(n){const e=JSON.parse(n);C(e),e.length>0&&u((t=>(0,Me.A)((0,Me.A)({},t),{},{walletId:e[0].id,wallet_id:e[0].id})))}},B=e=>{const{name:t,value:n}=e.target;u((0,Me.A)((0,Me.A)({},d),{},{[t]:n}))},U=()=>{u((0,Me.A)((0,Me.A)({},d),{},{is_income:!d.is_income}))},W=k.filter((e=>e.name.toLowerCase().includes(M.toLowerCase()))),H=e=>e?bt(e.color):"gray",V=Array.from({length:24},((e,t)=>t.toString().padStart(2,"0"))),q=Array.from({length:60},((e,t)=>t.toString().padStart(2,"0"))),J=(e,t)=>{const n="".concat(e,":").concat(t);u((e=>(0,Me.A)((0,Me.A)({},e),{},{time:n}))),_(null)};return(0,nt.jsxs)("div",{className:"flex flex-col h-full",children:[(0,nt.jsx)("div",{className:"sticky top-0 left-0 right-0 px-6 py-4 bg-gray-800 border-b border-gray-700 z-10",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsxs)("h2",{className:"text-xl font-semibold text-indigo-300",children:["Add New ",d.is_income?"Income":"Expense"]}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full bg-gray-700 bg-opacity-50",onClick:r,children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,nt.jsxs)("div",{className:"flex-1 overflow-auto px-6 py-4 pt-2",children:[(0,nt.jsx)("div",{className:"mb-4",children:(0,nt.jsxs)("div",{className:"flex bg-gray-700 rounded-md p-1",children:[(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat(d.is_income?"text-gray-300":"bg-indigo-600 text-white"),onClick:()=>!d.is_income||U(),children:"Expense"}),(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat(d.is_income?"bg-green-600 text-white":"text-gray-300"),onClick:()=>d.is_income||U(),children:"Income"})]})}),(0,nt.jsxs)("form",{id:"expense-form",onSubmit:async e=>{var n;if(e.preventDefault(),null!==(n=d.name)&&void 0!==n&&n.trim())if(d.wallet_id)try{var r;p(!0);const e=d.time?"".concat(d.date,"T").concat(d.time,":00"):d.date,n={amount:parseFloat(d.amount),description:d.name.trim(),category:d.category,date:e,wallet_id:d.wallet_id,notes:(null===(r=d.notes)||void 0===r?void 0:r.trim())||"",tags:d.tags,is_income:Boolean(d.is_income),photo_url:d.photoUrl||null};console.log("Submitting expense data:",n);const i=s||t;if("function"!==typeof i)throw new Error("No submit function provided");await i(n),u({name:"",amount:"",category:d.category,tags:[],wallet_id:d.wallet_id,is_income:!1,notes:"",photoUrl:"",date:l,time:c}),y(""),m.current&&(m.current.value="")}catch(h){console.error("Error adding expense:",h),f(h.message||"There was a problem saving your expense. Please try again.")}finally{p(!1)}else f("Please select a wallet");else f("Please enter a description")},children:[(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsxs)("label",{htmlFor:"name",className:"block mb-2 font-medium text-gray-300",children:[d.is_income?"Income":"Expense"," Name"]}),(0,nt.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:B,placeholder:d.is_income?"e.g., Salary":"e.g., Groceries",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,autoFocus:!0})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"amount",className:"block mb-2 font-medium text-gray-300",children:"Amount (Rp)"}),(0,nt.jsx)("input",{type:"number",id:"amount",name:"amount",value:d.amount,onChange:B,placeholder:"0",step:"1000",min:"1000",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,nt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"date",className:"block mb-2 font-medium text-gray-300",children:"Date"}),(0,nt.jsx)("input",{type:"text",id:"date",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select date",readOnly:!0,value:d.date?(e=>{if(!e)return"";return("string"===typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})(d.date):"",onClick:()=>v("date")}),"date"===x&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 date-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select Date"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>v(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsx)(jt,{value:{start:d.date?new Date(d.date):null,end:null},onChange:e=>{if(e.start){const t=e.start.toISOString().slice(0,10);u((e=>(0,Me.A)((0,Me.A)({},e),{},{date:t})))}v(null)},onClose:()=>v(null),isSingleDatePicker:!0,pickerLabel:"Select Date"})]})})]}),(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"time",className:"block mb-2 font-medium text-gray-300",children:"Time"}),(0,nt.jsx)("input",{type:"text",id:"time",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select time",readOnly:!0,value:d.time?(e=>{if(!e)return"";const[t,n]=e.split(":"),r=parseInt(t,10),i=r>=12?"PM":"AM";return"".concat(r%12||12,":").concat(n," ").concat(i)})(d.time):"",onClick:()=>_("time")}),"time"===w&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 time-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select Time"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>_(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsxs)("div",{className:"flex justify-between p-4 bg-gray-700 rounded-lg",children:[(0,nt.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto w-1/2 pr-2",children:[(0,nt.jsx)("p",{className:"text-xs font-semibold text-gray-300 px-2",children:"Hour"}),(0,nt.jsx)("ul",{className:"space-y-1",children:V.map((e=>(0,nt.jsx)("li",{children:(0,nt.jsx)("button",{type:"button",className:"w-full text-left px-2 py-1 hover:bg-indigo-600 hover:text-white rounded ".concat(d.time&&d.time.split(":")[0]===e?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>J(e,d.time.split(":")[1]||"00"),children:e})},"hour-".concat(e))))})]}),(0,nt.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto w-1/2 pl-2",children:[(0,nt.jsx)("p",{className:"text-xs font-semibold text-gray-300 px-2",children:"Minute"}),(0,nt.jsx)("ul",{className:"space-y-1",children:q.map((e=>(0,nt.jsx)("li",{children:(0,nt.jsx)("button",{type:"button",className:"w-full text-left px-2 py-1 hover:bg-indigo-600 hover:text-white rounded ".concat(d.time&&d.time.split(":")[1]===e?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>J(d.time.split(":")[0]||"00",e),children:e})},"minute-".concat(e))))})]})]})]})})]})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"wallet-select",className:"block mb-2 font-medium text-gray-300",children:"Wallet"}),E.length>0?(0,nt.jsx)(ut,{id:"wallet-select",name:"wallet",options:E,displayValue:e=>null===e||void 0===e?void 0:e.name,defaultValue:E.find((e=>e.id===d.walletId)),onChange:e=>{const t=null!==e&&void 0!==e&&e.target?e.target.value:e;if(console.log("Selected wallet:",t),!t||!t.id)return console.error("Invalid wallet selected:",t),void f("Please select a valid wallet");u((e=>(0,Me.A)((0,Me.A)({},e),{},{wallet_id:t.id})))},"aria-label":"Wallet",children:e=>(0,nt.jsx)(ft,{value:e,children:(0,nt.jsx)(ht,{children:e.name})})}):(0,nt.jsx)("div",{className:"text-gray-400 py-2",children:"No wallets available. Please add some in Wallets."})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,nt.jsx)("label",{htmlFor:"category-select",className:"font-medium text-gray-300",children:"Category"}),!T&&(0,nt.jsx)("button",{type:"button",className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors",onClick:()=>{F(!0)},children:"+ New Category"})]}),T?(0,nt.jsx)("input",{id:"category-select",type:"text",value:P,onChange:B,placeholder:"New category name",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}):(0,nt.jsxs)("div",{className:"space-y-4",children:[(0,nt.jsx)("div",{className:"relative mb-4",children:(0,nt.jsx)("input",{id:"category-select",type:"text",value:M,onChange:e=>{D(e.target.value)},placeholder:"Search categories...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})}),k.length>0?(0,nt.jsx)("div",{className:"flex flex-wrap gap-2",children:W.map((e=>(0,nt.jsx)(vt,{color:H(e),className:(null===L||void 0===L?void 0:L.id)===e.id?"ring-2 ring-offset-2 ring-offset-gray-800 ring-indigo-500":"",onClick:()=>(e=>{I(e),u((0,Me.A)((0,Me.A)({},d),{},{category:e.id})),D("")})(e),children:e.name},e.id)))}):(0,nt.jsx)("div",{className:"text-gray-400 py-2",children:"No categories available. Please add some in Settings."})]})]}),(0,nt.jsx)("div",{className:"mb-6",children:(0,nt.jsx)(_t,{selectedTags:d.tags,availableTags:j,onChange:e=>{u((t=>(0,Me.A)((0,Me.A)({},t),{},{tags:e})))},id:"tags-select",dbInitialized:n})}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"notes",className:"block mb-2 font-medium text-gray-300",children:"Notes (optional)"}),(0,nt.jsx)("textarea",{id:"notes",name:"notes",value:d.notes,onChange:B,placeholder:"Add any additional details...",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 min-h-[80px]"})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Photo (optional)"}),(0,nt.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,nt.jsxs)("button",{type:"button",onClick:()=>{m.current&&m.current.click()},className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 flex items-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Take Photo"]}),b&&(0,nt.jsx)("button",{type:"button",onClick:()=>{u((0,Me.A)((0,Me.A)({},d),{},{photoUrl:""})),y(""),m.current&&(m.current.value="")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Remove Photo"})]}),(0,nt.jsx)("input",{type:"file",ref:m,accept:"image/*",capture:"camera",className:"hidden",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("File size should be less than 5MB");const n=new FileReader;n.onload=e=>{u((0,Me.A)((0,Me.A)({},d),{},{photoUrl:e.target.result})),y(e.target.result)},n.readAsDataURL(t)}}),b&&(0,nt.jsx)("div",{className:"mt-2 relative",children:(0,nt.jsx)("img",{src:b,alt:"Preview",className:"max-h-48 rounded-md border border-gray-600"})})]}),(0,nt.jsx)("div",{className:"pb-20"})]})]}),(0,nt.jsx)("div",{className:"sticky bottom-0 left-0 right-0 px-6 py-4 bg-gray-800 border-t border-gray-700 shadow-lg",children:(0,nt.jsx)("div",{className:"flex justify-end",children:(0,nt.jsx)("button",{type:"submit",form:"expense-form",className:"px-6 py-2 text-white rounded-md transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 ".concat(d.is_income?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),disabled:g,children:g?"Saving...":d.is_income?"Add Income":"Add Expense"})})}),(0,nt.jsx)(Nt,{open:R,onClose:()=>{F(!1)},onSave:async e=>{if(!e.trim())return;const t={id:e.trim().toLowerCase().replace(/\s+/g,"-"),name:e.trim()};try{if(n&&a)await Ke.T0.add(t,a.id);else{const e=[...k,t];S(e),localStorage.setItem("expense-categories",JSON.stringify(e))}I(t),u((e=>(0,Me.A)((0,Me.A)({},e),{},{category:t.id}))),F(!1)}catch(h){console.error("Error adding category:",h),alert("Failed to add category. Please try again.")}}})]})};const Ct=function(e){let{expense:t,onSave:n,onCancel:r,onDelete:s,dbInitialized:a=!1}=e;const{user:o}=it(),[l,c]=(0,i.useState)({id:t.id,description:t.description||"",amount:t.amount||"",category:t.category||"other",tags:t.tags||[],wallet_id:t.wallet_id||null,is_income:t.is_income||!1,notes:t.notes||"",photoUrl:t.photo_url||"",date:t.date||(new Date).toISOString().slice(0,10),time:t.time||(new Date).toTimeString().slice(0,5)}),[d,u]=(0,i.useState)(""),[h,f]=(0,i.useState)(!1),g=(0,i.useRef)(null),[p,m]=(0,i.useState)(t.photo_url||""),[b,y]=(0,i.useState)(null),[x,v]=(0,i.useState)(null),[w,_]=(0,i.useState)([]),[k,S]=(0,i.useState)([]),[j,N]=(0,i.useState)([{id:"cash",name:"Cash",type:"cash",balance:0},{id:"bank",name:"Bank Account",type:"bank",balance:0},{id:"credit",name:"Credit Card",type:"credit_card",balance:0},{id:"ewallet",name:"E-Wallet",type:"e_wallet",balance:0}]),[E,C]=(0,i.useState)(!0),[T,A]=(0,i.useState)(!1),[P,O]=(0,i.useState)(""),[M,D]=(0,i.useState)(""),[L,I]=(0,i.useState)(w.find((e=>e.id===t.category))||null);(0,i.useEffect)((()=>{(async()=>{try{if(a&&o){const e=await Ke.T0.getAll(o.id);if(e.length>0){_(e);const n=e.find((e=>e.id===t.category));n&&I(n)}const n=await Ke.d6.getAll(o.id);n.length>0&&S(n);const r=await Ke.qF.getAll(o.id);r.length>0&&(N(r),t.wallet_id?c((e=>(0,Me.A)((0,Me.A)({},e),{},{wallet_id:t.wallet_id}))):l.wallet_id||c((e=>(0,Me.A)((0,Me.A)({},e),{},{wallet_id:r[0].id}))))}else R(),F()}catch(d){console.error("Error loading data:",d),R(),F()}finally{C(!1)}})()}),[a,t.category,t.wallet_id,o]);const R=()=>{const e=localStorage.getItem("expense-categories");e&&_(JSON.parse(e));const t=localStorage.getItem("wallets");if(t){const e=JSON.parse(t);N(e),l.wallet_id||c((t=>(0,Me.A)((0,Me.A)({},t),{},{wallet_id:e[0].id})))}},F=()=>{const e=localStorage.getItem("expense-tags");S(e?JSON.parse(e):[{id:"essential",name:"Essential"},{id:"recurring",name:"Recurring"},{id:"emergency",name:"Emergency"},{id:"personal",name:"Personal"},{id:"work",name:"Work"}])},z=e=>{const{name:t,value:n}=e.target;c((0,Me.A)((0,Me.A)({},l),{},{[t]:n}))},B=()=>{c((0,Me.A)((0,Me.A)({},l),{},{is_income:!l.is_income}))},U=async e=>{var i;if(e.preventDefault(),null!==(i=l.description)&&void 0!==i&&i.trim())try{var s;f(!0);const e={id:t.id,amount:parseFloat(l.amount),description:l.description.trim(),category:l.category,date:l.date,wallet_id:l.wallet_id,notes:(null===(s=l.notes)||void 0===s?void 0:s.trim())||"",tags:l.tags,is_income:Boolean(l.is_income),photo_url:l.photoUrl||null};if(console.log("Submitting expense data:",e),"function"!==typeof n)throw new Error("No save function provided");await n(e),r()}catch(d){console.error("Error updating expense:",d),alert("There was a problem saving your expense. Please try again.")}finally{f(!1)}else u("Please enter a description")},W=Array.from({length:24},((e,t)=>t.toString().padStart(2,"0"))),H=Array.from({length:60},((e,t)=>t.toString().padStart(2,"0"))),V=(e,t)=>{const n="".concat(e,":").concat(t);c((e=>(0,Me.A)((0,Me.A)({},e),{},{time:n}))),v(null)},q=w.filter((e=>e.name.toLowerCase().includes(M.toLowerCase()))),J=e=>e?bt(e.color):"gray";return E?(0,nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,nt.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:(0,nt.jsxs)("div",{className:"flex justify-center items-center",children:[(0,nt.jsx)("div",{className:"text-indigo-400",children:(0,nt.jsxs)("svg",{className:"animate-spin h-8 w-8 mr-3",viewBox:"0 0 24 24",children:[(0,nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,nt.jsx)("p",{className:"text-indigo-300",children:"Loading..."})]})})}):(0,nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg w-full max-w-md flex flex-col h-[80vh]",children:[(0,nt.jsx)("div",{className:"sticky top-0 left-0 right-0 px-6 py-4 bg-gray-800 border-b border-gray-700 z-10",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsxs)("h2",{className:"text-xl font-semibold text-indigo-300",children:["Edit ",l.is_income?"Income":"Expense"]}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full bg-gray-700 bg-opacity-50",onClick:r,children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,nt.jsxs)("div",{className:"p-6 pt-2 flex-1 overflow-auto",children:[(0,nt.jsx)("div",{className:"mb-4",children:(0,nt.jsxs)("div",{className:"flex bg-gray-700 rounded-md p-1",children:[(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat(l.is_income?"text-gray-300":"bg-indigo-600 text-white"),onClick:()=>!l.is_income||B(),children:"Expense"}),(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat(l.is_income?"bg-green-600 text-white":"text-gray-300"),onClick:()=>l.is_income||B(),children:"Income"})]})}),(0,nt.jsxs)("form",{onSubmit:U,children:[(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsxs)("label",{htmlFor:"description",className:"block mb-2 font-medium text-gray-300",children:[l.is_income?"Income":"Expense"," Name"]}),(0,nt.jsx)("input",{type:"text",id:"description",name:"description",value:l.description,onChange:z,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"amount",className:"block mb-2 font-medium text-gray-300",children:"Amount (Rp)"}),(0,nt.jsx)("input",{type:"number",id:"amount",name:"amount",value:l.amount,onChange:z,placeholder:"0",step:"1000",min:"1000",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,nt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"date",className:"block mb-2 font-medium text-gray-300",children:"Date"}),(0,nt.jsx)("input",{type:"text",id:"date",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select date",readOnly:!0,value:l.date?(e=>{if(!e)return"";return("string"===typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})(l.date):"",onClick:()=>y("date")}),"date"===b&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 date-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select Date"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>y(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsx)(jt,{value:{start:l.date?new Date(l.date):null,end:null},onChange:e=>{if(e.start){const t=e.start.toISOString().slice(0,10);c((e=>(0,Me.A)((0,Me.A)({},e),{},{date:t})))}y(null)},onClose:()=>y(null),isSingleDatePicker:!0,pickerLabel:"Select Date"})]})})]}),(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"time",className:"block mb-2 font-medium text-gray-300",children:"Time"}),(0,nt.jsx)("input",{type:"text",id:"time",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select time",readOnly:!0,value:l.time?(e=>{if(!e)return"";const[t,n]=e.split(":"),r=parseInt(t,10),i=r>=12?"PM":"AM";return"".concat(r%12||12,":").concat(n," ").concat(i)})(l.time):"",onClick:()=>v("time")}),"time"===x&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 time-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select Time"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>v(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsxs)("div",{className:"flex justify-between p-4 bg-gray-700 rounded-lg",children:[(0,nt.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto w-1/2 pr-2",children:[(0,nt.jsx)("p",{className:"text-xs font-semibold text-gray-300 px-2",children:"Hour"}),(0,nt.jsx)("ul",{className:"space-y-1",children:W.map((e=>(0,nt.jsx)("li",{children:(0,nt.jsx)("button",{type:"button",className:"w-full text-left px-2 py-1 hover:bg-indigo-600 hover:text-white rounded ".concat(l.time&&l.time.split(":")[0]===e?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>V(e,l.time.split(":")[1]||"00"),children:e})},"hour-".concat(e))))})]}),(0,nt.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto w-1/2 pl-2",children:[(0,nt.jsx)("p",{className:"text-xs font-semibold text-gray-300 px-2",children:"Minute"}),(0,nt.jsx)("ul",{className:"space-y-1",children:H.map((e=>(0,nt.jsx)("li",{children:(0,nt.jsx)("button",{type:"button",className:"w-full text-left px-2 py-1 hover:bg-indigo-600 hover:text-white rounded ".concat(l.time&&l.time.split(":")[1]===e?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>V(l.time.split(":")[0]||"00",e),children:e})},"minute-".concat(e))))})]})]})]})})]})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)(ht,{htmlFor:"wallet-select",className:"block mb-2 font-medium text-gray-300",children:"Wallet"}),j.length>0?(0,nt.jsx)(ut,{id:"wallet-select",name:"wallet",options:j,displayValue:e=>null===e||void 0===e?void 0:e.name,defaultValue:j.find((e=>e.id===l.wallet_id)),onChange:e=>{const t=null!==e&&void 0!==e&&e.target?e.target.value:e;t&&t.id?c((e=>(0,Me.A)((0,Me.A)({},e),{},{wallet_id:t.id}))):console.error("Invalid wallet selected:",t)},"aria-label":"Select a wallet",children:e=>(0,nt.jsxs)(ft,{value:e,children:[e.name," ",void 0!==e.balance?"($".concat(e.balance,")"):""]})}):(0,nt.jsx)("div",{className:"text-gray-400 py-2",children:"No wallets available. Please add some in Wallets."})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,nt.jsx)("label",{htmlFor:"category",className:"font-medium text-gray-300",children:"Category"}),!T&&(0,nt.jsx)("button",{type:"button",className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors",onClick:()=>{A(!0)},children:"+ New Category"})]}),T?(0,nt.jsx)("input",{type:"text",value:P,onChange:e=>{O(e.target.value)},placeholder:"New category name",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}):(0,nt.jsxs)("div",{className:"space-y-4",children:[(0,nt.jsx)("div",{className:"relative mb-4",children:(0,nt.jsx)("input",{type:"text",value:M,onChange:e=>{const t=e.target.value.toLowerCase();D(t)},placeholder:"Search categories...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})}),w.length>0?(0,nt.jsx)("div",{className:"flex flex-wrap gap-2",children:q.map((e=>(0,nt.jsx)(vt,{color:J(e),className:(null===L||void 0===L?void 0:L.id)===e.id?"ring-2 ring-offset-2 ring-offset-gray-800 ring-indigo-500":"",onClick:()=>(e=>{I(e),c((0,Me.A)((0,Me.A)({},l),{},{category:e.id})),D("")})(e),children:e.name},e.id)))}):(0,nt.jsx)("div",{className:"text-gray-400 py-2",children:"No categories available. Please add some in Settings."})]})]}),(0,nt.jsx)("div",{className:"mb-6",children:(0,nt.jsx)(_t,{selectedTags:l.tags.map((e=>k.find((t=>t.id===e))||e)),availableTags:k,onChange:e=>{const t=e.map((e=>"object"===typeof e&&null!==e?e.id:e));c((e=>(0,Me.A)((0,Me.A)({},e),{},{tags:t})))},id:"tags",dbInitialized:a})}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"notes",className:"block mb-2 font-medium text-gray-300",children:"Notes (optional)"}),(0,nt.jsx)("textarea",{id:"notes",name:"notes",value:l.notes,onChange:z,placeholder:"Add any additional details...",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 min-h-[80px]"})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Photo (optional)"}),(0,nt.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,nt.jsxs)("button",{type:"button",onClick:()=>{g.current&&g.current.click()},className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 flex items-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),p?"Change Photo":"Take Photo"]}),p&&(0,nt.jsx)("button",{type:"button",onClick:()=>{c((0,Me.A)((0,Me.A)({},l),{},{photoUrl:""})),m(""),g.current&&(g.current.value="")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Remove Photo"})]}),(0,nt.jsx)("input",{type:"file",ref:g,accept:"image/*",capture:"camera",className:"hidden",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("File size should be less than 5MB");const n=new FileReader;n.onload=e=>{c((0,Me.A)((0,Me.A)({},l),{},{photoUrl:e.target.result})),m(e.target.result)},n.readAsDataURL(t)}}),p&&(0,nt.jsx)("div",{className:"mt-2 relative",children:(0,nt.jsx)("img",{src:p,alt:"Preview",className:"max-h-48 rounded-md border border-gray-600"})})]}),(0,nt.jsx)("div",{className:"pb-20"})]})]}),(0,nt.jsx)("div",{className:"sticky bottom-0 left-0 right-0 px-6 py-4 bg-gray-800 border-t border-gray-700 shadow-lg",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete this transaction?")&&(s&&s(l.id),r&&r())},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-300",children:"Delete"}),(0,nt.jsxs)("div",{className:"flex gap-2",children:[(0,nt.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-300",children:"Cancel"}),(0,nt.jsx)("button",{onClick:U,className:"px-4 py-2 text-white rounded-md transition-colors duration-300 ".concat(l.is_income?"bg-green-600 hover:bg-green-700":"bg-indigo-600 hover:bg-indigo-700"),disabled:0===w.length,children:"Save Changes"})]})]})})]})})};const Tt=function(e){let{expenses:t,deleteExpense:n,updateExpense:r,dbInitialized:s=!1}=e;const[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)([]),[h,f]=(0,i.useState)([{id:"food",name:"Food"},{id:"transportation",name:"Transportation"},{id:"entertainment",name:"Entertainment"},{id:"utilities",name:"Utilities"},{id:"housing",name:"Housing"},{id:"healthcare",name:"Healthcare"},{id:"other",name:"Other"}]),{user:g}=it();if((0,i.useEffect)((()=>{(async()=>{try{if(s&&g){const e=await Ke.d6.getAll(g.id);u(e);const t=await Ke.T0.getAll(g.id);t.length>0&&f(t)}else{const e=localStorage.getItem("expense-tags");e&&u(JSON.parse(e));const t=localStorage.getItem("expense-categories");t&&f(JSON.parse(t))}}catch(e){console.error("Error loading tags and categories:",e)}})()}),[s,g]),0===t.length)return(0,nt.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,nt.jsx)("div",{className:"p-6 text-center",children:(0,nt.jsx)("p",{className:"text-gray-400",children:"No expenses added yet. Start adding some!"})})});const p=e=>{const t=h.find((t=>t.id===e));return t?t.name:e},m=e=>{const t=d.find((t=>t.id===e));return t?t.color:"gray"},b=e=>{const t=d.find((t=>t.id===e));return t?t.name:e},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length<=t?e:e.slice(0,t)+"...":""};return(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mb-8",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold mb-4 text-indigo-300",children:"Transaction History"}),(0,nt.jsx)("div",{className:"space-y-4",children:t.map((e=>{return(0,nt.jsxs)("div",{className:"p-4 rounded-lg mb-4 ".concat(e.is_income?"bg-gray-700/80 border-l-4 border-green-500":"bg-gray-700/80 border-l-4 border-red-500"),onClick:()=>(e=>{o(e),c(!0)})(e),children:[(0,nt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white mb-1",children:e.description}),(0,nt.jsx)("div",{className:"text-sm text-gray-400",children:p(e.category)})]}),(0,nt.jsxs)("div",{className:"font-medium mr-3 ".concat(e.is_income?"text-green-400":"text-red-400"),children:[e.is_income?"+":"-"," Rp ",(t=e.amount,new Intl.NumberFormat("id-ID").format(t))]})]}),e.notes&&(0,nt.jsxs)("div",{className:"text-sm text-gray-400 mt-2 bg-gray-800/50 p-2 rounded",children:[(0,nt.jsx)("span",{className:"font-medium text-xs text-gray-500 block mb-1",children:"Notes:"}),y(e.notes)]}),e.photoUrl&&(0,nt.jsx)("div",{className:"mt-2",children:(0,nt.jsx)("img",{src:e.photoUrl,alt:"Receipt",className:"h-16 rounded border border-gray-600 object-cover"})}),(0,nt.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,nt.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags&&e.tags.length>0&&(0,nt.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t=>(0,nt.jsx)(vt,{color:m(t),children:b(t)},"".concat(e.id,"-").concat(t))))})}),(0,nt.jsx)("div",{className:"flex items-center",children:(0,nt.jsx)("div",{className:"text-xs text-gray-500 mr-3",children:new Date(e.date).toLocaleDateString()})})]})]},e.id);var t}))}),l&&a&&(0,nt.jsx)(Ct,{expense:a,onSave:e=>{r(e),c(!1),o(null)},onCancel:()=>{c(!1),o(null)},onDelete:n,dbInitialized:s})]})};var At,Pt,Ot=9e15,Mt=1e9,Dt="0123456789abcdef",Lt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",It="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Rt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ot,maxE:Ot,crypto:!1},Ft=!0,zt="[DecimalError] ",Bt=zt+"Invalid argument: ",Ut=zt+"Precision limit exceeded",Wt=zt+"crypto unavailable",Ht="[object Decimal]",Vt=Math.floor,qt=Math.pow,Jt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Yt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$t=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gt=1e7,Qt=Lt.length-1,Xt=It.length-1,Zt={toStringTag:Ht};function en(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=hn(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=hn(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return s+a}function tn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Bt+e)}function nn(e,t,n,r){var i,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=qt(10,7-t),o=e[i]%s|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),a=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(e[i+1]/s/100|0)==qt(10,t-2)-1||(o==s/2||0==o)&&0==(e[i+1]/s/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),a=(r||n<4)&&9999==o||!r&&n>3&&4999==o):a=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(e[i+1]/s/1e3|0)==qt(10,t-3)-1,a}function rn(e,t,n){for(var r,i,s=[0],a=0,o=e.length;a<o;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=Dt.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}Zt.absoluteValue=Zt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),an(e)},Zt.ceil=function(){return an(new this.constructor(this),this.e+1,2)},Zt.clampedTo=Zt.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Bt+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},Zt.comparedTo=Zt.cmp=function(e){var t,n,r,i,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,c=e.s;if(!a||!o)return l&&c?l!==c?l:a===o?0:!a^l<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?l:o[0]?-c:0;if(l!==c)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,n=(r=a.length)<(i=o.length)?r:i;t<n;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},Zt.cosine=Zt.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/_n(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=wn(e,1,t.times(i),new e(1));for(var s=n;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,kn(r,n)),r.precision=e,r.rounding=t,an(2==Pt||3==Pt?n.neg():n,e,t,!0)):new r(1):new r(NaN)},Zt.cubeRoot=Zt.cbrt=function(){var e,t,n,r,i,s,a,o,l,c,d=this,u=d.constructor;if(!d.isFinite()||d.isZero())return new u(d);for(Ft=!1,(s=d.s*qt(d.s*d,1/3))&&Math.abs(s)!=1/0?r=new u(s.toString()):(n=en(d.d),(s=((e=d.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=qt(n,1/3),e=Vt((e+1)/3)-(e%3==(e<0?-1:2)),(r=new u(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=d.s),a=(e=u.precision)+3;;)if(c=(l=(o=r).times(o).times(o)).plus(d),r=sn(c.plus(d).times(o),c.plus(l),a+2,1),en(o.d).slice(0,a)===(n=en(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(an(r,e+1,1),t=!r.times(r).times(r).eq(d));break}if(!i&&(an(o,e+1,0),o.times(o).times(o).eq(d))){r=o;break}a+=4,i=1}return Ft=!0,an(r,e,u.rounding,t)},Zt.decimalPlaces=Zt.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-Vt(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},Zt.dividedBy=Zt.div=function(e){return sn(this,new this.constructor(e))},Zt.dividedToIntegerBy=Zt.divToInt=function(e){var t=this.constructor;return an(sn(this,new t(e),0,1,1),t.precision,t.rounding)},Zt.equals=Zt.eq=function(e){return 0===this.cmp(e)},Zt.floor=function(){return an(new this.constructor(this),this.e+1,3)},Zt.greaterThan=Zt.gt=function(e){return this.cmp(e)>0},Zt.greaterThanOrEqualTo=Zt.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Zt.hyperbolicCosine=Zt.cosh=function(){var e,t,n,r,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;n=a.precision,r=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?t=(1/_n(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=wn(a,1,s.times(t),new a(1),!0);for(var l,c=e,d=new a(8);c--;)l=s.times(s),s=o.minus(l.times(d.minus(l.times(d))));return an(s,a.precision=n,a.rounding=r,!0)},Zt.hyperbolicSine=Zt.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=wn(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=wn(s,2,i=i.times(1/_n(5,e)),i,!0);for(var a,o=new s(5),l=new s(16),c=new s(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(c))))}return s.precision=t,s.rounding=n,an(i,t,n,!0)},Zt.hyperbolicTangent=Zt.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,sn(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},Zt.inverseCosine=Zt.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?dn(t,r,i):new t(0):new t(NaN):e.isZero()?dn(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))},Zt.inverseHyperbolicCosine=Zt.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Ft=!1,n=n.times(n).minus(1).sqrt().plus(n),Ft=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},Zt.inverseHyperbolicSine=Zt.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Ft=!1,n=n.times(n).plus(1).sqrt().plus(n),Ft=!0,r.precision=e,r.rounding=t,n.ln())},Zt.inverseHyperbolicTangent=Zt.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?an(new s(i),e,t,!0):(s.precision=n=r-i.e,i=sn(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},Zt.inverseSine=Zt.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=dn(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},Zt.inverseTangent=Zt.atan=function(){var e,t,n,r,i,s,a,o,l,c=this,d=c.constructor,u=d.precision,h=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&u+4<=Xt)return(a=dn(d,u+4,h).times(.25)).s=c.s,a}else{if(!c.s)return new d(NaN);if(u+4<=Xt)return(a=dn(d,u+4,h).times(.5)).s=c.s,a}for(d.precision=o=u+10,d.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Ft=!1,t=Math.ceil(o/7),r=1,l=c.times(c),a=new d(c),i=c;-1!==e;)if(i=i.times(l),s=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=s.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),Ft=!0,an(a,d.precision=u,d.rounding=h,!0)},Zt.isFinite=function(){return!!this.d},Zt.isInteger=Zt.isInt=function(){return!!this.d&&Vt(this.e/7)>this.d.length-2},Zt.isNaN=function(){return!this.s},Zt.isNegative=Zt.isNeg=function(){return this.s<0},Zt.isPositive=Zt.isPos=function(){return this.s>0},Zt.isZero=function(){return!!this.d&&0===this.d[0]},Zt.lessThan=Zt.lt=function(e){return this.cmp(e)<0},Zt.lessThanOrEqualTo=Zt.lte=function(e){return this.cmp(e)<1},Zt.logarithm=Zt.log=function(e){var t,n,r,i,s,a,o,l,c=this,d=c.constructor,u=d.precision,h=d.rounding;if(null==e)e=new d(10),t=!0;else{if(n=(e=new d(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new d(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=1!==i}if(Ft=!1,a=bn(c,o=u+5),r=t?cn(d,o+10):bn(e,o),nn((l=sn(a,r,o,1)).d,i=u,h))do{if(a=bn(c,o+=10),r=t?cn(d,o+10):bn(e,o),l=sn(a,r,o,1),!s){+en(l.d).slice(i+1,i+15)+1==1e14&&(l=an(l,u+1,0));break}}while(nn(l.d,i+=10,h));return Ft=!0,an(l,u,h)},Zt.minus=Zt.sub=function(e){var t,n,r,i,s,a,o,l,c,d,u,h,f=this,g=f.constructor;if(e=new g(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new g(e.d||f.s!==e.s?f:NaN):e=new g(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,h=e.d,o=g.precision,l=g.rounding,!c[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!c[0])return new g(3===l?-0:0);e=new g(f)}return Ft?an(e,o,l):e}if(n=Vt(e.e/7),d=Vt(f.e/7),c=c.slice(),s=d-n){for((u=s<0)?(t=c,s=-s,a=h.length):(t=h,n=d,a=c.length),s>(r=Math.max(Math.ceil(o/7),a)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((u=(r=c.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(c[r]!=h[r]){u=c[r]<h[r];break}s=0}for(u&&(t=c,c=h,h=t,e.s=-e.s),a=c.length,r=h.length-a;r>0;--r)c[a++]=0;for(r=h.length;r>s;){if(c[--r]<h[r]){for(i=r;i&&0===c[--i];)c[i]=Gt-1;--c[i],c[r]+=Gt}c[r]-=h[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=ln(c,n),Ft?an(e,o,l):e):new g(3===l?-0:0)},Zt.modulo=Zt.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?an(new r(n),r.precision,r.rounding):(Ft=!1,9==r.modulo?(t=sn(n,e.abs(),0,3,1)).s*=e.s:t=sn(n,e,0,r.modulo,1),t=t.times(e),Ft=!0,n.minus(t))},Zt.naturalExponential=Zt.exp=function(){return mn(this)},Zt.naturalLogarithm=Zt.ln=function(){return bn(this)},Zt.negated=Zt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,an(e)},Zt.plus=Zt.add=function(e){var t,n,r,i,s,a,o,l,c,d,u=this,h=u.constructor;if(e=new h(e),!u.d||!e.d)return u.s&&e.s?u.d||(e=new h(e.d||u.s===e.s?u:NaN)):e=new h(NaN),e;if(u.s!=e.s)return e.s=-e.s,u.minus(e);if(c=u.d,d=e.d,o=h.precision,l=h.rounding,!c[0]||!d[0])return d[0]||(e=new h(u)),Ft?an(e,o,l):e;if(s=Vt(u.e/7),r=Vt(e.e/7),c=c.slice(),i=s-r){for(i<0?(n=c,i=-i,a=d.length):(n=d,r=s,a=c.length),i>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=c.length)-(i=d.length)<0&&(i=a,n=d,d=c,c=n),t=0;i;)t=(c[--i]=c[i]+d[i]+t)/Gt|0,c[i]%=Gt;for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=ln(c,r),Ft?an(e,o,l):e},Zt.precision=Zt.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Bt+e);return n.d?(t=un(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},Zt.round=function(){var e=this,t=e.constructor;return an(new t(e),e.e+1,t.rounding)},Zt.sine=Zt.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:wn(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/_n(5,n)),t=wn(e,2,t,t);for(var i,s=new e(5),a=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(o))));return t}(r,kn(r,n)),r.precision=e,r.rounding=t,an(Pt>2?n.neg():n,e,t,!0)):new r(NaN)},Zt.squareRoot=Zt.sqrt=function(){var e,t,n,r,i,s,a=this,o=a.d,l=a.e,c=a.s,d=a.constructor;if(1!==c||!o||!o[0])return new d(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);for(Ft=!1,0==(c=Math.sqrt(+a))||c==1/0?(((t=en(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=Vt((l+1)/2)-(l<0||l%2),r=new d(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new d(c.toString()),n=(l=d.precision)+3;;)if(r=(s=r).plus(sn(a,s,n+2,1)).times(.5),en(s.d).slice(0,n)===(t=en(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(an(r,l+1,1),e=!r.times(r).eq(a));break}if(!i&&(an(s,l+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}return Ft=!0,an(r,l,d.rounding,e)},Zt.tangent=Zt.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=sn(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,an(2==Pt||4==Pt?n.neg():n,e,t,!0)):new r(NaN)},Zt.times=Zt.mul=function(e){var t,n,r,i,s,a,o,l,c,d=this,u=d.constructor,h=d.d,f=(e=new u(e)).d;if(e.s*=d.s,!h||!h[0]||!f||!f[0])return new u(!e.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*e.s:e.s/0);for(n=Vt(d.e/7)+Vt(e.e/7),(l=h.length)<(c=f.length)&&(s=h,h=f,f=s,a=l,l=c,c=a),s=[],r=a=l+c;r--;)s.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)o=s[i]+f[r]*h[i-r-1]+t,s[i--]=o%Gt|0,t=o/Gt|0;s[i]=(s[i]+t)%Gt|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=ln(s,n),Ft?an(e,u.precision,u.rounding):e},Zt.toBinary=function(e,t){return Sn(this,2,e,t)},Zt.toDecimalPlaces=Zt.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(tn(e,0,Mt),void 0===t?t=r.rounding:tn(t,0,8),an(n,e+n.e+1,t))},Zt.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=on(r,!0):(tn(e,0,Mt),void 0===t?t=i.rounding:tn(t,0,8),n=on(r=an(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},Zt.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=on(i):(tn(e,0,Mt),void 0===t?t=s.rounding:tn(t,0,8),n=on(r=an(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},Zt.toFraction=function(e){var t,n,r,i,s,a,o,l,c,d,u,h,f=this,g=f.d,p=f.constructor;if(!g)return new p(f);if(c=n=new p(1),r=l=new p(0),a=(s=(t=new p(r)).e=un(g)-f.e-1)%7,t.d[0]=qt(10,a<0?7+a:a),null==e)e=s>0?t:c;else{if(!(o=new p(e)).isInt()||o.lt(c))throw Error(Bt+o);e=o.gt(t)?s>0?t:c:o}for(Ft=!1,o=new p(en(g)),d=p.precision,p.precision=s=7*g.length*2;u=sn(o,t,0,1,1),1!=(i=n.plus(u.times(r))).cmp(e);)n=r,r=i,i=c,c=l.plus(u.times(i)),l=i,i=t,t=o.minus(u.times(i)),o=i;return i=sn(e.minus(n),r,0,1,1),l=l.plus(i.times(c)),n=n.plus(i.times(r)),l.s=c.s=f.s,h=sn(c,r,s,1).minus(f).abs().cmp(sn(l,n,s,1).minus(f).abs())<1?[c,r]:[l,n],p.precision=d,Ft=!0,h},Zt.toHexadecimal=Zt.toHex=function(e,t){return Sn(this,16,e,t)},Zt.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:tn(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Ft=!1,n=sn(n,e,0,t,1).times(e),Ft=!0,an(n)):(e.s=n.s,n=e),n},Zt.toNumber=function(){return+this},Zt.toOctal=function(e,t){return Sn(this,8,e,t)},Zt.toPower=Zt.pow=function(e){var t,n,r,i,s,a,o=this,l=o.constructor,c=+(e=new l(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new l(qt(+o,c));if((o=new l(o)).eq(1))return o;if(r=l.precision,s=l.rounding,e.eq(1))return an(o,r,s);if((t=Vt(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=fn(l,o,n,r),e.s<0?new l(1).div(i):an(i,r,s);if((a=o.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(t=0!=(n=qt(+o,c))&&isFinite(n)?new l(n+"").e:Vt(c*(Math.log("0."+en(o.d))/Math.LN10+o.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(Ft=!1,l.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=mn(e.times(bn(o,r+n)),r)).d&&nn((i=an(i,r+5,1)).d,r,s)&&(t=r+10,+en((i=an(mn(e.times(bn(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=an(i,r+1,0))),i.s=a,Ft=!0,l.rounding=s,an(i,r,s))},Zt.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=on(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(tn(e,1,Mt),void 0===t?t=i.rounding:tn(t,0,8),n=on(r=an(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},Zt.toSignificantDigits=Zt.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(tn(e,1,Mt),void 0===t?t=n.rounding:tn(t,0,8)),an(new n(this),e,t)},Zt.toString=function(){var e=this,t=e.constructor,n=on(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Zt.truncated=Zt.trunc=function(){return an(new this.constructor(this),this.e+1,1)},Zt.valueOf=Zt.toJSON=function(){var e=this,t=e.constructor,n=on(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var sn=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,a,o,l){var c,d,u,h,f,g,p,m,b,y,x,v,w,_,k,S,j,N,E,C,T=r.constructor,A=r.s==i.s?1:-1,P=r.d,O=i.d;if(!P||!P[0]||!O||!O[0])return new T(r.s&&i.s&&(P?!O||P[0]!=O[0]:O)?P&&0==P[0]||!O?0*A:A/0:NaN);for(l?(f=1,d=r.e-i.e):(l=Gt,f=7,d=Vt(r.e/f)-Vt(i.e/f)),E=O.length,j=P.length,y=(b=new T(A)).d=[],u=0;O[u]==(P[u]||0);u++);if(O[u]>(P[u]||0)&&d--,null==s?(_=s=T.precision,a=T.rounding):_=o?s+(r.e-i.e)+1:s,_<0)y.push(1),g=!0;else{if(_=_/f+2|0,u=0,1==E){for(h=0,O=O[0],_++;(u<j||h)&&_--;u++)k=h*l+(P[u]||0),y[u]=k/O|0,h=k%O|0;g=h||u<j}else{for((h=l/(O[0]+1)|0)>1&&(O=e(O,h,l),P=e(P,h,l),E=O.length,j=P.length),S=E,v=(x=P.slice(0,E)).length;v<E;)x[v++]=0;(C=O.slice()).unshift(0),N=O[0],O[1]>=l/2&&++N;do{h=0,(c=t(O,x,E,v))<0?(w=x[0],E!=v&&(w=w*l+(x[1]||0)),(h=w/N|0)>1?(h>=l&&(h=l-1),1==(c=t(p=e(O,h,l),x,m=p.length,v=x.length))&&(h--,n(p,E<m?C:O,m,l))):(0==h&&(c=h=1),p=O.slice()),(m=p.length)<v&&p.unshift(0),n(x,p,v,l),-1==c&&(c=t(O,x,E,v=x.length))<1&&(h++,n(x,E<v?C:O,v,l)),v=x.length):0===c&&(h++,x=[0]),y[u++]=h,c&&x[0]?x[v++]=P[S]||0:(x=[P[S]],v=1)}while((S++<j||void 0!==x[0])&&_--);g=void 0!==x[0]}y[0]||y.shift()}if(1==f)b.e=d,At=g;else{for(u=1,h=y[0];h>=10;h/=10)u++;b.e=u+d*f-1,an(b,o?s+b.e+1:s,a,g)}return b}}();function an(e,t,n,r){var i,s,a,o,l,c,d,u,h,f=e.constructor;e:if(null!=t){if(!(u=e.d))return e;for(i=1,o=u[0];o>=10;o/=10)i++;if((s=t-i)<0)s+=7,a=t,l=(d=u[h=0])/qt(10,i-a-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(o=u.length)){if(!r)break e;for(;o++<=h;)u.push(0);d=l=0,i=1,a=(s%=7)-7+1}else{for(d=o=u[h],i=1;o>=10;o/=10)i++;l=(a=(s%=7)-7+i)<0?0:d/qt(10,i-a-1)%10|0}if(r=r||t<0||void 0!==u[h+1]||(a<0?d:d%qt(10,i-a-1)),c=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(s>0?a>0?d/qt(10,i-a):0:u[h-1])%10&1||n==(e.s<0?8:7)),t<1||!u[0])return u.length=0,c?(t-=e.e+1,u[0]=qt(10,(7-t%7)%7),e.e=-t||0):u[0]=e.e=0,e;if(0==s?(u.length=h,o=1,h--):(u.length=h+1,o=qt(10,7-s),u[h]=a>0?(d/qt(10,i-a)%qt(10,a)|0)*o:0),c)for(;;){if(0==h){for(s=1,a=u[0];a>=10;a/=10)s++;for(a=u[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,u[0]==Gt&&(u[0]=1));break}if(u[h]+=o,u[h]!=Gt)break;u[h--]=0,o=1}for(s=u.length;0===u[--s];)u.pop()}return Ft&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function on(e,t,n){if(!e.isFinite())return yn(e);var r,i=e.e,s=en(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+hn(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+hn(-i-1)+s,n&&(r=n-a)>0&&(s+=hn(r))):i>=a?(s+=hn(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+hn(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=hn(r))),s}function ln(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function cn(e,t,n){if(t>Qt)throw Ft=!0,n&&(e.precision=n),Error(Ut);return an(new e(Lt),t,1,!0)}function dn(e,t,n){if(t>Xt)throw Error(Ut);return an(new e(It),t,n,!0)}function un(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function hn(e){for(var t="";e--;)t+="0";return t}function fn(e,t,n,r){var i,s=new e(1),a=Math.ceil(r/7+4);for(Ft=!1;;){if(n%2&&jn((s=s.times(t)).d,a)&&(i=!0),0===(n=Vt(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}jn((t=t.times(t)).d,a)}return Ft=!0,s}function gn(e){return 1&e.d[e.d.length-1]}function pn(e,t,n){for(var r,i,s=new e(t[0]),a=0;++a<t.length;){if(!(i=new e(t[a])).s){s=i;break}((r=s.cmp(i))===n||0===r&&s.s===n)&&(s=i)}return s}function mn(e,t){var n,r,i,s,a,o,l,c=0,d=0,u=0,h=e.constructor,f=h.rounding,g=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Ft=!1,l=g):l=t,o=new h(.03125);e.e>-2;)e=e.times(o),u+=5;for(l+=r=Math.log(qt(2,u))/Math.LN10*2+5|0,n=s=a=new h(1),h.precision=l;;){if(s=an(s.times(e),l,1),n=n.times(++d),en((o=a.plus(sn(s,n,l,1))).d).slice(0,l)===en(a.d).slice(0,l)){for(i=u;i--;)a=an(a.times(a),l,1);if(null!=t)return h.precision=g,a;if(!(c<3&&nn(a.d,l-r,f,c)))return an(a,h.precision=g,f,Ft=!0);h.precision=l+=10,n=s=o=new h(1),d=0,c++}a=o}}function bn(e,t){var n,r,i,s,a,o,l,c,d,u,h,f=1,g=e,p=g.d,m=g.constructor,b=m.rounding,y=m.precision;if(g.s<0||!p||!p[0]||!g.e&&1==p[0]&&1==p.length)return new m(p&&!p[0]?-1/0:1!=g.s?NaN:p?0:g);if(null==t?(Ft=!1,d=y):d=t,m.precision=d+=10,r=(n=en(p)).charAt(0),!(Math.abs(s=g.e)<15e14))return c=cn(m,d+2,y).times(s+""),g=bn(new m(r+"."+n.slice(1)),d-10).plus(c),m.precision=y,null==t?an(g,y,b,Ft=!0):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=en((g=g.times(e)).d)).charAt(0),f++;for(s=g.e,r>1?(g=new m("0."+n),s++):g=new m(r+"."+n.slice(1)),u=g,l=a=g=sn(g.minus(1),g.plus(1),d,1),h=an(g.times(g),d,1),i=3;;){if(a=an(a.times(h),d,1),en((c=l.plus(sn(a,new m(i),d,1))).d).slice(0,d)===en(l.d).slice(0,d)){if(l=l.times(2),0!==s&&(l=l.plus(cn(m,d+2,y).times(s+""))),l=sn(l,new m(f),d,1),null!=t)return m.precision=y,l;if(!nn(l.d,d-10,b,o))return an(l,m.precision=y,b,Ft=!0);m.precision=d+=10,c=a=g=sn(u.minus(1),u.plus(1),d,1),h=an(g.times(g),d,1),i=o=1}l=c,i+=2}}function yn(e){return String(e.s*e.s/0)}function xn(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Ft&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function vn(e,t){var n,r,i,s,a,o,l,c,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Kt.test(t))return xn(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Yt.test(t))n=16,t=t.toLowerCase();else if(Jt.test(t))n=2;else{if(!$t.test(t))throw Error(Bt+t);n=8}for((s=t.search(/p/i))>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),a=(s=t.indexOf("."))>=0,r=e.constructor,a&&(s=(o=(t=t.replace(".","")).length)-s,i=fn(r,new r(n),s,2*s)),s=d=(c=rn(t,n,Gt)).length-1;0===c[s];--s)c.pop();return s<0?new r(0*e.s):(e.e=ln(c,d),e.d=c,Ft=!1,a&&(e=sn(e,i,4*o)),l&&(e=e.times(Math.abs(l)<54?qt(2,l):hr.pow(2,l))),Ft=!0,e)}function wn(e,t,n,r,i){var s,a,o,l,c=e.precision,d=Math.ceil(c/7);for(Ft=!1,l=n.times(n),o=new e(r);;){if(a=sn(o.times(l),new e(t++*t++),c,1),o=i?r.plus(a):r.minus(a),r=sn(a.times(l),new e(t++*t++),c,1),void 0!==(a=o.plus(r)).d[d]){for(s=d;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return Ft=!0,a.d.length=d+1,a}function _n(e,t){for(var n=e;--t;)n*=e;return n}function kn(e,t){var n,r=t.s<0,i=dn(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return Pt=r?4:1,t;if((n=t.divToInt(i)).isZero())Pt=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return Pt=gn(n)?r?2:3:r?4:1,t;Pt=gn(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Sn(e,t,n,r){var i,s,a,o,l,c,d,u,h,f=e.constructor,g=void 0!==n;if(g?(tn(n,1,Mt),void 0===r?r=f.rounding:tn(r,0,8)):(n=f.precision,r=f.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(a=(d=on(e)).indexOf("."))>=0&&(d=d.replace(".",""),(h=new f(1)).e=d.length-a,h.d=rn(on(h),10,i),h.e=h.d.length),s=l=(u=rn(d,10,i)).length;0==u[--l];)u.pop();if(u[0]){if(a<0?s--:((e=new f(e)).d=u,e.e=s,u=(e=sn(e,h,n,r,0,i)).d,s=e.e,c=At),a=u[n],o=i/2,c=c||void 0!==u[n+1],c=r<4?(void 0!==a||c)&&(0===r||r===(e.s<0?3:2)):a>o||a===o&&(4===r||c||6===r&&1&u[n-1]||r===(e.s<0?8:7)),u.length=n,c)for(;++u[--n]>i-1;)u[n]=0,n||(++s,u.unshift(1));for(l=u.length;!u[l-1];--l);for(a=0,d="";a<l;a++)d+=Dt.charAt(u[a]);if(g){if(l>1)if(16==t||8==t){for(a=16==t?4:3,--l;l%a;l++)d+="0";for(l=(u=rn(d,i,t)).length;!u[l-1];--l);for(a=1,d="1.";a<l;a++)d+=Dt.charAt(u[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>l)for(s-=l;s--;)d+="0";else s<l&&(d=d.slice(0,s)+"."+d.slice(s))}else d=g?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=yn(e);return e.s<0?"-"+d:d}function jn(e,t){if(e.length>t)return e.length=t,!0}function Nn(e){return new this(e).abs()}function En(e){return new this(e).acos()}function Cn(e){return new this(e).acosh()}function Tn(e,t){return new this(e).plus(t)}function An(e){return new this(e).asin()}function Pn(e){return new this(e).asinh()}function On(e){return new this(e).atan()}function Mn(e){return new this(e).atanh()}function Dn(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?dn(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=dn(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(sn(e,t,s,1)),t=dn(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(sn(e,t,s,1)):(n=dn(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Ln(e){return new this(e).cbrt()}function In(e){return an(e=new this(e),e.e+1,2)}function Rn(e,t,n){return new this(e).clamp(t,n)}function Fn(e){if(!e||"object"!==typeof e)throw Error(zt+"Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,Mt,"rounding",0,8,"toExpNeg",-Ot,0,"toExpPos",0,Ot,"maxE",0,Ot,"minE",-Ot,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=Rt[n]),void 0!==(r=e[n])){if(!(Vt(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(Bt+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=Rt[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(Bt+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Wt);this[n]=!0}else this[n]=!1}return this}function zn(e){return new this(e).cos()}function Bn(e){return new this(e).cosh()}function Un(e,t){return new this(e).div(t)}function Wn(e){return new this(e).exp()}function Hn(e){return an(e=new this(e),e.e+1,3)}function Vn(){var e,t,n=new this(0);for(Ft=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Ft=!0,new this(1/0);n=t}return Ft=!0,n.sqrt()}function qn(e){return e instanceof hr||e&&e.toStringTag===Ht||!1}function Jn(e){return new this(e).ln()}function Yn(e,t){return new this(e).log(t)}function $n(e){return new this(e).log(2)}function Kn(e){return new this(e).log(10)}function Gn(){return pn(this,arguments,-1)}function Qn(){return pn(this,arguments,1)}function Xn(e,t){return new this(e).mod(t)}function Zn(e,t){return new this(e).mul(t)}function er(e,t){return new this(e).pow(t)}function tr(e){var t,n,r,i,s=0,a=new this(1),o=[];if(void 0===e?e=this.precision:tn(e,1,Mt),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Wt);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(i%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(e%=7,(r=o[--s])&&e&&(i=qt(10,7-e),o[s]=(r/i|0)*i);0===o[s];s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=o,a}function nr(e){return an(e=new this(e),e.e+1,this.rounding)}function rr(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function ir(e){return new this(e).sin()}function sr(e){return new this(e).sinh()}function ar(e){return new this(e).sqrt()}function or(e,t){return new this(e).sub(t)}function lr(){var e=0,t=arguments,n=new this(t[e]);for(Ft=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Ft=!0,an(n,this.precision,this.rounding)}function cr(e){return new this(e).tan()}function dr(e){return new this(e).tanh()}function ur(e){return an(e=new this(e),e.e+1,1)}Zt[Symbol.for("nodejs.util.inspect.custom")]=Zt.toString,Zt[Symbol.toStringTag]="Decimal";var hr=Zt.constructor=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,qn(e))return i.s=e.s,void(Ft?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(Ft?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):xn(i,e.toString())}if("string"===r)return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),Kt.test(e)?xn(i,e):vn(i,e);if("bigint"===r)return e<0?(e=-e,i.s=-1):i.s=1,xn(i,e.toString());throw Error(Bt+e)}if(s.prototype=Zt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Fn,s.clone=e,s.isDecimal=qn,s.abs=Nn,s.acos=En,s.acosh=Cn,s.add=Tn,s.asin=An,s.asinh=Pn,s.atan=On,s.atanh=Mn,s.atan2=Dn,s.cbrt=Ln,s.ceil=In,s.clamp=Rn,s.cos=zn,s.cosh=Bn,s.div=Un,s.exp=Wn,s.floor=Hn,s.hypot=Vn,s.ln=Jn,s.log=Yn,s.log10=Kn,s.log2=$n,s.max=Gn,s.min=Qn,s.mod=Xn,s.mul=Zn,s.pow=er,s.random=tr,s.round=nr,s.sign=rr,s.sin=ir,s.sinh=sr,s.sqrt=ar,s.sub=or,s.sum=lr,s.tan=cr,s.tanh=dr,s.trunc=ur,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(Rt);Lt=new hr(Lt),It=new hr(It);const fr=hr;fr.config({precision:10,rounding:fr.ROUND_HALF_UP,toExpNeg:-9,toExpPos:21,minE:-9,maxE:21});class gr{constructor(e){this.user=e,this.pendingOperations=[]}static addToBalance(e,t){const n=new fr(e||0),r=new fr(t||0);return n.plus(r).toNumber()}static subtractFromBalance(e,t){const n=new fr(e||0),r=new fr(t||0);return n.minus(r).toNumber()}static calculateAdjustment(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fr(e||0);return n?t?r.negated().toNumber():r.toNumber():t?r.toNumber():r.negated().toNumber()}async validateWalletBalance(e,t){var n;let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||null===(n=this.user)||void 0===n||!n.id)throw new Error("Invalid wallet ID or user not authenticated");const i=(await Ke.qF.getAll(this.user.id)).find((t=>t.id===e));if(!i)throw new Error("Wallet with ID ".concat(e," not found"));if(r){const e=new fr(i.balance||0),n=new fr(t||0);if(e.lt(n))throw new Error("Insufficient balance in wallet ".concat(i.name,". Current: ").concat(e.toFixed(2),", Required: ").concat(n.toFixed(2)))}return i}async updateWalletBalance(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=(0,Me.A)((0,Me.A)({},e),{},{balance:new fr(t).toNumber()});let i;for(let a=1;a<=n;a++)try{return await Ke.qF.update(r,this.user.id),console.log("Wallet balance updated (attempt ".concat(a,"):"),{walletId:e.id,walletName:e.name,oldBalance:new fr(e.balance).toFixed(2),newBalance:new fr(t).toFixed(2),adjustment:new fr(t).minus(e.balance).toFixed(2)}),r}catch(s){i=s,console.warn("Wallet update attempt ".concat(a," failed:"),s),a<n&&await new Promise((e=>setTimeout(e,1e3*a)))}throw new Error("Failed to update wallet after ".concat(n," attempts: ").concat(i.message))}async addExpenseWithWalletUpdate(e){var t;if(null===(t=this.user)||void 0===t||!t.id)throw new Error("User not authenticated");const r=!e.is_income;await this.validateWalletBalance(e.wallet_id,e.amount,r);const i=[];try{const{expenseDB:t}=await Promise.resolve().then(n.bind(n,61)),r=await t.add(e,this.user.id);i.push((()=>t.delete(r.id,this.user.id)));const s=(await Ke.qF.getAll(this.user.id)).find((t=>t.id===e.wallet_id));if(!s)throw new Error("Wallet with ID ".concat(e.wallet_id," not found"));const a=gr.calculateAdjustment(e.amount,e.is_income),o=gr.addToBalance(s.balance,a),l=await this.updateWalletBalance(s,o);return i.push((()=>this.updateWalletBalance(l,s.balance))),{expense:r,wallet:l}}catch(s){console.error("Error in addExpenseWithWalletUpdate, rolling back:",s);for(let e=i.length-1;e>=0;e--)try{await i[e]()}catch(a){console.error("Rollback operation failed:",a)}throw s}}async updateExpenseWithWalletUpdate(e){var t;if(null===(t=this.user)||void 0===t||!t.id)throw new Error("User not authenticated");const{data:r,error:i}=await Oe.A.from("expenses").select("*").eq("id",e.id).eq("user_id",this.user.id).single();if(i||!r)throw new Error("Original expense not found or unauthorized");const s=[],a=new Map;try{const t=await Ke.qF.getAll(this.user.id),i=t.find((e=>e.id===r.wallet_id)),o=t.find((t=>t.id===e.wallet_id));if(i){if(!o)throw new Error("New wallet ".concat(e.wallet_id," not found"));if(r.wallet_id===e.wallet_id){const t=gr.calculateAdjustment(r.amount,r.is_income,!0),n=gr.calculateAdjustment(e.amount,e.is_income),s=new fr(t).plus(n).toNumber(),o=gr.addToBalance(i.balance,s);if(!e.is_income&&new fr(o).lt(0))throw new Error("Insufficient balance for this operation");a.set(i.id,{wallet:i,newBalance:o,oldBalance:i.balance})}else{const t=gr.calculateAdjustment(r.amount,r.is_income,!0),n=gr.addToBalance(i.balance,t);a.set(i.id,{wallet:i,newBalance:n,oldBalance:i.balance});const s=gr.calculateAdjustment(e.amount,e.is_income),l=gr.addToBalance(o.balance,s);if(!e.is_income&&new fr(l).lt(0))throw new Error("Insufficient balance in destination wallet");a.set(o.id,{wallet:o,newBalance:l,oldBalance:o.balance})}}else{if(console.warn("Original wallet ".concat(r.wallet_id," not found. This may be a deleted wallet. Skipping wallet balance restoration.")),!o)throw new Error("New wallet ".concat(e.wallet_id," not found"));const t=gr.calculateAdjustment(e.amount,e.is_income),n=gr.addToBalance(o.balance,t);if(!e.is_income&&new fr(n).lt(0))throw new Error("Insufficient balance in destination wallet");a.set(o.id,{wallet:o,newBalance:n,oldBalance:o.balance})}for(const[e,n]of a){const e=await this.updateWalletBalance(n.wallet,n.newBalance);s.push((()=>this.updateWalletBalance(e,n.oldBalance)))}const{expenseDB:l}=await Promise.resolve().then(n.bind(n,61));return await l.update(e,this.user.id),s.push((()=>l.update(r,this.user.id))),{expense:e,walletUpdates:Array.from(a.values())}}catch(o){console.error("Error in updateExpenseWithWalletUpdate, rolling back:",o);for(let e=s.length-1;e>=0;e--)try{await s[e]()}catch(l){console.error("Rollback operation failed:",l)}throw o}}async deleteExpenseWithWalletUpdate(e){var t;if(null===(t=this.user)||void 0===t||!t.id)throw new Error("User not authenticated");const{data:r}=await Oe.A.from("expenses").select("*").eq("id",e).eq("user_id",this.user.id).single();if(!r)throw new Error("Expense not found");const i=[];try{const t=(await Ke.qF.getAll(this.user.id)).find((e=>e.id===r.wallet_id));if(t){const e=gr.calculateAdjustment(r.amount,r.is_income,!0),n=gr.addToBalance(t.balance,e),s=await this.updateWalletBalance(t,n);i.push((()=>this.updateWalletBalance(s,t.balance)))}const{expenseDB:s}=await Promise.resolve().then(n.bind(n,61));return await s.delete(e,this.user.id),i.push((()=>s.add(r,this.user.id))),{deletedExpense:r,wallet:t}}catch(s){console.error("Error in deleteExpenseWithWalletUpdate, rolling back:",s);for(let e=i.length-1;e>=0;e--)try{await i[e]()}catch(a){console.error("Rollback operation failed:",a)}throw s}}async executeWalletTransfer(e){var t;if(null===(t=this.user)||void 0===t||!t.id)throw new Error("User not authenticated");const{fromWallet:r,toWallet:i,amount:s}=e;if(!r||!i||!s)throw new Error("Invalid transfer data: missing wallet IDs or amount");if(r===i)throw new Error("Cannot transfer to the same wallet");const a=await this.validateWalletBalance(r,s,!0),o=await this.validateWalletBalance(i,0,!1),l=[];try{const t=gr.subtractFromBalance(a.balance,s),r=gr.addToBalance(o.balance,s),i=await this.updateWalletBalance(a,t);l.push((()=>this.updateWalletBalance(i,a.balance)));const c=await this.updateWalletBalance(o,r);l.push((()=>this.updateWalletBalance(c,o.balance)));const{transferDB:d}=await Promise.resolve().then(n.bind(n,61)),u=(0,Me.A)((0,Me.A)({},e),{},{id:e.id||Date.now(),fromWalletName:a.name,toWalletName:o.name,amount:new fr(s).toNumber(),timestamp:(new Date).toISOString()}),h=await d.add(u,this.user.id);return l.push((()=>d.delete(h.id,this.user.id))),{transfer:h,sourceWallet:i,destWallet:c}}catch(c){console.error("Error in executeWalletTransfer, rolling back:",c);for(let e=l.length-1;e>=0;e--)try{await l[e]()}catch(d){console.error("Rollback operation failed:",d)}throw c}}async updateWalletTransfer(e,t){var r;if(null===(r=this.user)||void 0===r||!r.id)throw new Error("User not authenticated");const{transferDB:i}=await Promise.resolve().then(n.bind(n,61)),s=await i.getById(e,this.user.id);if(!s)throw new Error("Original transfer not found");const a=[];try{const n=await Ke.qF.getAll(this.user.id),r=n.find((e=>e.id===s.fromWallet)),o=n.find((e=>e.id===s.toWallet));if(!r||!o)throw new Error("Original transfer wallets not found");const l=gr.addToBalance(r.balance,s.amount),c=gr.subtractFromBalance(o.balance,s.amount),d=n.find((e=>e.id===t.fromWallet)),u=n.find((e=>e.id===t.toWallet));if(!d||!u)throw new Error("New transfer wallets not found");let h,f;if(h=s.fromWallet===t.fromWallet?l:d.balance,f=s.toWallet===t.toWallet?c:u.balance,h=gr.subtractFromBalance(h,t.amount),f=gr.addToBalance(f,t.amount),new fr(h).lt(0))throw new Error("Insufficient balance in source wallet for this transfer");const g=[];s.fromWallet!==t.fromWallet&&g.push({wallet:r,newBalance:l,oldBalance:r.balance}),s.toWallet!==t.toWallet&&g.push({wallet:o,newBalance:c,oldBalance:o.balance}),g.push({wallet:d,newBalance:h,oldBalance:d.balance}),g.push({wallet:u,newBalance:f,oldBalance:u.balance});for(const e of g){const t=await this.updateWalletBalance(e.wallet,e.newBalance);a.push((()=>this.updateWalletBalance(t,e.oldBalance)))}const p=(0,Me.A)((0,Me.A)({},t),{},{id:e,fromWalletName:d.name,toWalletName:u.name,amount:new fr(t.amount).toNumber(),timestamp:(new Date).toISOString()});return await i.update(p,this.user.id),a.push((()=>i.update(s,this.user.id))),{transfer:p,walletUpdates:g}}catch(o){console.error("Error in updateWalletTransfer, rolling back:",o);for(let e=a.length-1;e>=0;e--)try{await a[e]()}catch(l){console.error("Rollback operation failed:",l)}throw o}}async deleteWalletTransfer(e){var t;if(null===(t=this.user)||void 0===t||!t.id)throw new Error("User not authenticated");const{transferDB:r}=await Promise.resolve().then(n.bind(n,61)),i=await r.getById(e,this.user.id);if(!i)throw new Error("Transfer not found");const s=[];try{const t=await Ke.qF.getAll(this.user.id),n=t.find((e=>e.id===i.fromWallet)),a=t.find((e=>e.id===i.toWallet));if(!n||!a)throw new Error("One or both wallets involved in this transfer no longer exist");const o=gr.addToBalance(n.balance,i.amount),l=gr.subtractFromBalance(a.balance,i.amount),c=await this.updateWalletBalance(n,o);s.push((()=>this.updateWalletBalance(c,n.balance)));const d=await this.updateWalletBalance(a,l);return s.push((()=>this.updateWalletBalance(d,a.balance))),await r.delete(e,this.user.id),s.push((()=>r.create(i,this.user.id))),{deletedTransfer:i,sourceWallet:c,destWallet:d,message:"Transfer deleted: Added ".concat(i.amount," back to ").concat(n.name,", subtracted ").concat(i.amount," from ").concat(a.name)}}catch(a){console.error("Error in deleteWalletTransfer, rolling back:",a);for(let e=s.length-1;e>=0;e--)try{await s[e]()}catch(o){console.error("Rollback operation failed:",o)}throw a}}}const pr=e=>new gr(e),mr={addToBalance:gr.addToBalance,subtractFromBalance:gr.subtractFromBalance,calculateAdjustment:gr.calculateAdjustment,formatBalance:e=>new fr(e||0).toFixed(2),hasSufficientBalance:(e,t)=>new fr(e||0).gte(new fr(t||0)),calculatePercentageChange:(e,t)=>{const n=new fr(e||0),r=new fr(t||0);return n.isZero()?r.isZero()?0:100:r.minus(n).div(n).mul(100).toNumber()}};const br=function(e){let{expenses:t=[],total:n=0}=e;const r=t.filter((e=>e.is_income)).reduce(((e,t)=>mr.addToBalance(e,t.amount)),0),i=t.filter((e=>!e.is_income)).reduce(((e,t)=>mr.addToBalance(e,t.amount)),0),s=mr.subtractFromBalance(r,i),a=t.filter((e=>!e.is_income)).map((e=>parseFloat(e.amount||0))),o=a.length>0?Math.max(...a):0,l=t.filter((e=>e.is_income)).map((e=>parseFloat(e.amount||0))),c=l.length>0?Math.max(...l):0,d=(t.length>0&&(parseFloat(n),t.length),e=>mr.formatBalance(e));return(0,nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Summary"}),(0,nt.jsxs)("div",{className:"space-y-2",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("span",{className:"text-gray-400",children:"Total Income:"}),(0,nt.jsxs)("span",{className:"text-green-400",children:["Rp ",d(r)]})]}),(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("span",{className:"text-gray-400",children:"Total Expenses:"}),(0,nt.jsxs)("span",{className:"text-red-400",children:["Rp ",d(i)]})]}),(0,nt.jsx)("div",{className:"border-t border-gray-700 my-2 pt-2",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center font-medium",children:[(0,nt.jsx)("span",{className:"text-gray-300",children:"Net Cash Flow:"}),(0,nt.jsxs)("span",{className:s>=0?"text-green-400":"text-red-400",children:["Rp ",d(Math.abs(s)),s>=0?" \u2191":" \u2193"]})]})})]})]}),(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Highest Values"}),(0,nt.jsxs)("div",{className:"space-y-2",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("span",{className:"text-gray-400",children:"Highest Income:"}),(0,nt.jsxs)("span",{className:"text-green-400",children:["Rp ",d(c)]})]}),(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("span",{className:"text-gray-400",children:"Highest Expense:"}),(0,nt.jsxs)("span",{className:"text-red-400",children:["Rp ",d(o)]})]})]})]}),(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Transaction Count"}),(0,nt.jsxs)("div",{className:"text-gray-400",children:[t.filter((e=>e.is_income)).length," income / ",t.filter((e=>!e.is_income)).length," expense"]})]})]})};var yr=n(705);function xr(e){return e+.5|0}const vr=(e,t,n)=>Math.max(Math.min(e,n),t);function wr(e){return vr(xr(2.55*e),0,255)}function _r(e){return vr(xr(255*e),0,255)}function kr(e){return vr(xr(e/2.55)/100,0,1)}function Sr(e){return vr(xr(100*e),0,100)}const jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nr=[..."0123456789ABCDEF"],Er=e=>Nr[15&e],Cr=e=>Nr[(240&e)>>4]+Nr[15&e],Tr=e=>(240&e)>>4===(15&e);function Ar(e){var t=(e=>Tr(e.r)&&Tr(e.g)&&Tr(e.b)&&Tr(e.a))(e)?Er:Cr;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Pr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Or(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function Mr(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Dr(e,t,n){const r=Or(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Lr(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function Ir(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(_r)}function Rr(e,t,n){return Ir(Or,e,t,n)}function Fr(e){return(e%360+360)%360}function zr(e){const t=Pr.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?wr(+t[5]):_r(+t[5]));const i=Fr(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Ir(Dr,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return Ir(Mr,e,t,n)}(i,s,a):Rr(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const Br={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ur={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Wr;function Hr(e){Wr||(Wr=function(){const e={},t=Object.keys(Ur),n=Object.keys(Br);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,Br[s]);s=parseInt(Ur[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),Wr.transparent=[0,0,0,0]);const t=Wr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Vr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const qr=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Jr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Yr(e,t,n){if(e){let r=Lr(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Rr(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function $r(e,t){return e?Object.assign(t||{},e):e}function Kr(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=_r(e[3]))):(t=$r(e,{r:0,g:0,b:0,a:1})).a=_r(t.a),t}function Gr(e){return"r"===e.charAt(0)?function(e){const t=Vr.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?wr(e):vr(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?wr(n):vr(n,0,255)),r=255&(t[4]?wr(r):vr(r,0,255)),i=255&(t[6]?wr(i):vr(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):zr(e)}class Qr{constructor(e){if(e instanceof Qr)return e;const t=typeof e;let n;"object"===t?n=Kr(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*jr[e[1]],g:255&17*jr[e[2]],b:255&17*jr[e[3]],a:5===n?17*jr[e[4]]:255}:7!==n&&9!==n||(t={r:jr[e[1]]<<4|jr[e[2]],g:jr[e[3]]<<4|jr[e[4]],b:jr[e[5]]<<4|jr[e[6]],a:9===n?jr[e[7]]<<4|jr[e[8]]:255})),t}(e)||Hr(e)||Gr(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=$r(this._rgb);return e&&(e.a=kr(e.a)),e}set rgb(e){this._rgb=Kr(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(kr(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Ar(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Lr(e),n=t[0],r=Sr(t[1]),i=Sr(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(kr(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=Jr(kr(e.r)),i=Jr(kr(e.g)),s=Jr(kr(e.b));return{r:_r(qr(r+n*(Jr(kr(t.r))-r))),g:_r(qr(i+n*(Jr(kr(t.g))-i))),b:_r(qr(s+n*(Jr(kr(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Qr(this.rgb)}alpha(e){return this._rgb.a=_r(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=xr(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Yr(this._rgb,2,e),this}darken(e){return Yr(this._rgb,2,-e),this}saturate(e){return Yr(this._rgb,1,e),this}desaturate(e){return Yr(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Lr(e);n[0]=Fr(n[0]+t),n=Rr(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Xr(){}const Zr=(()=>{let e=0;return()=>e++})();function ei(e){return null===e||void 0===e}function ti(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ni(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ri(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function ii(e,t){return ri(e)?e:t}function si(e,t){return"undefined"===typeof e?t:e}const ai=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function oi(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function li(e,t,n,r){let i,s,a;if(ti(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(ni(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function ci(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function di(e){if(ti(e))return e.map(di);if(ni(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=di(e[n[i]]);return t}return e}function ui(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function hi(e,t,n,r){if(!ui(e))return;const i=t[e],s=n[e];ni(i)&&ni(s)?fi(i,s,r):t[e]=di(s)}function fi(e,t,n){const r=ti(t)?t:[t],i=r.length;if(!ni(e))return e;const s=(n=n||{}).merger||hi;let a;for(let o=0;o<i;++o){if(a=r[o],!ni(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function gi(e,t){return fi(e,t,{merger:pi})}function pi(e,t,n){if(!ui(e))return;const r=t[e],i=n[e];ni(r)&&ni(i)?gi(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=di(i))}const mi={"":e=>e,x:e=>e.x,y:e=>e.y};function bi(e,t){const n=mi[t]||(mi[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function yi(e){return e.charAt(0).toUpperCase()+e.slice(1)}const xi=e=>"undefined"!==typeof e,vi=e=>"function"===typeof e,wi=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const _i=Math.PI,ki=2*_i,Si=ki+_i,ji=Number.POSITIVE_INFINITY,Ni=_i/180,Ei=_i/2,Ci=_i/4,Ti=2*_i/3,Ai=Math.log10,Pi=Math.sign;function Oi(e,t,n){return Math.abs(e-t)<n}function Mi(e){const t=Math.round(e);e=Oi(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ai(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Di(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Li(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ii(e){return e*(_i/180)}function Ri(e){return e*(180/_i)}function Fi(e){if(!ri(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function zi(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*_i&&(s+=ki),{angle:s,distance:i}}function Bi(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ui(e,t){return(e-t+Si)%ki-_i}function Wi(e){return(e%ki+ki)%ki}function Hi(e,t,n,r){const i=Wi(e),s=Wi(t),a=Wi(n),o=Wi(s-i),l=Wi(a-i),c=Wi(i-s),d=Wi(i-a);return i===s||i===a||r&&s===a||o>l&&c<d}function Vi(e,t,n){return Math.max(t,Math.min(n,e))}function qi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Ji(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Yi=(e,t,n,r)=>Ji(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),$i=(e,t,n)=>Ji(e,n,(r=>e[r][t]>=n));const Ki=["push","pop","shift","splice","unshift"];function Gi(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(Ki.forEach((t=>{delete e[t]})),delete e._chartjs)}function Qi(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Xi="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Zi(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,Xi.call(window,(()=>{r=!1,e.apply(t,n)})))}}const es=e=>"start"===e?"left":"end"===e?"right":"center",ts=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function ns(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:f,maxDefined:g}=a.getUserBounds();if(f){if(i=Math.min(Yi(l,d,u).lo,n?r:Yi(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,i+1).reverse().findIndex((e=>!ei(e[o.axis])));i-=Math.max(0,e)}i=Vi(i,0,r-1)}if(g){let e=Math.max(Yi(l,a.axis,h,!0).hi+1,n?0:Yi(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!ei(e[o.axis])));e+=Math.max(0,t)}s=Vi(e,i,r)-i}else s=r-i}return{start:i,count:s}}function rs(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const is=e=>0===e||1===e,ss=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ki/n),as=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ki/n)+1,os={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ei),easeOutSine:e=>Math.sin(e*Ei),easeInOutSine:e=>-.5*(Math.cos(_i*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>is(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>is(e)?e:ss(e,.075,.3),easeOutElastic:e=>is(e)?e:as(e,.075,.3),easeInOutElastic(e){const t=.1125;return is(e)?e:e<.5?.5*ss(2*e,t,.45):.5+.5*as(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-os.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*os.easeInBounce(2*e):.5*os.easeOutBounce(2*e-1)+.5};function ls(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function cs(e){return ls(e)?e:new Qr(e)}function ds(e){return ls(e)?e:new Qr(e).saturate(.5).darken(.1).hexString()}const us=["x","y","borderWidth","radius","tension"],hs=["color","borderColor","backgroundColor"];const fs=new Map;function gs(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=fs.get(n);return r||(r=new Intl.NumberFormat(e,t),fs.set(n,r)),r}(t,n).format(e)}const ps={values:e=>ti(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Ai(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),gs(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Ai(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?ps.numeric.call(this,e,t,n):""}};var ms={formatters:ps};const bs=Object.create(null),ys=Object.create(null);function xs(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function vs(e,t,n){return"string"===typeof t?fi(xs(e,t),n):fi(xs(e,""),t)}class ws{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ds(t.backgroundColor),this.hoverBorderColor=(e,t)=>ds(t.borderColor),this.hoverColor=(e,t)=>ds(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vs(this,e,t)}get(e){return xs(this,e)}describe(e,t){return vs(ys,e,t)}override(e,t){return vs(bs,e,t)}route(e,t,n,r){const i=xs(this,e),s=xs(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return ni(e)?Object.assign({},t,e):si(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var _s=new ws({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:hs},numbers:{type:"number",properties:us}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ms.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ks(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ss(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||ti(u)){if(ti(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||ti(h)||(a=ks(e,i,s,a,h))}else a=ks(e,i,s,a,u);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function js(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Ns(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Es(e,t,n,r){Cs(e,t,n,r,null)}function Cs(e,t,n,r,i){let s,a,o,l,c,d,u,h;const f=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*Ni;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,p,0,0,ki):e.arc(n,r,p,0,ki),e.closePath();break;case"triangle":d=i?i/2:p,e.moveTo(n+Math.sin(m)*d,r-Math.cos(m)*p),m+=Ti,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*p),m+=Ti,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(m+Ci)*l,u=Math.cos(m+Ci)*(i?i/2-c:l),o=Math.sin(m+Ci)*l,h=Math.sin(m+Ci)*(i?i/2-c:l),e.arc(n-u,r-o,c,m-_i,m-Ei),e.arc(n+h,r-a,c,m-Ei,m),e.arc(n+u,r+o,c,m,m+Ei),e.arc(n-h,r+a,c,m+Ei,m+_i),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,d=i?i/2:l,e.rect(n-d,r-l,2*d,2*l);break}m+=Ci;case"rectRot":u=Math.cos(m)*(i?i/2:p),a=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),e.moveTo(n-u,r-o),e.lineTo(n+h,r-a),e.lineTo(n+u,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":m+=Ci;case"cross":u=Math.cos(m)*(i?i/2:p),a=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":u=Math.cos(m)*(i?i/2:p),a=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),m+=Ci,u=Math.cos(m)*(i?i/2:p),a=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=i?i/2:Math.cos(m)*p,o=Math.sin(m)*p,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(i?i/2:p),r+Math.sin(m)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Ts(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function As(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ps(e){e.restore()}function Os(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ms(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ds(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function Ls(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Is(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=ti(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ei(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Ls(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),ei(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),Ds(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function Rs(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*_i,_i,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,_i,Ei,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Ei,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-Ei,!0),e.lineTo(n+a.topLeft,r)}const Fs=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zs=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Bs(e,t){const n=(""+e).match(Fs);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function Us(e,t){const n={},r=ni(t),i=r?Object.keys(t):t,s=ni(e)?r?n=>si(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=+s(a)||0;return n}function Ws(e){return Us(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Hs(e){return Us(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Vs(e){const t=Ws(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qs(e,t){e=e||{},t=t||_s.font;let n=si(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=si(e.style,t.style);r&&!(""+r).match(zs)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:si(e.family,t.family),lineHeight:Bs(si(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:si(e.weight,t.weight),string:""};return i.string=function(e){return!e||ei(e.size)||ei(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function Js(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&ti(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function Ys(e,t){return Object.assign(Object.create(e),t)}function $s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=sa("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>$s([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>Zs(n,r,(()=>function(e,t,n,r){let i;for(const s of t)if(i=sa(Qs(s,e),n),"undefined"!==typeof i)return Xs(e,i)?ra(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>aa(e).includes(t),ownKeys:e=>aa(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function Ks(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Gs(e,r),setContext:t=>Ks(e,t,n,r),override:i=>Ks(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Zs(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];vi(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),Xs(e,l)&&(l=ra(i._scopes,i,e,l));return l}(t,o,e,n));ti(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(ni(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=ra(r,i,e,l);t.push(Ks(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Xs(t,o)&&(o=Ks(o,i,s&&s[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function Gs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:vi(n)?n:()=>n,isIndexable:vi(r)?r:()=>r}}const Qs=(e,t)=>e?e+yi(t):t,Xs=(e,t)=>ni(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Zs(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function ea(e,t,n){return vi(e)?e(t,n):e}const ta=(e,t)=>!0===e?t:"string"===typeof e?bi(t,e):void 0;function na(e,t,n,r,i){for(const s of t){const t=ta(n,s);if(t){e.add(t);const s=ea(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function ra(e,t,n,r){const i=t._rootScopes,s=ea(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=ia(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=ia(o,a,s,l,r),null!==l))&&$s(Array.from(o),[""],i,s,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(ti(i)&&ni(n))return n;return i||{}}(t,n,r))))}function ia(e,t,n,r,i){for(;n;)n=na(e,t,n,r,i);return n}function sa(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function aa(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function oa(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={r:i.parse(bi(d,s),c)};return a}const la=Number.EPSILON||1e-14,ca=(e,t)=>t<e.length&&!e[t].skip&&e[t],da=e=>"x"===e?"y":"x";function ua(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=Bi(s,i),l=Bi(a,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:s.x-u*(a.x-i.x),y:s.y-u*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function ha(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=da(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=ca(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=ca(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?Pi(i[a-1])!==Pi(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=ca(e,0);for(let d=0;d<r-1;++d)l=c,c=ca(e,d+1),l&&c&&(Oi(t[d],0,la)?n[d]=n[d+1]=0:(i=n[d]/t[d],s=n[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[d]=i*a*t[d],n[d+1]=s*a*t[d])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=da(n),i=e.length;let s,a,o,l=ca(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=ca(e,c+1),!o)continue;const i=o[n],d=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=d-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=d+s*t[c])}}(e,s,t)}function fa(e,t,n){return Math.max(Math.min(e,n),t)}function ga(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)ha(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=ua(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=Ts(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&Ts(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=fa(i.cp1x,t.left,t.right),i.cp1y=fa(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=fa(i.cp2x,t.left,t.right),i.cp2y=fa(i.cp2y,t.top,t.bottom)))}(e,n)}function pa(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ma(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function ba(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const ya=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const xa=["top","right","bottom","left"];function va(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=xa[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function wa(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=ya(n),s="border-box"===i.boxSizing,a=va(i,"padding"),o=va(i,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:f,height:g}=t;return s&&(f-=a.width+o.width,g-=a.height+o.height),{x:Math.round((l-u)/f*n.width/r),y:Math.round((c-h)/g*n.height/r)}}const _a=e=>Math.round(10*e)/10;function ka(e,t,n,r){const i=ya(e),s=va(i,"margin"),a=ba(i.maxWidth,e,"clientWidth")||ji,o=ba(i.maxHeight,e,"clientHeight")||ji,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&ma(e);if(s){const e=s.getBoundingClientRect(),a=ya(s),o=va(a,"border","width"),l=va(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=ba(a.maxWidth,s,"clientWidth"),i=ba(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||ji,maxHeight:i||ji}}(e,t,n);let{width:c,height:d}=l;if("content-box"===i.boxSizing){const e=va(i,"border","width"),t=va(i,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=_a(Math.min(c,a,l.maxWidth)),d=_a(Math.min(d,o,l.maxHeight)),c&&!d&&(d=_a(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=_a(Math.floor(d*r))),{width:c,height:d}}function Sa(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const ja=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};pa()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Kd){}return e}();function Na(e,t){const n=function(e,t){return ya(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ea(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Ca(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Ta(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=Ea(e,i,n),o=Ea(i,s,n),l=Ea(s,t,n),c=Ea(a,o,n),d=Ea(o,l,n);return Ea(c,d,n)}function Aa(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Pa(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Oa(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ma(e){return"angle"===e?{between:Hi,compare:Ui,normalize:Wi}:{between:qi,compare:(e,t)=>e-t,normalize:e=>e}}function Da(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function La(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=Ma(r),{start:d,end:u,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=Ma(r),l=t.length;let c,d,{start:u,end:h,loop:f}=e;if(f){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][r]),i,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:f,style:e.style}}(e,t,n),g=[];let p,m,b,y=!1,x=null;const v=()=>y||l(i,b,p)&&0!==o(i,b),w=()=>!y||0===o(s,p)||l(s,b,p);for(let _=d,k=d;_<=u;++_)m=t[_%a],m.skip||(p=c(m[r]),p!==b&&(y=l(p,i,s),null===x&&v()&&(x=0===o(p,i)?_:k),null!==x&&w()&&(g.push(Da({start:x,end:_,loop:h,count:a,style:f})),x=null),k=_,b=p));return null!==x&&g.push(Da({start:x,end:u,loop:h,count:a,style:f})),g}function Ia(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=La(r[i],e.points,t);s.length&&n.push(...s)}return n}function Ra(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=Fa(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=s,u=t[0].start,h=u;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),d=i,u=t%l)}}for(const g of t){u=o?u:g.start;let e,t=n[u%l];for(h=u+1;h<=g.end;h++){const s=n[h%l];e=Fa(r.setContext(Ys(i,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),za(e,d)&&f(u,h-1,g.loop,d),t=s,d=e}u<h-1&&f(u,h-1,g.loop,d)}return c}(e,t,n,r):t}function Fa(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function za(e,t){if(!t)return!1;const n=[],r=function(e,t){return ls(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Ba(e,t,n){return e.options.clip?e[n]:t[n]}function Ua(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Ba(n,t,"left"),right:Ba(n,t,"right"),top:Ba(r,t,"top"),bottom:Ba(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class Wa{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Xi.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ha=new Wa;const Va="transparent",qa={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=cs(e||Va),i=r.valid&&cs(t||Va);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Ja{constructor(e,t,n,r){const i=t[n];r=Js([e.to,r,i,e.from]);const s=Js([e.from,i,r]);this._active=!0,this._fn=e.fn||qa[e.type||typeof s],this._easing=os[e.easing]||os.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Js([e.to,t,r,e.from]),this._from=Js([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Ya{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ni(e))return;const t=Object.keys(_s.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!ni(i))return;const s={};for(const e of t)s[e]=i[e];(ti(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=i[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(i[l]=d=new Ja(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Ha.add(this._chart,n),!0):void 0}}function $a(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function Ka(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Ga(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(d=!0,r.all)continue;break}c=e.values[l],ri(c)&&(s||0===t||Pi(t)===Pi(c))&&(t+=c)}return d||r.all?t:0}function Qa(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Xa(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Za(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function eo(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),u=t.length;let h;for(let f=0;f<u;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=Xa(i,d,n),h[o]=s,h._top=Za(h,a,!0,r.type),h._bottom=Za(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=s}}function to(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function no(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const ro=e=>"reset"===e||"none"===e,io=(e,t)=>t?e:Object.assign({},e);class so{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Qa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&no(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=si(n.xAxisID,to(e,"x")),s=t.yAxisID=si(n.yAxisID,to(e,"y")),a=t.rAxisID=si(n.rAxisID,to(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Gi(this._data,this),e._stacked&&no(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(ni(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[i]:d,[s]:e[d]};return o}(t,e)}else if(n!==t){if(n){Gi(n,this);const e=this._cachedMeta;no(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Ki.forEach((e=>{const t="_onData"+yi(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...i)})),a}})})))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=Qa(t.vScale,t),t.stack!==n.stack&&(r=!0,no(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(eo(this,t._parsed),t._stacked=Qa(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=ti(r[e])?this.parseArrayData(n,r,e,t):ni(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(i()&&(d=!1),u=l);n._sorted=d}s&&eo(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,d=new Array(r);let u,h,f;for(u=0,h=r;u<h;++u)f=u+n,d[u]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return d}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={x:i.parse(d[0],c),y:s.parse(d[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:i.parse(bi(h,a),u),y:s.parse(bi(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return Ga({keys:Ka(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=Ga(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ka(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let u,h;function f(){h=r[u];const t=h[a.axis];return!ri(h[e.axis])||c>t||d<t}for(u=0;u<s&&(f()||(this.updateRangeFromParsed(l,e,h,o),!i));++u);if(i)for(u=s-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],ri(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return ni(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(si(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=$a(e,n),i=$a(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return Ys(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return Ys(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&xi(n);if(a)return io(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(_s.elements[e]),f=l.resolveNamedOptions(u,h,(()=>this.getContext(n,r,t)),d);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(io(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new Ya(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ro(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){ro(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!ro(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&no(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ao(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Qi(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(xi(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function oo(e,t,n,r){return ti(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function lo(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[i.axis]=o||i.parse(a[c],c),l.push(oo(h,u,s,c));return l}function co(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function uo(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[ho(d,a,o,l)]=!0,i=c)),s[ho(i,a,o,l)]=!0,e.borderSkipped=s}function ho(e,t,n,r){var i,s,a;return r?(a=n,e=fo(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=fo(e,t,n),e}function fo(e,t,n){return"start"===e?t:"end"===e?n:e}function go(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,yr.A)(so,"defaults",{}),(0,yr.A)(so,"datasetElementType",null),(0,yr.A)(so,"dataElementType",null);class po extends so{parsePrimitiveData(e,t,n,r){return lo(e,t,n,r)}parseArrayData(e,t,n,r){return lo(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,d=[];let u,h,f,g;for(u=n,h=n+r;u<h;++u)g=t[u],f={},f[i.axis]=i.parse(bi(g,l),u),d.push(oo(bi(g,c),f,s,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=co(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||ei(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),g=(t._stacks||{})[a.axis],p={horizontal:l,base:n.base,enableBorderRadius:!g||co(t._custom)||s===g._top||s===g._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(p.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const m=p.options||e[h].options;uo(p,m,g,s),go(p,m,c.ratio),this.updateElement(e[h],h,p,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),r=t&&t[e.vScale.axis];if(ei(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||ao(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=co(l);let d,u,h=o[t.axis],f=0,g=n?this.applyStack(t,o,n):h;g!==h&&(f=g-h,g=h),c&&(h=l.barStart,g=l.barEnd-l.barStart,0!==h&&Pi(h)!==Pi(l.barEnd)&&(f=0),f+=h);const p=ei(i)||c?f:i;let m=t.getPixelForValue(p);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(f+g):m,u=d-m,Math.abs(u)<s){u=function(e,t,n){return 0!==e?Pi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*s,h===a&&(m-=u/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);m=Math.max(Math.min(m,f),l),d=m+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=Pi(u)*t.getLineWidthForValue(a)/2;m+=e,u-=e}return{size:u,base:m,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=si(r.maxBarThickness,1/0);let a,o;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let s,a;return ei(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}(0,yr.A)(po,"id","bar"),(0,yr.A)(po,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,yr.A)(po,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mo extends so{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=si(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=si(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,d=a.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!i&&this.getParsed(u),h={},f=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),g=h[d]=i?a.getBasePixel():a.getPixelForValue(n[d]);h.skip=isNaN(f)||isNaN(g),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=si(n&&n._custom,i),r}}(0,yr.A)(mo,"id","bubble"),(0,yr.A)(mo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,yr.A)(mo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class bo extends so{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(ni(n[e])){const{key:e="value"}=this._parsing;a=t=>+bi(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return Ii(this.options.rotation-90)}_getCircumference(){return Ii(this.options.circumference)}_getRotationExtents(){let e=ki,t=-ki;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:p,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<ki){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>Hi(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),g=(e,t,r)=>Hi(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),p=f(0,c,u),m=f(Ei,d,h),b=g(_i,c,u),y=g(_i+Ei,d,h);r=(p-b)/2,i=(m-y)/2,s=-(p+b)/2,a=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(h,u,o),b=(n.width-s)/f,y=(n.height-s)/g,x=Math.max(Math.min(b,y)/2,0),v=ai(this.options.radius,x),w=(v-Math.max(v*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ki)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=i&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,r);let p,m=this._getRotation();for(p=0;p<t;++p)m+=this._circumference(p,i);for(p=t;p<t+n;++p){const t=this._circumference(p,i),n=e[p],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};g&&(s.options=f||this.resolveDataElementOptions(p,n.active?"active":r)),m+=t,this.updateElement(n,p,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ki*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=gs(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(si(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,yr.A)(bo,"id","doughnut"),(0,yr.A)(bo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,yr.A)(bo,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,yr.A)(bo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class yo extends so{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=ns(t,r,s);this._drawStart=a,this._drawCount=o,rs(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=s.axis,h=a.axis,{spanGaps:f,segment:g}=this.options,p=Di(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,b=t+n,y=e.length;let x=t>0&&this.getParsed(t-1);for(let v=0;v<y;++v){const n=e[v],f=m?n:{};if(v<t||v>=b){f.skip=!0;continue}const y=this.getParsed(v),w=ei(y[h]),_=f[u]=s.getPixelForValue(y[u],v),k=f[h]=i||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],v);f.skip=isNaN(_)||isNaN(k)||w,f.stop=v>0&&Math.abs(y[u]-x[u])>p,g&&(f.parsed=y,f.raw=l.data[v]),d&&(f.options=c||this.resolveDataElementOptions(v,n.active?"active":r)),m||this.updateElement(n,v,f,r),x=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,yr.A)(yo,"id","line"),(0,yr.A)(yo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,yr.A)(yo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class xo extends so{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=gs(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return oa.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*_i;let u,h=d;const f=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,f);for(u=t;u<t+n;u++){const t=e[u];let n=h,g=h+this._computeAngle(u,r,f),p=s.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=g,i&&(a.animateScale&&(p=0),a.animateRotate&&(n=g=d));const m={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Ii(this.resolveDataElementOptions(e,t).angle||n):0}}(0,yr.A)(xo,"id","polarArea"),(0,yr.A)(xo,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,yr.A)(xo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class vo extends bo{}(0,yr.A)(vo,"id","pie"),(0,yr.A)(vo,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class wo extends so{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return oa.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,d,r)}}}(0,yr.A)(wo,"id","radar"),(0,yr.A)(wo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,yr.A)(wo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _o extends so{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=ns(t,n,r);if(this._drawStart=i,this._drawCount=s,rs(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=s.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=Di(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=b?t:{},g=ei(n[f]),v=c[h]=s.getPixelForValue(n[h],x),w=c[f]=i||g?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],x);c.skip=isNaN(v)||isNaN(w)||g,c.stop=x>0&&Math.abs(n[h]-y[h])>m,p&&(c.parsed=n,c.raw=l.data[x]),u&&(c.options=d||this.resolveDataElementOptions(x,t.active?"active":r)),b||this.updateElement(t,x,c,r),y=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}(0,yr.A)(_o,"id","scatter"),(0,yr.A)(_o,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,yr.A)(_o,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function ko(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class So{static override(e){Object.assign(So.prototype,e)}constructor(e){(0,yr.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return ko()}parse(){return ko()}format(){return ko()}add(){return ko()}diff(){return ko()}startOf(){return ko()}endOf(){return ko()}}var jo=So;function No(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?$i:Yi;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex((e=>!ei(e[t.axis])));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex((e=>!ei(e[t.axis])));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function Eo(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=No(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function Co(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return Eo(e,n,t,(function(n,a,o){(i||Ts(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function To(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Eo(e,n,t,(function(n,c,d){const u=n.inRange(t.x,t.y,i);if(r&&!u)return;const h=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(h))&&!u)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:d}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:d})})),a}function Ao(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?To(e,t,n,r,i,s):function(e,t,n,r){let i=[];return Eo(e,n,t,(function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=zi(e,{x:t.x,y:t.y});Hi(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})})),i}(e,t,n,i):[]}function Po(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Eo(e,n,t,((e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))})),r&&!o?[]:s}var Oo={evaluateInteractionItems:Eo,modes:{index(e,t,n,r){const i=wa(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Co(e,i,s,r,a):Ao(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=wa(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Co(e,i,s,r,a):Ao(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Co(e,wa(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=wa(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Ao(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>Po(e,wa(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Po(e,wa(t,e),"y",n.intersect,r)}};const Mo=["left","top","right","bottom"];function Do(e,t){return e.filter((e=>e.pos===t))}function Lo(e,t){return e.filter((e=>-1===Mo.indexOf(e.pos)&&e.box.axis===t))}function Io(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Ro(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!Mo.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function Fo(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function zo(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Bo(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!ni(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&zo(a,s.getPadding());const o=Math.max(0,t.outerWidth-Fo(a,e,"left","right")),l=Math.max(0,t.outerHeight-Fo(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function Uo(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Wo(e,t,n,r){const i=[];let s,a,o,l,c,d;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,Uo(o.horizontal,t));const{same:a,other:u}=Bo(t,n,o,r);c|=a&&i.length,d=d||u,l.fullSize||i.push(o)}return c&&Wo(i,t,n,r)||d}function Ho(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function Vo(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;xi(l.start)&&(a=l.start),e.fullSize?Ho(e,i.left,a,n.outerWidth-i.right-i.left,s):Ho(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;xi(l.start)&&(s=l.start),e.fullSize?Ho(e,s,i.top,a,n.outerHeight-i.bottom-i.top):Ho(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var qo={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=Vs(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=Io(t.filter((e=>e.box.fullSize)),!0),r=Io(Do(t,"left"),!0),i=Io(Do(t,"right")),s=Io(Do(t,"top"),!0),a=Io(Do(t,"bottom")),o=Lo(t,"x"),l=Lo(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:Do(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;li(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},i);zo(h,Vs(r));const f=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),g=Ro(l.concat(c),u);Wo(o.fullSize,f,u,g),Wo(l,f,u,g),Wo(c,f,u,g)&&Wo(l,f,u,g),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Vo(o.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,Vo(o.rightAndBottom,f,u,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},li(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Jo{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Yo extends Jo{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $o="$chartjs",Ko={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Go=e=>null===e||""===e;const Qo=!!ja&&{passive:!0};function Xo(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Qo)}function Zo(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function el(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Zo(n.addedNodes,r),t=t&&!Zo(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function tl(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Zo(n.removedNodes,r),t=t&&!Zo(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const nl=new Map;let rl=0;function il(){const e=window.devicePixelRatio;e!==rl&&(rl=e,nl.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function sl(e,t,n){const r=e.canvas,i=r&&ma(r);if(!i)return;const s=Zi(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)}));return a.observe(i),function(e,t){nl.size||window.addEventListener("resize",il),nl.set(e,t)}(e,s),a}function al(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){nl.delete(e),nl.size||window.removeEventListener("resize",il)}(e)}function ol(e,t,n){const r=e.canvas,i=Zi((t=>{null!==e.ctx&&n(function(e,t){const n=Ko[e.type]||e.type,{x:r,y:i}=wa(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Qo)}(r,t,i),i}class ll extends Jo{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[$o]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Go(i)){const t=Na(e,"width");void 0!==t&&(e.width=t)}if(Go(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Na(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[$o])return!1;const n=t[$o].initial;["height","width"].forEach((e=>{const r=n[e];ei(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[$o],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:el,detach:tl,resize:sl}[t]||ol;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:al,detach:al,resize:al}[t]||Xo)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return ka(e,t,n,r)}isAttached(e){const t=e&&ma(e);return!(!t||!t.isConnected)}}class cl{constructor(){(0,yr.A)(this,"x",void 0),(0,yr.A)(this,"y",void 0),(0,yr.A)(this,"active",!1),(0,yr.A)(this,"options",void 0),(0,yr.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Di(this.x)&&Di(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function dl(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(ul(t,c,d,ei(r)?0:o-r,o),e=0,n=a-1;e<n;e++)ul(t,c,d,s[e],s[e+1]);return ul(t,c,d,l,ei(r)?t.length:l+r),c}return ul(t,c,d),c}function ul(e,t,n,r,i){const s=si(r,0),a=Math.min(si(i,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)d++,c=Math.round(s+d*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*n))}(0,yr.A)(cl,"defaults",{}),(0,yr.A)(cl,"defaultRoutes",void 0);const hl=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,fl=(e,t)=>Math.min(t||e,e);function gl(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function pl(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function ml(e){return e.drawTicks?e.tickLength:0}function bl(e,t){if(!e.display)return 0;const n=qs(e.font,t),r=Vs(e.padding);return(ti(e.text)?e.text.length:1)*n.lineHeight+r.height}function yl(e,t,n){let r=es(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class xl extends cl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=ii(e,Number.POSITIVE_INFINITY),t=ii(t,Number.NEGATIVE_INFINITY),n=ii(n,Number.POSITIVE_INFINITY),r=ii(r,Number.NEGATIVE_INFINITY),{min:ii(e,n),max:ii(t,r),minDefined:ri(e),maxDefined:ri(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ii(n,ii(r,n)),max:ii(r,ii(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oi(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=ai(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?gl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=dl(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oi(this.options.afterUpdate,[this])}beforeSetDimensions(){oi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=oi(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){oi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=fl(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Vi(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),d+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-ml(e.grid)-t.padding-bl(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=Ri(Math.min(Math.asin(Vi((c.highest.height+6)/s,-1,1)),Math.asin(Vi(a/o,-1,1))-Math.asin(Vi(u/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){oi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=bl(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=ml(i)+s):(e.height=this.maxHeight,e.width=ml(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Ii(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===i?u=t.width:"end"===i?d=e.width:"inner"!==i&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)ei(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=gl(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/fl(t,n));let l,c,d,u,h,f,g,p,m,b,y,x=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,g=i[f]=i[f]||{data:{},gc:[]},p=h.lineHeight,m=b=0,ei(u)||ti(u)){if(ti(u))for(c=0,d=u.length;c<d;++c)y=u[c],ei(y)||ti(y)||(m=ks(r,g.data,g.gc,m,y),b+=p)}else m=ks(r,g.data,g.gc,m,u),b=p;s.push(m),a.push(b),x=Math.max(m,x),v=Math.max(b,v)}!function(e,t){li(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=s.indexOf(x),_=a.indexOf(v),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Vi(this._alignToPixels?js(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Ys(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Ys(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Ii(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=ml(i),u=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,g=f/2,p=function(e){return js(n,e,f)};let m,b,y,x,v,w,_,k,S,j,N,E;if("top"===s)m=p(this.bottom),w=this.bottom-d,k=m-g,j=p(e.top)+g,E=e.bottom;else if("bottom"===s)m=p(this.top),j=e.top,E=p(e.bottom)-g,w=m+g,k=this.top+d;else if("left"===s)m=p(this.right),v=this.right-d,_=m-g,S=p(e.left)+g,N=e.right;else if("right"===s)m=p(this.left),S=e.left,N=p(e.right)-g,v=m+g,_=this.left+d;else if("x"===t){if("center"===s)m=p((e.top+e.bottom)/2+.5);else if(ni(s)){const e=Object.keys(s)[0],t=s[e];m=p(this.chart.scales[e].getPixelForValue(t))}j=e.top,E=e.bottom,w=m+g,k=w+d}else if("y"===t){if("center"===s)m=p((e.left+e.right)/2);else if(ni(s)){const e=Object.keys(s)[0],t=s[e];m=p(this.chart.scales[e].getPixelForValue(t))}v=m-g,_=v-d,S=e.left,N=e.right}const C=si(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/C));for(b=0;b<c;b+=T){const e=this.getContext(b),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,f=t.tickWidth,g=t.tickColor,p=t.tickBorderDash||[],m=t.tickBorderDashOffset;y=pl(this,b,o),void 0!==y&&(x=js(n,y,s),l?v=_=S=N=x:w=k=j=E=x,u.push({tx1:v,ty1:w,tx2:_,ty2:k,x1:S,y1:j,x2:N,y2:E,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:f,tickColor:g,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=i,u=ml(n.grid),h=u+c,f=d?-c:h,g=-Ii(this.labelRotation),p=[];let m,b,y,x,v,w,_,k,S,j,N,E,C="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(ni(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(ni(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const T=this._getLabelSizes();for(m=0,b=a.length;m<b;++m){y=a[m],x=y.label;const e=i.setContext(this.getContext(m));k=this.getPixelForTick(m)+i.labelOffset,S=this._resolveTickFontOptions(m),j=S.lineHeight,N=ti(x)?x.length:1;const t=N/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=_;if(s?(v=k,"inner"===_&&(h=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),E="top"===r?"near"===l||0!==g?-N*j+j/2:"center"===l?-T.highest.height/2-t*j+j:-T.highest.height+j/2:"near"===l||0!==g?j/2:"center"===l?T.highest.height/2-t*j:T.highest.height-N*j,d&&(E*=-1),0===g||e.showLabelBackdrop||(v+=j/2*Math.sin(g))):(w=k,E=(1-N)*j/2),e.showLabelBackdrop){const t=Vs(e.backdropPadding),n=T.heights[m],r=T.widths[m];let i=E-t.top,s=0-t.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===b-1?s-=r:m>0&&(s-=r/2)}u={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:x,font:S,textOffset:E,options:{rotation:g,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[v,w],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ii(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=js(e,this.left,s)-s/2,c=js(e,this.right,a)+a/2,d=u=o):(d=js(e,this.top,s)-s/2,u=js(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&As(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;Is(t,i.label,0,i.textOffset,n,e)}n&&Ps(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=qs(n.font),s=Vs(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||ni(t)?(o+=s.bottom,ti(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,f,g=0;const p=a-i,m=o-s;if(e.isHorizontal()){if(h=ts(r,s,o),ni(n)){const e=Object.keys(n)[0],r=n[e];f=d[e].getPixelForValue(r)+p-t}else f="center"===n?(c.bottom+c.top)/2+p-t:hl(e,n,t);u=o-s}else{if(ni(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:hl(e,n,t);f=ts(r,a,i),g="left"===n?-Ei:Ei}return{titleX:h,titleY:f,maxWidth:u,rotation:g}}(this,o,t,a);Is(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:u,textAlign:yl(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=si(e.grid&&e.grid.z,-1),r=si(e.border&&e.border.z,0);return this._isVisible()&&this.draw===xl.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return qs(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vl{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=fi(Object.create(null),[n?_s.get(n):{},_s.get(t),e.defaults]);_s.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");_s.route(s,i,l,o)}))}(t,e.defaultRoutes);e.descriptors&&_s.describe(t,e.descriptors)}(e,s,n),this.override&&_s.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in _s[r]&&(delete _s[r][n],this.override&&delete bs[n])}}class wl{constructor(){this.controllers=new vl(so,"datasets",!0),this.elements=new vl(cl,"elements"),this.plugins=new vl(Object,"plugins"),this.scales=new vl(xl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):li(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=yi(e);oi(n["before"+r],[],n),t[e](n),oi(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var _l=new wl;class kl{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===oi(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){ei(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=si(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(_l.plugins.items);for(let s=0;s<r.length;s++)n.push(_l.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=Sl(n[t],r);null!==i&&a.push({plugin:l,options:jl(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Sl(e,t){return t||!1!==e?!0===e?{}:e:null}function jl(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nl(e,t){const n=_s.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function El(e){if("x"===e||"y"===e||"r"===e)return e}function Cl(e){if(El(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&El(e[0].toLowerCase());if(t)return t}var i;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Tl(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Al(e,t){const n=bs[e.type]||{scales:{}},r=t.scales||{},i=Nl(e.type,t),s=Object.create(null);return Object.keys(r).forEach((t=>{const a=r[t];if(!ni(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Cl(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return Tl(e,"x",n[0])||Tl(e,"y",n[0])}return{}}(t,e),_s.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=gi(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,a=n.indexAxis||Nl(i,t),o=(bs[i]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),gi(s[i],[{axis:t},r[i],o[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];gi(t,[_s.scales[t.type],_s.scale])})),s}function Pl(e){const t=e.options||(e.options={});t.plugins=si(t.plugins,{}),t.scales=Al(e,t)}function Ol(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Ml=new Map,Dl=new Set;function Ll(e,t){let n=Ml.get(e);return n||(n=t(),Ml.set(e,n),Dl.add(n)),n}const Il=(e,t,n)=>{const r=bi(t,n);void 0!==r&&e.add(r)};class Rl{constructor(e){this._config=function(e){return(e=e||{}).data=Ol(e.data),Pl(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ol(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Pl(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ll(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return Ll("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return Ll("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return Ll("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>Il(o,e,t)))),t.forEach((e=>Il(o,r,e))),t.forEach((e=>Il(o,bs[i]||{},e))),t.forEach((e=>Il(o,_s,e))),t.forEach((e=>Il(o,ys,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Dl.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,bs[t]||{},_s.datasets[t]||{},{type:t},_s,ys]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=Fl(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=Gs(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(vi(a)||zl(a))||s&&ti(a))return!0}return!1}(s,t)){i.$shared=!1;o=Ks(s,n=vi(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=Fl(this._resolverCache,e,n);return ni(t)?Ks(i,t,void 0,r):i}}function Fl(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:$s(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,s)}return s}const zl=e=>ni(e)&&Object.getOwnPropertyNames(e).some((t=>vi(e[t])));const Bl=["top","bottom","left","right","chartArea"];function Ul(e,t){return"top"===e||"bottom"===e||-1===Bl.indexOf(e)&&"x"===t}function Wl(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Hl(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),oi(n&&n.onComplete,[e],t)}function Vl(e){const t=e.chart,n=t.options.animation;oi(n&&n.onProgress,[e],t)}function ql(e){return pa()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Jl={},Yl=e=>{const t=ql(e);return Object.values(Jl).filter((e=>e.canvas===t)).pop()};function $l(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class Kl{static register(){_l.add(...arguments),Gl()}static unregister(){_l.remove(...arguments),Gl()}constructor(e,t){const n=this.config=new Rl(t),r=ql(e),i=Yl(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!pa()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Yo:ll}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Zr(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],Jl[this.id]=this,a&&o?(Ha.listen(this,"complete",Hl),Ha.listen(this,"progress",Vl),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return ei(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return _l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ns(this.canvas,this.ctx),this}stop(){return Ha.stop(this),this}resize(e,t){Ha.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Sa(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),oi(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){li(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=Cl(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),li(i,(t=>{const i=t.options,s=i.id,a=Cl(s,i),o=si(i.type,t.dtype);void 0!==i.position&&Ul(i.position,a)===Ul(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(_l.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),li(r,((e,t)=>{e||delete n[t]})),li(n,(e=>{qo.configure(this,e,e.options),qo.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Wl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||Nl(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=_l.getController(s),{datasetElementType:r,dataElementType:a}=_s.datasets[s];Object.assign(t,{dataElementType:_l.getElement(a),datasetElementType:r&&_l.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){li(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||li(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Wl("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){li(this.scales,(e=>{qo.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);wi(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){$l(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!wi(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;qo.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],li(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,vi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ha.has(this)?this.attached&&!Ha.running(this)&&Ha.start(this):(this.draw(),Hl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Ua(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&As(t,r),e.controller.draw(),r&&Ps(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ts(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=Oo.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Ys(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);xi(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ha.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ns(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Jl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};li(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){li(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},li(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!ci(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,oi(i.onHover,[e,a,this],this),o&&oi(i.onClick,[e,a,this],this));const c=!ci(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function Gl(){return li(Kl.instances,(e=>e._plugins.invalidate()))}function Ql(e,t,n,r){const i=Us(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return Vi(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Vi(i.innerStart,0,a),innerEnd:Vi(i.innerEnd,0,a)}}function Xl(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Zl(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let f=0;const g=i-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;f=(g-(0!==e?g*e/(e+r):g))/2}const p=(g-Math.max(.001,g*u-n/_i)/u)/2,m=l+p+f,b=i-p-f,{outerStart:y,outerEnd:x,innerStart:v,innerEnd:w}=Ql(t,h,u,b-m),_=u-y,k=u-x,S=m+y/_,j=b-x/k,N=h+v,E=h+w,C=m+v/N,T=b-w/E;if(e.beginPath(),s){const t=(S+j)/2;if(e.arc(a,o,u,S,t),e.arc(a,o,u,t,j),x>0){const t=Xl(k,j,a,o);e.arc(t.x,t.y,x,j,b+Ei)}const n=Xl(E,b,a,o);if(e.lineTo(n.x,n.y),w>0){const t=Xl(E,T,a,o);e.arc(t.x,t.y,w,b+Ei,T+Math.PI)}const r=(b-w/h+(m+v/h))/2;if(e.arc(a,o,h,b-w/h,r,!0),e.arc(a,o,h,r,m+v/h,!0),v>0){const t=Xl(N,C,a,o);e.arc(t.x,t.y,v,C+Math.PI,m-Ei)}const i=Xl(_,m,a,o);if(e.lineTo(i.x,i.y),y>0){const t=Xl(_,S,a,o);e.arc(t.x,t.y,y,m-Ei,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*u+a,n=Math.sin(S)*u+o;e.lineTo(t,n);const r=Math.cos(j)*u+a,i=Math.sin(j)*u+o;e.lineTo(r,i)}e.closePath()}function ec(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let g=t.endAngle;if(s){Zl(e,t,n,r,g,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(g=a+(o%ki||ki))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+Ei,r-Ei),e.closePath(),e.clip()}(e,t,g),s||(Zl(e,t,n,r,g,i),e.stroke())}(0,yr.A)(Kl,"defaults",_s),(0,yr.A)(Kl,"instances",Jl),(0,yr.A)(Kl,"overrides",bs),(0,yr.A)(Kl,"registry",_l),(0,yr.A)(Kl,"version","4.4.9"),(0,yr.A)(Kl,"getChart",Yl);class tc extends cl{constructor(e){super(),(0,yr.A)(this,"circumference",void 0),(0,yr.A)(this,"endAngle",void 0),(0,yr.A)(this,"fullCircles",void 0),(0,yr.A)(this,"innerRadius",void 0),(0,yr.A)(this,"outerRadius",void 0),(0,yr.A)(this,"pixelMargin",void 0),(0,yr.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=zi(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=si(d,o-a),f=Hi(i,a,o)&&a!==o,g=h>=ki||f,p=qi(s,l+u,c+u);return g&&p}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,d=(s+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ki?Math.floor(n/ki):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(_i,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){Zl(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%ki||ki))}Zl(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),ec(e,this,o,i,s),e.restore()}}function nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=si(n.borderCapStyle,t.borderCapStyle),e.setLineDash(si(n.borderDash,t.borderDash)),e.lineDashOffset=si(n.borderDashOffset,t.borderDashOffset),e.lineJoin=si(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=si(n.borderWidth,t.borderWidth),e.strokeStyle=si(n.borderColor,t.borderColor)}function rc(e,t,n){e.lineTo(n.x,n.y)}function ic(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function sc(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=ic(i,n,r),d=function(e){return e.stepped?Os:e.tension||"monotone"===e.cubicInterpolationMode?Ms:rc}(s);let u,h,f,{move:g=!0,reverse:p}=r||{};for(u=0;u<=c;++u)h=i[(o+(p?c-u:u))%a],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):d(e,f,h,p,s.stepped),f=h);return l&&(h=i[(o+(p?c:0))%a],d(e,f,h,p,s.stepped)),!!l}function ac(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=ic(i,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,f,g,p,m=0,b=0;const y=e=>(a+(c?o-e:e))%s,x=()=>{f!==g&&(e.lineTo(m,g),e.lineTo(m,f),e.lineTo(m,p))};for(l&&(u=i[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=i[y(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<f?f=n:n>g&&(g=n),m=(b*m+t)/++b):(x(),e.lineTo(t,n),h=r,b=0,f=g=n),p=n}x()}function oc(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?ac:sc}(0,yr.A)(tc,"id","arc"),(0,yr.A)(tc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,yr.A)(tc,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,yr.A)(tc,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const lc="function"===typeof Path2D;function cc(e,t,n,r){lc&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),nc(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=oc(t);for(const o of i)nc(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class dc extends cl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;ga(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return Ra(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=Ia(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?Ca:e.tension||"monotone"===e.cubicInterpolationMode?Ta:Ea}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=i[c],h=i[d];if(u===h){a.push(u);continue}const f=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return oc(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=oc(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),cc(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function uc(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}(0,yr.A)(dc,"id","line"),(0,yr.A)(dc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,yr.A)(dc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,yr.A)(dc,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class hc extends cl{constructor(e){super(),(0,yr.A)(this,"parsed",void 0),(0,yr.A)(this,"skip",void 0),(0,yr.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return uc(this,e,"x",t)}inYRange(e,t){return uc(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Ts(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Es(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function fc(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-u,d=r+u):(u=s/2,o=n-u,l=n+u,c=Math.min(r,i),d=Math.max(r,i)),{left:o,top:c,right:l,bottom:d}}function gc(e,t,n,r){return e?0:Vi(t,n,r)}function pc(e){const t=fc(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=Ws(r);return{t:gc(i.top,s.top,0,n),r:gc(i.right,s.right,0,t),b:gc(i.bottom,s.bottom,0,n),l:gc(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=Hs(i),a=Math.min(t,n),o=e.borderSkipped,l=r||ni(i);return{topLeft:gc(!l||o.top||o.left,s.topLeft,0,a),topRight:gc(!l||o.top||o.right,s.topRight,0,a),bottomLeft:gc(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:gc(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function mc(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&fc(e,r);return a&&(i||qi(t,a.left,a.right))&&(s||qi(n,a.top,a.bottom))}function bc(e,t){e.rect(t.x,t.y,t.w,t.h)}function yc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}(0,yr.A)(hc,"id","point"),(0,yr.A)(hc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,yr.A)(hc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class xc extends cl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=pc(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Rs:bc;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,yc(s,t,i)),e.clip(),a(e,yc(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,yc(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return mc(this,e,t,n)}inXRange(e,t){return mc(this,e,null,t)}inYRange(e,t){return mc(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,yr.A)(xc,"id","bar"),(0,yr.A)(xc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,yr.A)(xc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const vc=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class wc extends cl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=oi(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=qs(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=vc(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,f)=>{const g=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+g+2*a>s)&&(d+=c,l[l.length-(f>0?0:1)]=0,h+=c,u++),o[f]={left:0,top:h,row:u,width:g,height:r},l[l.length-1]+=g+a})),d}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=a,u=0,h=0,f=0,g=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:p,itemHeight:m}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=_c(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&h+m+2*a>c&&(d+=u+a,l.push({width:u,height:h}),f+=u+a,g++,u=h=0),o[s]={left:f,top:h,col:g,width:p,height:m},u=Math.max(u,p),h+=m+a})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=Aa(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=ts(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=ts(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=ts(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=ts(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;As(e,this),this._draw(),Ps(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=_s.color,o=Aa(e.rtl,this.left,this.width),l=qs(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:g,itemHeight:p}=vc(s,d),m=this.isHorizontal(),b=this._computeTitleHeight();h=m?{x:ts(i,this.left+c,this.right-n[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:ts(i,this.top+b+c,this.bottom-t[0].height),line:0},Pa(this.ctx,e.textDirection);const y=p+c;this.legendItems.forEach(((x,v)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,_=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),k=f+u+w;let S=h.x,j=h.y;o.setWidth(this.width),m?v>0&&S+k+c>this.right&&(j=h.y+=y,h.line++,S=h.x=ts(i,this.left+c,this.right-n[h.line])):v>0&&j+y>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,j=h.y=ts(i,this.top+b+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;r.save();const i=si(n.lineWidth,1);if(r.fillStyle=si(n.fillStyle,a),r.lineCap=si(n.lineCap,"butt"),r.lineDashOffset=si(n.lineDashOffset,0),r.lineJoin=si(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=si(n.strokeStyle,a),r.setLineDash(si(n.lineDash,[])),s.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);Cs(r,a,l,t+u,s.pointStyleWidth&&f)}else{const s=t+Math.max((d-g)/2,0),a=o.leftForLtr(e,f),l=Hs(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Rs(r,{x:a,y:s,w:f,h:g,radius:l}):r.rect(a,s,f,g),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(S),j,x),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+u,m?S+k:this.right,e.rtl),function(e,t,n){Is(r,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),j,x),m)h.x+=k+c;else if("string"!==typeof x.text){const e=l.lineHeight;h.y+=_c(x,e)+c}else h.y+=y})),Oa(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=qs(t.font),r=Vs(t.padding);if(!t.display)return;const i=Aa(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=ts(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+ts(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=ts(a,d,d+u);s.textAlign=i.textAlign(es(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Is(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=qs(e.font),n=Vs(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(qi(e,this.left,this.right)&&qi(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],qi(e,r.left,r.left+r.width)&&qi(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!a&&oi(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&oi(t.onHover,[e,n,this],this)}else n&&oi(t.onClick,[e,n,this],this);var r,i}}function _c(e,t){return t*(e.text?e.text.length:0)}var kc={id:"legend",_element:wc,start(e,t,n){const r=e.legend=new wc({ctx:e.ctx,options:n,chart:e});qo.configure(e,r,n),qo.addBox(e,r)},stop(e){qo.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;qo.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Vs(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};new WeakMap;const Sc={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce(((e,t)=>e+t))/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Bi(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function jc(e,t){return t&&(ti(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nc(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ec(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Cc(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=qs(t.bodyFont),c=qs(t.titleFont),d=qs(t.footerFont),u=s.length,h=i.length,f=r.length,g=Vs(t.padding);let p=g.height,m=0,b=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(b+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b){p+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const x=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=c.string,li(e.title,x),n.font=l.string,li(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?a+2+t.boxPadding:0,li(r,(e=>{li(e.before,x),li(e.lines,x),li(e.after,x)})),y=0,n.font=d.string,li(e.footer,x),n.restore(),m+=g.width,{width:m,height:p}}function Tc(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Ac(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Tc(e,t,n,r),yAlign:r}}function Pc(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=Hs(a);let g=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const p=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?g+=c:"right"===o&&(g-=c):"left"===o?g-=Math.max(d,h)+i:"right"===o&&(g+=Math.max(u,f)+i),{x:Vi(g,0,r.width-t.width),y:Vi(p,0,r.height-t.height)}}function Oc(e,t,n){const r=Vs(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Mc(e){return jc([],Nc(e))}function Dc(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Lc={beforeTitle:Xr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Xr,beforeBody:Xr,beforeLabel:Xr,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ei(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Xr,afterBody:Xr,beforeFooter:Xr,footer:Xr,afterFooter:Xr};function Ic(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?Lc[t].call(n,r):i}class Rc extends cl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new Ya(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Ys(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=Ic(n,"beforeTitle",this,e),i=Ic(n,"title",this,e),s=Ic(n,"afterTitle",this,e);let a=[];return a=jc(a,Nc(r)),a=jc(a,Nc(i)),a=jc(a,Nc(s)),a}getBeforeBody(e,t){return Mc(Ic(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return li(e,(e=>{const t={before:[],lines:[],after:[]},i=Dc(n,e);jc(t.before,Nc(Ic(i,"beforeLabel",this,e))),jc(t.lines,Ic(i,"label",this,e)),jc(t.after,Nc(Ic(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return Mc(Ic(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=Ic(n,"beforeFooter",this,e),i=Ic(n,"footer",this,e),s=Ic(n,"afterFooter",this,e);let a=[];return a=jc(a,Nc(r)),a=jc(a,Nc(i)),a=jc(a,Nc(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(Ec(this.chart,t[a]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),li(l,(t=>{const n=Dc(e.callbacks,t);r.push(Ic(n,"labelColor",this,t)),i.push(Ic(n,"labelPointStyle",this,t)),s.push(Ic(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=Sc[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Cc(this,n),a=Object.assign({},e,t),o=Ac(this.chart,n,a),l=Pc(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=Hs(a),{x:u,y:h}=e,{width:f,height:g}=t;let p,m,b,y,x,v;return"center"===i?(x=h+g/2,"left"===r?(p=u,m=p-s,y=x+s,v=x-s):(p=u+f,m=p+s,y=x-s,v=x+s),b=p):(m="left"===r?u+Math.max(o,c)+s:"right"===r?u+f-Math.max(l,d)-s:this.caretX,"top"===i?(y=h,x=y-s,p=m-s,b=m+s):(y=h+g,x=y+s,p=m+s,b=m-s),v=y),{x1:p,x2:m,x3:b,y1:y,y2:x,y3:v}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=Aa(n.rtl,this.x,this.width);for(e.x=Oc(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=qs(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=qs(i.bodyFont),d=Oc(this,"left",i),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Es(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Es(e,t,n,c)}else{e.lineWidth=ni(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=Hs(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Rs(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Rs(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=qs(n.bodyFont);let u=d.lineHeight,h=0;const f=Aa(n.rtl,this.x,this.width),g=function(n){t.fillText(n,f.x(e.x+h),e.y+u/2),e.y+=u+i},p=f.textAlign(s);let m,b,y,x,v,w,_;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=Oc(this,p,n),t.fillStyle=n.bodyColor,li(this.beforeBody,g),h=a&&"right"!==p?"center"===s?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(m=r[x],b=this.labelTextColors[x],t.fillStyle=b,li(m.before,g),y=m.lines,a&&y.length&&(this._drawColorBox(t,e,x,f,n),u=Math.max(d.lineHeight,o)),v=0,_=y.length;v<_;++v)g(y[v]),u=d.lineHeight;li(m.after,g)}h=0,u=d.lineHeight,li(this.afterBody,g),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=Aa(n.rtl,this.x,this.width);for(e.x=Oc(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=qs(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=Hs(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Sc[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Cc(this,e),a=Object.assign({},n,this._size),o=Ac(t,e,a),l=Pc(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Vs(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Pa(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),Oa(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!ci(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!ci(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=Sc[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}(0,yr.A)(Rc,"positioners",Sc);var Fc={id:"tooltip",_element:Rc,positioners:Sc,afterInit(e,t,n){n&&(e.tooltip=new Rc({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,Me.A)((0,Me.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function zc(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function Bc(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Uc extends xl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ei(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Vi(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:zc(n,e,si(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return Bc.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Wc(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=i||1,f=c-1,{min:g,max:p}=t,m=!ei(s),b=!ei(a),y=!ei(l),x=(p-g)/(d+1);let v,w,_,k,S=Mi((p-g)/f/h)*h;if(S<1e-14&&!m&&!b)return[{value:g},{value:p}];k=Math.ceil(p/S)-Math.floor(g/S),k>f&&(S=Mi(k*S/f/h)*h),ei(o)||(v=Math.pow(10,o),S=Math.ceil(S*v)/v),"ticks"===r?(w=Math.floor(g/S)*S,_=Math.ceil(p/S)*S):(w=g,_=p),m&&b&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,w=s,_=a):y?(w=m?s:w,_=b?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=Oi(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const j=Math.max(Fi(S),Fi(w));v=Math.pow(10,ei(o)?j:o),w=Math.round(w*v)/v,_=Math.round(_*v)/v;let N=0;for(m&&(u&&w!==s?(n.push({value:s}),w<s&&N++,Oi(Math.round((w+N*S)*v)/v,s,Hc(s,x,e))&&N++):w<s&&N++);N<k;++N){const e=Math.round((w+N*S)*v)/v;if(b&&e>a)break;n.push({value:e})}return b&&u&&_!==a?n.length&&Oi(n[n.length-1].value,a,Hc(a,x,e))?n[n.length-1].value=a:n.push({value:a}):b&&_!==a||n.push({value:_}),n}function Hc(e,t,n){let{horizontal:r,minRotation:i}=n;const s=Ii(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,yr.A)(Uc,"id","category"),(0,yr.A)(Uc,"defaults",{ticks:{callback:Bc}});class Vc extends xl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ei(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=Pi(r),t=Pi(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Wc({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Li(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return gs(e,this.chart.options.locale,this.options.ticks.format)}}class qc extends Vc{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ri(e)?e:0,this.max=ri(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Ii(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,yr.A)(qc,"id","linear"),(0,yr.A)(qc,"defaults",{ticks:{callback:ms.formatters.numeric}});const Jc=e=>Math.floor(Ai(e)),Yc=(e,t)=>Math.pow(10,Jc(e)+t);function $c(e){return 1===e/Math.pow(10,Jc(e))}function Kc(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function Gc(e,t){let{min:n,max:r}=t;n=ii(e.min,n);const i=[],s=Jc(n);let a=function(e,t){let n=Jc(t-e);for(;Kc(e,t,n)>10;)n++;for(;Kc(e,t,n)<10;)n--;return Math.min(n,Jc(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),f=ii(e.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:$c(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+u+h*Math.pow(10,a))*o)/o;const g=ii(e.max,f);return i.push({value:g,major:$c(g),significand:h}),i}class Qc extends xl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Vc.prototype.parse.apply(this,[e,t]);if(0!==n)return ri(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ri(e)?Math.max(0,e):null,this.max=ri(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ri(this._userMin)&&(this.min=e===Yc(this.min,0)?Yc(this.min,-1):Yc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(Yc(n,-1)),s(Yc(r,1)))),n<=0&&i(Yc(r,-1)),r<=0&&s(Yc(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Gc({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Li(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":gs(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ai(e),this._valueRange=Ai(this.max)-Ai(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ai(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Xc(e){const t=e.ticks;if(t.display&&e.display){const e=Vs(t.backdropPadding);return si(t.font&&t.font.size,_s.font.size)+e.height}return 0}function Zc(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function ed(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?_i/s:0;for(let u=0;u<s;u++){const s=a.setContext(e.getPointLabelContext(u));i[u]=s.padding;const h=e.getPointPosition(u,e.drawingArea+i[u],o),f=qs(s.font),g=(l=e.ctx,c=f,d=ti(d=e._pointLabels[u])?d:[d],{w:Ss(l,c.string,d),h:d.length*c.lineHeight});r[u]=g;const p=Wi(e.getIndexAngle(u)+o),m=Math.round(Ri(p));td(n,t,p,Zc(m,h.x,g.w,0,180),Zc(m,h.y,g.h,90,270))}var l,c,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:Xc(s)/2,additionalAngle:a?_i/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=t[d];const i=nd(e,d,l);r.push(i),"auto"===o&&(i.visible=rd(i,c),i.visible&&(c=i))}return r}(e,r,i)}function td(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function nd(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(Ri(Wi(l.angle+Ei))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function rd(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(Ts({x:n,y:r},t)||Ts({x:n,y:s},t)||Ts({x:i,y:r},t)||Ts({x:i,y:s},t))}function id(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!ei(o)){const n=Hs(t.borderRadius),l=Vs(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=i-l.top,u=s-r+l.width,h=a-i+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Rs(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function sd(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,ki);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}(0,yr.A)(Qc,"id","logarithmic"),(0,yr.A)(Qc,"defaults",{ticks:{callback:ms.formatters.logarithmic,major:{enabled:!0}}});class ad extends Vc{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Vs(Xc(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ri(e)&&!isNaN(e)?e:0,this.max=ri(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Xc(this.options))}generateTickLabels(e){Vc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=oi(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?ed(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return Wi(e*(ki/(this._pointLabels.length||1))+Ii(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(ei(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ei(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Ys(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Ei+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),sd(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));id(n,s,t);const a=qs(s.font),{x:o,y:l,textAlign:c}=t;Is(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),sd(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}})),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=qs(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=Vs(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}Is(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}(0,yr.A)(ad,"id","radialLinear"),(0,yr.A)(ad,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ms.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,yr.A)(ad,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,yr.A)(ad,"descriptors",{angleLines:{_fallback:"grid"}});const od={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ld=Object.keys(od);function cd(e,t){return e-t}function dd(e,t){if(ei(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),ri(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!Di(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function ud(e,t,n,r){const i=ld.length;for(let s=ld.indexOf(e);s<i-1;++s){const e=od[ld[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return ld[s]}return ld[i-1]}function hd(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=Ji(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function fd(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class gd extends xl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new jo(e.adapters.date);r.init(t),gi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:dd(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=ri(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=ri(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?ud(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=ld.length-1;s>=ld.indexOf(n);s--){const n=ld[s];if(od[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return ld[n?ld.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=ld.indexOf(e)+1,n=ld.length;t<n;++t)if(od[ld[t]].common)return ld[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),fd(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=Vi(r,0,s),i=Vi(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||ud(i.minUnit,t,n,this._getLabelCapacity(t)),a=si(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=Di(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,a,s),u++)hd(c,d,f);return d!==n&&"ticks"!==r.bounds&&1!==u||hd(c,d,f),Object.keys(c).sort(cd).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return oi(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Ii(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,fd(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(dd(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Qi(e.sort(cd))}}function pd(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=Yi(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=Yi(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}(0,yr.A)(gd,"id","time"),(0,yr.A)(gd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class md extends gd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=pd(t,this.min),this._tableRange=pd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(pd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return pd(this._table,n*this._tableRange+this._minPos,!0)}}(0,yr.A)(md,"id","timeseries"),(0,yr.A)(md,"defaults",gd.defaults);const bd=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],yd="label";function xd(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function vd(e,t){e.labels=t}function wd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yd;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):(0,Me.A)({},t)}))}function _d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yd;const n={labels:[],datasets:[]};return vd(n,e.labels),wd(n,e.datasets,t),n}function kd(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,f=gt(e,bd),g=(0,i.useRef)(null),p=(0,i.useRef)(null),m=()=>{g.current&&(p.current=new Kl(g.current,{type:o,data:_d(l,a),options:c&&(0,Me.A)({},c),plugins:d}),xd(t,p.current))},b=()=>{xd(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,i.useEffect)((()=>{!s&&p.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(p.current,c)}),[s,c]),(0,i.useEffect)((()=>{!s&&p.current&&vd(p.current.config.data,l.labels)}),[s,l.labels]),(0,i.useEffect)((()=>{!s&&p.current&&l.datasets&&wd(p.current.config.data,l.datasets,a)}),[s,l.datasets]),(0,i.useEffect)((()=>{p.current&&(s?(b(),setTimeout(m)):p.current.update(h))}),[s,c,l.labels,l.datasets,h]),(0,i.useEffect)((()=>{p.current&&(b(),setTimeout(m))}),[o]),(0,i.useEffect)((()=>(m(),()=>b())),[]),i.createElement("canvas",(0,Me.A)({ref:g,role:"img",height:n,width:r},f),u)}const Sd=(0,i.forwardRef)(kd);function jd(e,t){return Kl.register(t),(0,i.forwardRef)(((t,n)=>i.createElement(Sd,(0,Me.A)((0,Me.A)({},t),{},{ref:n,type:e}))))}const Nd=jd("pie",vo);Kl.register(tc,Fc,kc);const Ed=function(e){let{expenses:t,categories:n=[]}=e;const r=t.filter((e=>!e.is_income)),i=t.filter((e=>e.is_income)),s=r.reduce(((e,t)=>{const{category:n,amount:r}=t;return e[n]=(e[n]||0)+r,e}),{}),a=i.reduce(((e,t)=>{const{category:n,amount:r}=t;return e[n]=(e[n]||0)+r,e}),{}),o=e=>{const t=[],r=[],i=[];return Object.keys(e).forEach((s=>{const a=(e=>{const t=n.find((t=>t.id===e));return t?{name:t.name,color:bt(t.color)||"gray"}:{name:e.charAt(0).toUpperCase()+e.slice(1),color:"gray"}})(s);t.push(a.name),r.push(e[s]),i.push(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8;const n={blue:"54, 162, 235",green:"75, 192, 192",yellow:"255, 206, 86",indigo:"153, 102, 255",purple:"153, 102, 255",pink:"255, 99, 132",lime:"201, 203, 207",rose:"255, 99, 132",teal:"75, 192, 192",cyan:"54, 162, 235",orange:"255, 159, 64",gray:"201, 203, 207",red:"255, 99, 132"};return"rgba(".concat(n[e]||n.gray,", ").concat(t,")")}(a.color))})),{labels:t,datasets:[{data:r,backgroundColor:i,borderColor:i.map((e=>e.replace("0.8","1"))),borderWidth:2,hoverBackgroundColor:i.map((e=>e.replace("0.8","0.9"))),hoverBorderWidth:3}]}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#D1D5DB",padding:20,font:{size:12},usePointStyle:!0,pointStyle:"circle"}},title:{display:!1},tooltip:{backgroundColor:"rgba(31, 41, 55, 0.9)",titleColor:"#F3F4F6",bodyColor:"#D1D5DB",borderColor:"#6B7280",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(t){const n=t.dataset.data.reduce(((e,t)=>e+t),0),r=n>0?(t.raw/n*100).toFixed(1):0,i=e?"+":"-";return"".concat(t.label,": ").concat(i," Rp ").concat(new Intl.NumberFormat("id-ID").format(t.raw)," (").concat(r,"%)")}}}},layout:{padding:{top:10,bottom:10}}}};return 0===t.length?null:(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object.keys(s).length>0&&(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,nt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,nt.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),(0,nt.jsx)("h2",{className:"text-xl font-semibold text-red-300",children:"Expenses by Category"})]}),(0,nt.jsx)("div",{style:{height:"350px"},children:(0,nt.jsx)(Nd,{data:o(s),options:l(!1)})})]}),Object.keys(a).length>0&&(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,nt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,nt.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),(0,nt.jsx)("h2",{className:"text-xl font-semibold text-green-300",children:"Income by Category"})]}),(0,nt.jsx)("div",{style:{height:"350px"},children:(0,nt.jsx)(Nd,{data:o(a),options:l(!0)})})]})]}),0===Object.keys(s).length&&0===Object.keys(a).length&&(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-300",children:"Transaction Breakdown"}),(0,nt.jsx)("p",{className:"text-gray-400",children:"No transactions to display. Start adding some expenses or income!"})]})]})};function Cd(e){let{open:t,onClose:n,onSave:r,category:s=null}=e;const[a,o]=(0,i.useState)(""),[l,c]=(0,i.useState)("blue"),[d,u]=(0,i.useState)("");(0,i.useEffect)((()=>{t&&(s?(o(s.name),c(bt(s.color)||"blue")):(o(""),c("blue")),u(""))}),[t,s]);return t?(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,nt.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:s?"Edit Category":"Add New Category"}),d&&(0,nt.jsx)("div",{className:"mb-4 text-sm text-red-500",children:d}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Name"}),(0,nt.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Category name",autoFocus:!0})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Preview"}),(0,nt.jsx)("div",{className:"mb-4",children:(0,nt.jsx)(vt,{color:l,children:a||"Category Preview"})})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Color"}),(0,nt.jsx)("div",{className:"grid grid-cols-6 gap-2",children:yt.map((e=>(0,nt.jsx)("button",{className:"w-8 h-8 rounded-full ".concat(mt(e)," ").concat(l===e?"ring-2 ring-offset-2 ring-offset-gray-800 ring-white":""),onClick:()=>c(e)},e)))})]}),(0,nt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500",onClick:n,children:"Cancel"}),(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",onClick:()=>{a.trim()?(r({name:a.trim(),color:mt(l)}),u("")):u("Name is required")},children:s?"Save Changes":"Add Category"})]})]})}):null}function Td(e){let{open:t,onClose:n,onSave:r,tag:s=null}=e;const[a,o]=(0,i.useState)(""),[l,c]=(0,i.useState)("blue"),[d,u]=(0,i.useState)("");(0,i.useEffect)((()=>{t&&(s?(o(s.name),c(s.color||"blue")):(o(""),c("blue")),u(""))}),[t,s]);return t?(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,nt.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:s?"Edit Tag":"Add New Tag"}),d&&(0,nt.jsx)("div",{className:"mb-4 text-sm text-red-500",children:d}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Name"}),(0,nt.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Tag name",autoFocus:!0})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Preview"}),(0,nt.jsx)("div",{className:"mb-4",children:(0,nt.jsx)(vt,{color:l,children:a||"Tag Preview"})})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Color"}),(0,nt.jsx)("div",{className:"grid grid-cols-6 gap-2",children:yt.map((e=>(0,nt.jsx)("button",{className:"w-8 h-8 rounded-full ".concat(mt(e)," ").concat(l===e?"ring-2 ring-offset-2 ring-offset-gray-800 ring-white":""),onClick:()=>c(e)},e)))})]}),(0,nt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500",onClick:n,children:"Cancel"}),(0,nt.jsx)("button",{type:"button",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",onClick:()=>{a.trim()?(r({name:a.trim(),color:l}),u("")):u("Name is required")},children:s?"Save Changes":"Add Tag"})]})]})}):null}const Ad=function(e){let{dbInitialized:t=!1}=e;const{user:n}=it(),[r,s]=(0,i.useState)("categories"),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(""),[h,f]=(0,i.useState)(!0),[g,p]=(0,i.useState)(!1),[m,b]=(0,i.useState)(!1),[y,x]=(0,i.useState)(null),[v,w]=(0,i.useState)(null),_=async()=>{try{if(t&&n){const e=await Ke.T0.getAll(n.id);o(e);const t=await Ke.d6.getAll(n.id);c(t)}else k()}catch(d){console.error("Error loading data:",d),k()}finally{f(!1)}};(0,i.useEffect)((()=>{_()}),[t,n]);const k=()=>{const e=localStorage.getItem("expense-categories");if(e)o(JSON.parse(e));else{const e=[{id:"food",name:"Food",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},{id:"transportation",name:"Transportation",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},{id:"entertainment",name:"Entertainment",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},{id:"utilities",name:"Utilities",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300"},{id:"housing",name:"Housing",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},{id:"healthcare",name:"Healthcare",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},{id:"other",name:"Other",color:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-300"}];o(e),localStorage.setItem("expense-categories",JSON.stringify(e))}const t=localStorage.getItem("expense-tags");if(t)c(JSON.parse(t));else{const e=[{id:"essential",name:"Essential",color:"blue"},{id:"recurring",name:"Recurring",color:"green"},{id:"emergency",name:"Emergency",color:"red"},{id:"personal",name:"Personal",color:"purple"},{id:"work",name:"Work",color:"indigo"}];c(e),localStorage.setItem("expense-tags",JSON.stringify(e))}};return(0,i.useEffect)((()=>{!t&&a.length>0&&localStorage.setItem("expense-categories",JSON.stringify(a))}),[a,t]),(0,i.useEffect)((()=>{!t&&l.length>0&&localStorage.setItem("expense-tags",JSON.stringify(l))}),[l,t]),h?(0,nt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,nt.jsx)("div",{className:"text-indigo-400",children:(0,nt.jsxs)("svg",{className:"animate-spin h-8 w-8 mr-3",viewBox:"0 0 24 24",children:[(0,nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,nt.jsx)("p",{className:"text-indigo-300",children:"Loading..."})]}):(0,nt.jsxs)("div",{className:"pb-20 mb-16",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold mb-6 text-indigo-300",children:"Settings"}),(0,nt.jsx)("div",{className:"mb-4 text-sm",children:(0,nt.jsxs)("span",{className:"inline-flex items-center text-gray-400",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Storage: ",t?"Supabase":"LocalStorage"]})}),(0,nt.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,nt.jsx)("button",{className:"py-2 px-4 font-medium ".concat("categories"===r?"text-indigo-400 border-b-2 border-indigo-400":"text-gray-400 hover:text-gray-300"),onClick:()=>s("categories"),children:"Categories"}),(0,nt.jsx)("button",{className:"py-2 px-4 font-medium ".concat("tags"===r?"text-indigo-400 border-b-2 border-indigo-400":"text-gray-400 hover:text-gray-300"),onClick:()=>s("tags"),children:"Tags"})]}),d&&(0,nt.jsx)("div",{className:"bg-red-900 text-white p-3 rounded mb-4",children:d}),"categories"===r&&(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white",children:"Categories"}),(0,nt.jsx)("button",{onClick:()=>{x(null),p(!0)},className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors duration-300",children:"Add Category"})]}),(0,nt.jsx)("div",{className:"p-4 flex flex-wrap gap-2 mb-4 border-b border-gray-700",children:a.map((e=>(0,nt.jsx)(vt,{color:bt(e.color),children:e.name},e.id)))}),0===a.length?(0,nt.jsx)("div",{className:"p-4 text-gray-400",children:"No categories defined."}):(0,nt.jsx)("ul",{children:a.map((e=>(0,nt.jsx)("li",{className:"border-b border-gray-700 last:border-b-0",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,nt.jsxs)("div",{className:"text-gray-400 text-sm",children:["ID: ",e.id]})]}),(0,nt.jsxs)("div",{className:"flex gap-2",children:[(0,nt.jsx)("button",{onClick:()=>{x(e),p(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors duration-300",children:"Edit"}),(0,nt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{if(t&&n){await Ke.T0.delete(e,n.id);const t=await Ke.T0.getAll(n.id);o(t)}else{const t=a.filter((t=>t.id!==e));o(t),localStorage.setItem("expense-categories",JSON.stringify(t))}}catch(d){console.error("Error deleting category:",d),u("Failed to delete category. Please try again.")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-300",children:"Delete"})]})]})},e.id)))})]}),"tags"===r&&(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white",children:"Tags"}),(0,nt.jsx)("button",{onClick:()=>{w(null),b(!0)},className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors duration-300",children:"Add Tag"})]}),(0,nt.jsx)("div",{className:"p-4 flex flex-wrap gap-2 mb-4 border-b border-gray-700",children:l.map((e=>(0,nt.jsx)(vt,{color:e.color,children:e.name},e.id)))}),0===l.length?(0,nt.jsx)("div",{className:"p-4 text-gray-400",children:"No tags defined."}):(0,nt.jsx)("ul",{children:l.map((e=>(0,nt.jsx)("li",{className:"border-b border-gray-700 last:border-b-0",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,nt.jsxs)("div",{className:"text-gray-400 text-sm",children:["ID: ",e.id]})]}),(0,nt.jsxs)("div",{className:"flex gap-2",children:[(0,nt.jsx)("button",{onClick:()=>{w(e),b(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors duration-300",children:"Edit"}),(0,nt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this tag?"))try{if(t&&n){await Ke.d6.delete(e,n.id);const t=await Ke.d6.getAll(n.id);c(t)}else{const t=l.filter((t=>t.id!==e));c(t),localStorage.setItem("expense-tags",JSON.stringify(t))}}catch(d){console.error("Error deleting tag:",d),u("Failed to delete tag. Please try again.")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-300",children:"Delete"})]})]})},e.id)))})]}),(0,nt.jsx)(Cd,{open:g,onClose:()=>{p(!1),x(null)},onSave:async e=>{try{y?await Ke.T0.update((0,Me.A)((0,Me.A)({},e),{},{id:y.id}),n.id):await Ke.T0.add(e,n.id),await _(),p(!1),x(null)}catch(d){console.error("Error saving category:",d),alert("Failed to save category. Please try again.")}},category:y}),(0,nt.jsx)(Td,{open:m,onClose:()=>{b(!1),w(null)},onSave:async e=>{try{v?await Ke.d6.update((0,Me.A)((0,Me.A)({},e),{},{id:v.id}),n.id):await Ke.d6.add(e,n.id),await _(),b(!1),w(null)}catch(d){console.error("Error saving tag:",d),alert("Failed to save tag. Please try again.")}},tag:v})]})};const Pd=function(e){let{isOpen:t,onClose:n,children:r}=e;return(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return t&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[t,n]),(0,i.useEffect)((()=>(document.body.style.overflow=t?"hidden":"",()=>{document.body.style.overflow=""})),[t]),t?(0,nt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:n,children:(0,nt.jsx)("div",{className:"relative max-w-lg w-full h-[80vh] flex flex-col bg-gray-800 rounded-lg shadow-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:r})}):null},Od=e=>{let{dbInitialized:t,refresh:n=0}=e;const{user:r}=it(),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)([]),[c,d]=(0,i.useState)({}),[u,h]=(0,i.useState)(!0),[f,g]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[b,y]=(0,i.useState)((()=>{const e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))})),[x,v]=(0,i.useState)({category:"",amount:"",period:"monthly",startDate:(new Date).toISOString().slice(0,10),notes:""});(0,i.useEffect)((()=>{(async()=>{h(!0);try{if(t&&r){const e=await Ke.T0.getAll(r.id);l(e);const t=await Ke.mh.getAll(r.id);a(t),await w()}else{const e=JSON.parse(localStorage.getItem("expense-categories")||"[]");l(e.length>0?e:k());const t=JSON.parse(localStorage.getItem("budgets")||"[]");a(t);const n=JSON.parse(localStorage.getItem("expenses")||"[]");_(n)}}catch(e){console.error("Error loading budget data:",e)}finally{h(!1)}})()}),[t,b,n,r]);const w=async()=>{try{const e=await Ke.expenseDB.getAll(r.id);_(e)}catch(e){console.error("Error loading expenses for budget:",e)}},_=e=>{const[t,n]=b.split("-").map(Number),r=e.filter((e=>{if(!e.date)return!1;const r=new Date(e.date);return r.getFullYear()===t&&r.getMonth()===n-1&&!e.is_income})).reduce(((e,t)=>{const n=t.category||"other";return e[n]||(e[n]={total:0,expenses:[]}),e[n].total+=parseFloat(t.amount||0),e[n].expenses.push(t),e}),{});d(r)},k=()=>[{id:"food",name:"Food"},{id:"transportation",name:"Transportation"},{id:"entertainment",name:"Entertainment"},{id:"utilities",name:"Utilities"},{id:"housing",name:"Housing"},{id:"healthcare",name:"Healthcare"},{id:"other",name:"Other"}],S=e=>{const{name:t,value:n}=e.target;v((e=>(0,Me.A)((0,Me.A)({},e),{},{[t]:n})))},j=()=>{m(null),v({category:o.length>0?o[0].id:"",amount:"",period:"monthly",startDate:(new Date).toISOString().slice(0,10),notes:""}),g(!0)},N=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),E=e=>{const t=o.find((t=>t.id===e));return t?t.name:e};return u?(0,nt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,nt.jsx)("div",{className:"text-indigo-400",children:(0,nt.jsxs)("svg",{className:"animate-spin h-10 w-10 mr-3",viewBox:"0 0 24 24",children:[(0,nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,nt.jsx)("p",{className:"text-indigo-300 text-lg font-medium",children:"Loading budgets..."})]}):(0,nt.jsxs)("div",{className:"py-4 pb-24 md:pb-6",children:[(0,nt.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[(0,nt.jsx)("h2",{className:"text-xl md:text-2xl font-semibold text-indigo-300 mb-4 md:mb-0",children:"Budget Manager"}),(0,nt.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[(0,nt.jsx)("div",{className:"w-full sm:w-auto",children:(0,nt.jsx)("input",{type:"month",value:b,onChange:e=>{y(e.target.value)},className:"w-full rounded-md bg-gray-800 border border-gray-700 text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})}),(0,nt.jsxs)("button",{onClick:j,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors flex items-center justify-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Budget"]})]})]}),0===s.length?(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 sm:p-8 text-center border border-gray-700",children:[(0,nt.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,nt.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Budgets Set"}),(0,nt.jsx)("p",{className:"text-gray-400 mb-6",children:"Start managing your finances by setting up a budget for different categories."}),(0,nt.jsx)("button",{onClick:j,className:"px-6 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Create Your First Budget"})]}):(0,nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:s.map((e=>{const n=(e=>{const t=(c[e.category]||{total:0}).total/parseFloat(e.amount)*100;return Math.min(t,100)})(e),i=(e=>(c[e.category]||{total:0}).total>parseFloat(e.amount))(e),s=c[e.category]||{total:0};return(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6 border border-gray-700 relative",children:[i&&(0,nt.jsx)("div",{className:"absolute top-3 right-3 bg-red-900/70 text-red-300 text-xs sm:text-sm px-2 sm:px-3 py-1 rounded-full font-medium",children:"Over Budget"}),(0,nt.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("h3",{className:"text-base md:text-lg font-semibold text-white",children:E(e.category)}),(0,nt.jsx)("p",{className:"text-gray-400 text-xs md:text-sm",children:"monthly"===e.period?"Monthly Budget":"Weekly Budget"})]}),(0,nt.jsxs)("div",{className:"flex space-x-2",children:[(0,nt.jsx)("button",{onClick:()=>(e=>{m(e),v({category:e.category,amount:e.amount,period:e.period||"monthly",startDate:e.startDate||(new Date).toISOString().slice(0,10),notes:e.notes||""}),g(!0)})(e),className:"p-1.5 md:p-2 text-gray-400 hover:text-white transition-colors","aria-label":"Edit budget",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),(0,nt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this budget?"))try{if(t&&r){await Ke.mh.delete(e,r.id);const t=await Ke.mh.getAll(r.id);a(t)}else{const t=JSON.parse(localStorage.getItem("budgets")||"[]").filter((t=>t.id!==e));localStorage.setItem("budgets",JSON.stringify(t)),a(t)}}catch(n){console.error("Error deleting budget:",n),alert("Failed to delete budget. Please try again.")}})(e.id),className:"p-1.5 md:p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Delete budget",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,nt.jsx)("div",{className:"font-semibold text-white text-sm md:text-base",children:N(s.total)}),(0,nt.jsxs)("div",{className:"text-gray-400 text-sm md:text-base",children:["of ",N(e.amount)]})]}),(0,nt.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 md:h-3 mb-1",children:(0,nt.jsx)("div",{className:"h-2.5 md:h-3 rounded-full ".concat(n>90?"bg-red-500":n>70?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(n,"%")}})}),(0,nt.jsx)("div",{className:"text-xs text-gray-400",children:i?"".concat(N(s.total-e.amount)," over budget"):"".concat(N(e.amount-s.total)," remaining")})]}),e.notes&&(0,nt.jsx)("div",{className:"text-xs md:text-sm text-gray-400 mt-3 border-t border-gray-700 pt-2 md:pt-3",children:(0,nt.jsx)("p",{children:e.notes})})]},e.id)}))}),(0,nt.jsx)(Pd,{isOpen:f,onClose:()=>g(!1),children:(0,nt.jsxs)("div",{className:"p-6",children:[(0,nt.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:p?"Edit Budget":"Add New Budget"}),(0,nt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!x.category||!x.amount)return void alert("Please enter both category and amount.");const n={category:x.category,amount:parseFloat(x.amount),period:x.period,start_date:x.startDate,notes:x.notes,created_at:(new Date).toISOString()};try{if(p)if(n.id=p.id,t&&r)await Ke.mh.update(n,r.id);else{const e=JSON.parse(localStorage.getItem("budgets")||"[]").map((e=>e.id===p.id?n:e));localStorage.setItem("budgets",JSON.stringify(e)),a(e)}else if(t&&r)await Ke.mh.add(n,r.id);else{n.id=Date.now();const e=JSON.parse(localStorage.getItem("budgets")||"[]");e.push(n),localStorage.setItem("budgets",JSON.stringify(e)),a(e)}if(t&&r){const e=await Ke.mh.getAll(r.id);a(e)}g(!1)}catch(i){console.error("Error saving budget:",i),alert("Failed to save budget. Please try again.")}},children:[(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Category"}),(0,nt.jsx)("select",{name:"category",value:x.category,onChange:S,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:o.map((e=>(0,nt.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Budget Amount"}),(0,nt.jsx)("input",{type:"number",name:"amount",value:x.amount,onChange:S,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0",min:"0",required:!0})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Period"}),(0,nt.jsxs)("select",{name:"period",value:x.period,onChange:S,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,nt.jsx)("option",{value:"monthly",children:"Monthly"}),(0,nt.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Start Date"}),(0,nt.jsx)("input",{type:"date",name:"startDate",value:x.startDate,onChange:S,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Notes (Optional)"}),(0,nt.jsx)("textarea",{name:"notes",value:x.notes,onChange:S,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:"3",placeholder:"Add any details or reminders about this budget"})]}),(0,nt.jsxs)("div",{className:"flex justify-end",children:[(0,nt.jsx)("button",{type:"button",onClick:()=>g(!1),className:"mr-4 px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,nt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:p?"Save Changes":"Create Budget"})]})]})]})})]})},Md=e=>{let{dbInitialized:t,refreshWallets:n}=e;const[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[g,p]=(0,i.useState)(""),[m,b]=(0,i.useState)(null),[y,x]=(0,i.useState)(null),[v,w]=(0,i.useState)(""),_=(0,i.useRef)(!0),{user:k}=it(),[S,j]=(0,i.useState)({fromWallet:"",toWallet:"",amount:"",date:(new Date).toISOString().slice(0,10),notes:"",photoUrl:""});(0,i.useEffect)((()=>{_.current=!0;return(()=>{try{const e=JSON.parse(localStorage.getItem("wallets")||"[]"),t=JSON.parse(localStorage.getItem("wallet-transfers")||"[]");e.length>0?s(e):s(E()),t.length>0&&o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date)))),console.log("Loaded initial data from localStorage:",{wallets:e.length,transfers:t.length})}catch(g){console.error("Error loading initial localStorage data:",g),s(E()),o([])}})(),()=>{_.current=!1}}),[]),(0,i.useEffect)((()=>{(async()=>{if(!_.current)return;c(!0);const e=setTimeout((()=>{if(_.current){console.warn("Loading timeout reached, forcing localStorage fallback"),c(!1);const e=JSON.parse(localStorage.getItem("wallets")||"[]");s(e.length>0?e:E());const t=JSON.parse(localStorage.getItem("wallet-transfers")||"[]");o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}),1e3);try{if(t&&null!==k&&void 0!==k&&k.id){const e=await Ke.qF.getAll(k.id);_.current&&s(e);try{const e=await Ke.transferDB.getAll(k.id);_.current&&o(e.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}catch(n){console.error("Error loading transfers:",n),_.current&&o([]);const e=JSON.parse(localStorage.getItem("wallet-transfers")||"[]");_.current&&o(e.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}else{console.log("Loading from localStorage - dbInitialized:",t,"user:",!!k);const e=JSON.parse(localStorage.getItem("wallets")||"[]");_.current&&s(e.length>0?e:E());const n=JSON.parse(localStorage.getItem("wallet-transfers")||"[]");_.current&&o(n.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}catch(g){if(console.error("Error loading wallet data:",g),_.current){p("Failed to load wallets. Please try again.");const e=JSON.parse(localStorage.getItem("wallets")||"[]");s(e.length>0?e:E());const t=JSON.parse(localStorage.getItem("wallet-transfers")||"[]");o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}finally{clearTimeout(e),_.current&&c(!1)}})()}),[t,k]);const N=()=>{c(!1),p(""),0===r.length&&s(E()),0===a.length&&o([])},E=()=>[{id:"cash",name:"Cash",type:"cash",balance:0},{id:"bank",name:"Bank Account",type:"bank",balance:0},{id:"credit",name:"Credit Card",type:"credit_card",balance:0},{id:"ewallet",name:"E-Wallet",type:"e_wallet",balance:0}],C=e=>{const{name:t,value:n}=e.target;j((e=>(0,Me.A)((0,Me.A)({},e),{},{[t]:n}))),g&&p("")},T=()=>{b(null),j({fromWallet:r.length>=2?r[0].id:"",toWallet:r.length>=2?r[1].id:"",amount:"",date:(new Date).toISOString().slice(0,10),notes:"",photoUrl:""}),x(null),w(""),f(!0)},A=async e=>{if(e.preventDefault(),!S.fromWallet||!S.toWallet||!S.amount)return void p("Please fill in all required fields");if(S.fromWallet===S.toWallet)return void p("Source and destination wallets cannot be the same");const t=parseFloat(S.amount);if(t<=0)p("Amount must be greater than 0");else{u(!0),p("");try{if(m){const e=pr(k),n=await e.updateWalletTransfer(m.id,{fromWallet:S.fromWallet,toWallet:S.toWallet,amount:t,date:S.date||(new Date).toISOString().slice(0,10),notes:S.notes||"",photoUrl:v||""});if(console.log("Transfer updated successfully:",n),_.current){const e=await Ke.qF.getAll(k.id);s(e);const t=await Ke.transferDB.getAll(k.id);o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}else{const e=pr(k),n=await e.executeWalletTransfer({fromWallet:S.fromWallet,toWallet:S.toWallet,amount:t,date:S.date||(new Date).toISOString().slice(0,10),notes:S.notes||"",photoUrl:v||""});if(console.log("Transfer created successfully:",n),_.current){const e=await Ke.qF.getAll(k.id);s(e);const t=await Ke.transferDB.getAll(k.id);o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}_.current&&(j({fromWallet:"",toWallet:"",amount:"",date:(new Date).toISOString().slice(0,10),notes:"",photoUrl:""}),x(null),w(""),b(null),f(!1)),n&&n()}catch(g){console.error("Error processing transfer:",g),p(g.message||"Failed to process transfer. Please try again.")}finally{u(!1)}}},P=e=>mr.formatBalance(e),O=e=>{const t=r.find((t=>t.id===e));return t?t.name:e};return l?(0,nt.jsxs)("div",{className:"py-4",children:[(0,nt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,nt.jsx)("div",{className:"text-indigo-400",children:(0,nt.jsxs)("svg",{className:"animate-spin h-10 w-10 mr-3",viewBox:"0 0 24 24",children:[(0,nt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,nt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,nt.jsx)("p",{className:"text-indigo-300 text-lg font-medium",children:"Loading wallet data..."})]}),(0,nt.jsxs)("div",{className:"text-center mt-4",children:[(0,nt.jsx)("p",{className:"text-gray-500 text-sm",children:"Taking too long?"}),(0,nt.jsx)("button",{onClick:N,className:"mt-2 text-sm bg-gray-700 text-red-400 px-3 py-1.5 rounded hover:bg-gray-600",children:"Skip Loading"})]})]}):(0,nt.jsxs)("div",{className:"py-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold text-indigo-300",children:"Wallet Transfers"}),(0,nt.jsxs)("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors flex items-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"New Transfer"]})]}),g&&(0,nt.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-800 rounded-md",children:(0,nt.jsxs)("div",{className:"flex items-start",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,nt.jsxs)("div",{className:"flex-1",children:[(0,nt.jsx)("p",{className:"text-red-400 text-sm",children:g}),g.includes("NotFoundError")||g.includes("database")?(0,nt.jsx)("button",{onClick:async()=>{if(window.confirm("This will refresh the page. Continue?"))try{window.location.reload()}catch(g){console.error("Error resetting:",g),c(!1)}},className:"mt-2 text-xs bg-red-800 text-red-200 px-3 py-1 rounded hover:bg-red-700 transition-colors",children:"Reset Database Schema"}):null]})]})}),0===a.length?(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center border border-gray-700",children:[(0,nt.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,nt.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Transfer History"}),(0,nt.jsx)("p",{className:"text-gray-400 mb-6",children:"Transfer money between your wallets to keep track of all your funds."}),(0,nt.jsx)("button",{onClick:T,className:"px-6 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Make Your First Transfer"})]}):(0,nt.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:(0,nt.jsx)("div",{className:"space-y-4",children:a.map((e=>{return(0,nt.jsxs)("div",{className:"p-4 rounded-lg cursor-pointer transition-transform hover:scale-[1.01] hover:shadow-md bg-gray-700/80 border-l-4 border-indigo-500",onClick:()=>(e=>{b(e),j({fromWallet:e.fromWallet,toWallet:e.toWallet,amount:e.amount.toString(),date:e.date,notes:e.notes||"",photoUrl:e.photoUrl||""}),e.photoUrl?w(e.photoUrl):w(""),x(null),f(!0)})(e),children:[(0,nt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsxs)("div",{className:"font-medium text-white",children:[e.fromWalletName||O(e.fromWallet)," \u2192 ",e.toWalletName||O(e.toWallet)]}),(0,nt.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Wallet Transfer"})]}),(0,nt.jsx)("div",{className:"font-medium mr-3 text-indigo-400",children:P(e.amount)})]}),e.notes&&(0,nt.jsxs)("div",{className:"text-sm text-gray-400 mt-2 bg-gray-800/50 p-2 rounded",children:[(0,nt.jsx)("span",{className:"font-medium text-xs text-gray-500 block mb-1",children:"Notes:"}),e.notes]}),e.photoUrl&&(0,nt.jsx)("div",{className:"mt-3",children:(0,nt.jsx)("img",{src:e.photoUrl,alt:"Transfer receipt",className:"max-h-32 rounded-md object-cover"})}),(0,nt.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,nt.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,nt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-900 text-indigo-300",children:"Transfer"})}),(0,nt.jsx)("div",{className:"flex items-center",children:(0,nt.jsx)("div",{className:"text-xs text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))})})]})]},e.id);var t}))})}),(0,nt.jsx)(Pd,{isOpen:h,onClose:()=>f(!1),children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg w-full max-w-md flex flex-col h-[80vh]",children:[(0,nt.jsx)("div",{className:"sticky top-0 left-0 right-0 px-6 py-4 bg-gray-800 border-b border-gray-700 z-10",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold text-indigo-300",children:m?"Edit Transfer":"New Transfer"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full bg-gray-700 bg-opacity-50",onClick:()=>f(!1),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,nt.jsxs)("div",{className:"p-6 pt-2 flex-1 overflow-auto",children:[g&&(0,nt.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-800 rounded-md",children:(0,nt.jsx)("p",{className:"text-red-400 text-sm",children:g})}),(0,nt.jsxs)("form",{onSubmit:A,children:[(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"From Wallet"}),(0,nt.jsxs)("select",{name:"fromWallet",value:S.fromWallet,onChange:C,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,nt.jsx)("option",{value:"",disabled:!0,children:"Select source wallet"}),r.map((e=>(0,nt.jsxs)("option",{value:e.id,children:[e.name," (",P(e.balance),")"]},"from-".concat(e.id))))]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"To Wallet"}),(0,nt.jsxs)("select",{name:"toWallet",value:S.toWallet,onChange:C,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,nt.jsx)("option",{value:"",disabled:!0,children:"Select destination wallet"}),r.map((e=>(0,nt.jsx)("option",{value:e.id,children:e.name},"to-".concat(e.id))))]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Amount"}),(0,nt.jsx)("input",{type:"number",name:"amount",value:S.amount,onChange:C,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0",min:"0.01",step:"0.01",required:!0})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Date"}),(0,nt.jsx)("input",{type:"date",name:"date",value:S.date,onChange:C,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Notes (Optional)"}),(0,nt.jsx)("textarea",{name:"notes",value:S.notes,onChange:C,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 min-h-[80px]",placeholder:"Add any details about this transfer"})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-2 font-medium text-gray-300",children:"Photo (Optional)"}),(0,nt.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700 border-dashed rounded-md",children:(0,nt.jsx)("div",{className:"space-y-1 text-center",children:v?(0,nt.jsxs)("div",{children:[(0,nt.jsx)("img",{src:v,alt:"Receipt preview",className:"mx-auto h-32 w-auto rounded"}),(0,nt.jsx)("button",{type:"button",onClick:()=>{x(null),w(""),j((e=>(0,Me.A)((0,Me.A)({},e),{},{photoUrl:""})))},className:"mt-2 inline-flex items-center px-2.5 py-1.5 border border-gray-600 text-xs font-medium rounded text-red-300 bg-gray-800 hover:bg-gray-700",children:"Remove Image"})]}):(0,nt.jsxs)("div",{children:[(0,nt.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-500",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,nt.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,nt.jsxs)("div",{className:"flex text-sm text-gray-400",children:[(0,nt.jsxs)("label",{className:"relative cursor-pointer bg-gray-800 rounded-md font-medium text-indigo-300 hover:text-indigo-400",children:[(0,nt.jsx)("span",{children:"Upload receipt"}),(0,nt.jsx)("input",{type:"file",className:"sr-only",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){x(t);const e=new FileReader;e.onloadend=()=>{w(e.result)},e.readAsDataURL(t)}}})]}),(0,nt.jsx)("p",{className:"pl-1",children:"or drag and drop"})]}),(0,nt.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})})]}),(0,nt.jsx)("div",{className:"pb-2"})]})]}),(0,nt.jsx)("div",{className:"sticky bottom-0 left-0 right-0 px-6 py-4 bg-gray-800 border-t border-gray-700 shadow-lg",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[m&&(0,nt.jsx)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this transfer?"))try{const i=a.find((t=>t.id===e));if(!i)return void(_.current&&p("Transfer not found."));const l=r.find((e=>e.id===i.fromWallet)),c=r.find((e=>e.id===i.toWallet));if(!l||!c)throw new Error("One or both wallets involved in this transfer no longer exist.");if(t&&k){const t=pr(k),n=await t.deleteWalletTransfer(e);if(console.log("Transfer deleted via WalletOperations:",n),_.current){const e=await Ke.qF.getAll(k.id);s(e);const t=await Ke.transferDB.getAll(k.id);o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}}else{const t=JSON.parse(localStorage.getItem("wallet-transfers")||"[]").filter((t=>t.id!==e));localStorage.setItem("wallet-transfers",JSON.stringify(t));const n=JSON.parse(localStorage.getItem("wallets")||"[]"),r=n.findIndex((e=>e.id===i.fromWallet)),a=n.findIndex((e=>e.id===i.toWallet));-1!==r&&-1!==a&&(n[r].balance=mr.addToBalance(n[r].balance,i.amount),n[a].balance=mr.subtractFromBalance(n[a].balance,i.amount),localStorage.setItem("wallets",JSON.stringify(n)),s(n)),_.current&&o(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}n&&n(),_.current&&m&&m.id===e&&(b(null),f(!1),j({fromWallet:"",toWallet:"",amount:"",date:(new Date).toISOString().slice(0,10),notes:"",photoUrl:""}),x(null),w(""))}catch(g){console.error("Error deleting transfer:",g),_.current&&p("Failed to delete transfer. Please try again.")}})(m.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-300",children:"Delete"}),!m&&(0,nt.jsx)("div",{}),(0,nt.jsxs)("div",{className:"flex gap-2",children:[(0,nt.jsx)("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-300",children:"Cancel"}),(0,nt.jsx)("button",{type:"button",onClick:A,className:"px-4 py-2 text-white rounded-md transition-colors duration-300 bg-indigo-600 hover:bg-indigo-700",children:m?"Save Changes":"Complete Transfer"})]})]})})]})})]})};const Dd=function(e){let{activeTab:t,onChange:n}=e;return(0,nt.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-800 z-30 md:hidden",children:(0,nt.jsxs)("div",{className:"grid grid-cols-5 max-w-lg mx-auto",children:[(0,nt.jsxs)("button",{onClick:()=>n("home"),className:"flex flex-col items-center py-3 ".concat("home"===t?"text-indigo-400":"text-gray-500 hover:text-gray-300"),children:[(0,nt.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,nt.jsx)("span",{className:"text-xs mt-1",children:"Home"})]}),(0,nt.jsxs)("button",{onClick:()=>n("wallets"),className:"flex flex-col items-center py-3 ".concat("wallets"===t?"text-indigo-400":"text-gray-500 hover:text-gray-300"),children:[(0,nt.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,nt.jsx)("span",{className:"text-xs mt-1",children:"Wallets"})]}),(0,nt.jsxs)("button",{onClick:()=>n("transactions"),className:"flex flex-col items-center py-3 ".concat("transactions"===t?"text-indigo-400":"text-gray-500 hover:text-gray-300"),children:[(0,nt.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,nt.jsx)("span",{className:"text-xs mt-1",children:"Transactions"})]}),(0,nt.jsxs)("button",{onClick:()=>n("budgets"),className:"flex flex-col items-center py-3 ".concat("budgets"===t?"text-indigo-400":"text-gray-500 hover:text-gray-300"),children:[(0,nt.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a1 1 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,nt.jsx)("span",{className:"text-xs mt-1",children:"Budgets"})]}),(0,nt.jsxs)("button",{onClick:()=>n("settings"),className:"flex flex-col items-center py-3 ".concat("settings"===t?"text-indigo-400":"text-gray-500 hover:text-gray-300"),children:[(0,nt.jsxs)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,nt.jsx)("span",{className:"text-xs mt-1",children:"Settings"})]})]})})};const Ld=function(e){let{onClick:t}=e;return(0,nt.jsx)("button",{className:"fixed right-6 bottom-24 md:bottom-8 w-14 h-14 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg flex items-center justify-center z-40 transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-50",onClick:t,"aria-label":"Add new expense",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})},Id=e=>{let{className:t=""}=e;const{user:n}=it(),[r,s]=(0,i.useState)(null),[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[h,f]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(n){const e=(e=>new Ge(e))(n);s(e);const t=()=>{o(e.getSyncStatus())};t();const r=setInterval(t,3e4);return()=>clearInterval(r)}}),[n]);const g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bidirectional";if(r){u(!0),f(null);try{const t=await r.fullSync(e);o(r.getSyncStatus()),f(t);const n=Object.values(t.stats).reduce(((e,t)=>e+(t.uploaded||0)+(t.downloaded||0)),0);n>0?alert("Sync completed! ".concat(n," items synced.")):alert("Sync completed! Everything is up to date.")}catch(t){console.error("Sync failed:",t),o(r.getSyncStatus()),alert("Sync failed: ".concat(t.message))}finally{u(!1)}}};if(!n||!a)return null;const p=a.inProgress||d;return(0,nt.jsxs)("div",{className:"relative ".concat(t),children:[(0,nt.jsxs)("button",{onClick:()=>c(!l),disabled:p,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-gray-300 hover:bg-gray-800 hover:text-white transition-colors duration-200 text-sm disabled:opacity-50",children:[(0,nt.jsx)("span",{className:"text-lg ".concat(p?"animate-spin":""),children:p?"\ud83d\udd04":Xe(a)}),(0,nt.jsx)("span",{className:"hidden md:block",children:p?"Syncing...":Qe(a)})]}),l&&(0,nt.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-2 z-50",children:[(0,nt.jsxs)("div",{className:"px-4 py-2 border-b border-gray-700",children:[(0,nt.jsx)("p",{className:"text-sm font-medium text-white",children:"Sync Status"}),(0,nt.jsx)("p",{className:"text-xs text-gray-400",children:p?"Syncing...":Qe(a)}),a.lastSync&&(0,nt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Last sync: ",Ze(a.lastSync)]}),a.errors.length>0&&(0,nt.jsxs)("p",{className:"text-xs text-red-400 mt-1",children:[a.errors.length," error(s)"]})]}),(0,nt.jsxs)("button",{onClick:()=>g("bidirectional"),disabled:p||!a.isOnline,className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center disabled:opacity-50",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Full Sync",!a.isOnline&&(0,nt.jsx)("span",{className:"ml-auto text-xs",children:"(Offline)"})]}),(0,nt.jsxs)("button",{onClick:()=>g("upload"),disabled:p||!a.isOnline,className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center disabled:opacity-50",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload to Cloud",!a.isOnline&&(0,nt.jsx)("span",{className:"ml-auto text-xs",children:"(Offline)"})]}),(0,nt.jsxs)("button",{onClick:()=>g("download"),disabled:p||!a.isOnline,className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center disabled:opacity-50",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Download from Cloud",!a.isOnline&&(0,nt.jsx)("span",{className:"ml-auto text-xs",children:"(Offline)"})]}),(0,nt.jsxs)("div",{className:"border-t border-gray-700 mt-2 pt-2",children:[(0,nt.jsxs)("button",{onClick:async()=>{if(r){u(!0);try{const e=await r.exportLocalData(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="expense-tracker-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),alert("Backup exported successfully! ".concat(e.metadata.totalExpenses," expenses, ").concat(e.metadata.totalWallets," wallets, and more."))}catch(e){console.error("Export failed:",e),alert("Export failed: ".concat(e.message))}finally{u(!1)}}},disabled:p,className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center disabled:opacity-50",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Backup"]}),(0,nt.jsxs)("label",{className:"w-full cursor-pointer",children:[(0,nt.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Backup"]}),(0,nt.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t||!r)return;u(!0);const n=new FileReader;n.onload=async t=>{try{const e=JSON.parse(t.target.result);if(window.confirm("This will replace all local data with the backup. Are you sure? This cannot be undone.")){const t=await r.importLocalData(e);o(r.getSyncStatus());const n=Object.values(t.stats).reduce(((e,t)=>e+(t.imported||0)),0);alert("Data imported successfully! ".concat(n," items restored.")),window.location.reload()}}catch(n){console.error("Import failed:",n),alert("Import failed: ".concat(n.message))}finally{u(!1),e.target.value=""}},n.readAsText(t)},disabled:p,className:"hidden"})]})]}),a.errors.length>0&&(0,nt.jsxs)("div",{className:"border-t border-gray-700 mt-2 pt-2 px-4 py-2",children:[(0,nt.jsx)("p",{className:"text-xs text-red-400 mb-1",children:"Recent Errors:"}),a.errors.slice(-2).map(((e,t)=>(0,nt.jsx)("p",{className:"text-xs text-gray-400 truncate",children:e.message},t)))]})]}),l&&(0,nt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})},Rd=["children","href","current","className","onClick"];function Fd(e){let{children:t,href:n,current:r=!1,className:i="",onClick:s}=e,a=gt(e,Rd);const o="py-2 px-3 rounded-md flex items-center gap-2 text-sm font-medium transition-colors duration-200",l=r?"bg-indigo-600 text-white hover:bg-indigo-700":"text-gray-300 hover:bg-gray-800 hover:text-white";return n?(0,nt.jsx)("a",(0,Me.A)((0,Me.A)({href:n,className:"".concat(o," ").concat(l," ").concat(i)},a),{},{children:t})):(0,nt.jsx)("button",(0,Me.A)((0,Me.A)({className:"".concat(o," ").concat(l," ").concat(i),onClick:s,type:"button"},a),{},{children:t}))}const zd=e=>{let{user:t,signOut:n,activeTab:r,setActiveTab:s,setIsModalOpen:a,className:o=""}=e;const[l,c]=(0,i.useState)(!1),d=(0,i.useRef)(null);(0,i.useEffect)((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const u=()=>null!==t&&void 0!==t&&t.email?t.email.split("@")[0]:"User";return(0,nt.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-30 bg-gray-900 border-b border-gray-800 px-4 py-3 ".concat(o),children:(0,nt.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,nt.jsx)("div",{className:"flex items-center",children:(0,nt.jsx)("h1",{className:"text-xl font-bold text-indigo-400",children:"ExpenseTracker"})}),(0,nt.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,nt.jsxs)(Fd,{current:"home"===r,onClick:()=>s("home"),children:[(0,nt.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),(0,nt.jsxs)(Fd,{current:"wallets"===r,onClick:()=>s("wallets"),children:[(0,nt.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Wallets"]}),(0,nt.jsxs)(Fd,{current:"transactions"===r,onClick:()=>s("transactions"),children:[(0,nt.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Transactions"]}),(0,nt.jsxs)(Fd,{current:"budgets"===r,onClick:()=>s("budgets"),children:[(0,nt.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a1 1 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Budgets"]})]}),(0,nt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,nt.jsx)(Id,{}),(0,nt.jsxs)("button",{onClick:()=>a(!0),className:"hidden md:flex items-center px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200 text-sm font-medium",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]}),(0,nt.jsxs)("div",{className:"relative",ref:d,children:[(0,nt.jsxs)("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-gray-300 hover:bg-gray-800 hover:text-white transition-colors duration-200",children:[(0,nt.jsx)("div",{className:"h-8 w-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:u().charAt(0).toUpperCase()}),(0,nt.jsx)("span",{className:"hidden md:block text-sm font-medium",children:u()}),(0,nt.jsx)("svg",{className:"h-4 w-4 transition-transform duration-200 ".concat(l?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,nt.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-50",children:[(0,nt.jsxs)("div",{className:"px-4 py-2 border-b border-gray-700",children:[(0,nt.jsx)("p",{className:"text-sm font-medium text-white",children:u()}),(0,nt.jsx)("p",{className:"text-xs text-gray-400",children:null===t||void 0===t?void 0:t.email})]}),(0,nt.jsxs)("button",{onClick:()=>{s("settings"),c(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center",children:[(0,nt.jsxs)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,nt.jsxs)("button",{onClick:async()=>{try{await n(),c(!1)}catch(e){console.error("Error signing out:",e)}},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 flex items-center",children:[(0,nt.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})]})]})})};const Bd=[{id:"cash",name:"Cash"},{id:"bank",name:"Bank Account"},{id:"credit_card",name:"Credit Card"},{id:"e_wallet",name:"E-Wallet"},{id:"savings",name:"Savings Account"}];const Ud=function(e){let{dbInitialized:t=!1,refresh:n=0}=e;const[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)({id:"",name:"",type:Bd[0].id,balance:0}),[d,u]=(0,i.useState)(null),[h,f]=(0,i.useState)(!1),{user:g}=it();(0,i.useEffect)((()=>{p()}),[t,g,n]);const p=async()=>{o(!0);try{let e=[];e=t&&g?await Ke.qF.getAll(g.id):JSON.parse(localStorage.getItem("wallets")||"[]"),s(e)}catch(Kd){console.error("Error loading wallets:",Kd),s([])}finally{o(!1)}},m=e=>{const{name:t,value:n}=e.target;c((0,Me.A)((0,Me.A)({},l),{},{[t]:n}))},b=()=>{c({id:"",name:"",type:Bd[0].id,balance:0}),u(null)},y=()=>{b(),f(!1)},x=e=>{const t=JSON.parse(localStorage.getItem("wallets")||"[]");t.push(e),localStorage.setItem("wallets",JSON.stringify(t))},v=e=>{let t=JSON.parse(localStorage.getItem("wallets")||"[]");t=t.map((t=>t.id===e.id?e:t)),localStorage.setItem("wallets",JSON.stringify(t))},w=e=>{let t=JSON.parse(localStorage.getItem("wallets")||"[]");t=t.filter((t=>t.id!==e)),localStorage.setItem("wallets",JSON.stringify(t))},_=(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold mb-4 text-indigo-300",children:d?"Edit Wallet":"Add New Wallet"}),(0,nt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l.name.trim())return;const n=(0,Me.A)((0,Me.A)({},l),{},{id:d||l.id||Date.now().toString(),balance:mr.formatBalance(l.balance||0)});try{d?t&&g?await Ke.qF.update(n,g.id):v(n):t&&g?await Ke.qF.add(n,g.id):x(n),b(),f(!1),p()}catch(e){console.error("Error saving wallet:",e),alert("Error saving wallet")}},children:[(0,nt.jsxs)("div",{className:"mb-3",children:[(0,nt.jsx)("label",{className:"block mb-1 text-gray-300",children:"Name"}),(0,nt.jsx)("input",{type:"text",name:"name",value:l.name,onChange:m,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,nt.jsxs)("div",{className:"mb-3",children:[(0,nt.jsx)(ht,{htmlFor:"wallet-type-select",className:"block mb-1 text-gray-300",children:"Type"}),(0,nt.jsx)(ut,{id:"wallet-type-select",name:"type",options:Bd,displayValue:e=>null===e||void 0===e?void 0:e.name,defaultValue:Bd.find((e=>e.id===l.type)),onChange:e=>{const t=null!==e&&void 0!==e&&e.target?e.target.value:e;t&&t.id?c((0,Me.A)((0,Me.A)({},l),{},{type:t.id})):console.error("Invalid type selected:",t)},"aria-label":"Select wallet type",children:e=>(0,nt.jsx)(ft,{value:e,children:e.name})})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block mb-1 text-gray-300",children:"Balance"}),(0,nt.jsx)("input",{type:"number",name:"balance",value:l.balance,onChange:m,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",step:"0.01",min:"0"})]}),(0,nt.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,nt.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"}),(0,nt.jsx)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:d?"Update Wallet":"Add Wallet"})]})]})]});return(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mx-auto",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold text-indigo-300",children:"Wallets"}),(0,nt.jsxs)("button",{onClick:()=>{b(),f(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Wallet"]})]}),(0,nt.jsx)("div",{children:a?(0,nt.jsx)("div",{className:"text-indigo-300",children:"Loading..."}):0===r.length?(0,nt.jsxs)("div",{className:"text-gray-400 py-8 text-center",children:[(0,nt.jsx)("div",{className:"text-indigo-400 mb-2",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,nt.jsx)("p",{children:"No wallets found. Add one to get started!"})]}):(0,nt.jsx)("ul",{className:"space-y-3",children:r.map((e=>{var n,r;return(0,nt.jsxs)("li",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,nt.jsxs)("div",{children:[(0,nt.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,nt.jsx)("div",{className:"text-sm text-gray-400",children:(null===(n=Bd.find((t=>t.id===e.type)))||void 0===n?void 0:n.name)||e.type}),(0,nt.jsxs)("div",{className:"text-sm text-indigo-300",children:["Balance: Rp",(r=e.balance,mr.formatBalance(r))]})]}),(0,nt.jsxs)("div",{className:"flex gap-2",children:[(0,nt.jsx)("button",{onClick:()=>(e=>{c(e),u(e.id),f(!0)})(e),className:"px-3 py-1 bg-gray-600 text-indigo-300 rounded hover:bg-gray-500",children:"Edit"}),(0,nt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this wallet?"))try{t&&g?await Ke.qF.delete(e,g.id):w(e),p()}catch(Kd){console.error("Error deleting wallet:",Kd),alert("Error deleting wallet")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},e.id)}))})}),(0,nt.jsxs)("div",{className:"mt-8 pt-4 border-t border-gray-700",children:[(0,nt.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Troubleshooting"}),(0,nt.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"If you're experiencing database errors, try refreshing the page or clearing your browser cache."}),(0,nt.jsx)("button",{onClick:async()=>{if(window.confirm("This will reset the database and reload the page. All data will be preserved but this helps fix database errors. Continue?"))try{window.location.reload()}catch(e){console.error("Error resetting database:",e),alert("Failed to reset database. Please try manually clearing site data in your browser settings.")}},className:"px-4 py-2 text-sm bg-gray-700 text-red-400 rounded hover:bg-gray-600",children:"Refresh Data"})]}),(0,nt.jsx)(Pd,{isOpen:h,onClose:y,children:_})]})},Wd=e=>new Intl.NumberFormat("id-ID").format(e);const Hd=function(e){let{dbInitialized:t=!1,refresh:n=0}=e;const[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)(0),{user:d}=it();(0,i.useEffect)((()=>{u()}),[t,n,d]);const u=async()=>{o(!0);try{let e=[];e=t&&d?await Ke.qF.getAll(d.id):JSON.parse(localStorage.getItem("wallets")||"[]"),s(e);const n=e.reduce(((e,t)=>e+parseFloat(t.balance||0)),0);c(n)}catch(Kd){console.error("Error loading wallets:",Kd),s([]),c(0)}finally{o(!1)}},h=e=>e>0?"text-green-400":e<0?"text-red-400":"text-gray-400",f=e=>{switch(e){case"cash":return(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})});case"bank":return(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M10.496 2.132a1 1 0 00-.992 0l-7 4A1 1 0 003 8v7a1 1 0 001 1h12a1 1 0 001-1V8a1 1 0 00.496-1.868l-7-4zM6 9a1 1 0 00-1 1v3a1 1 0 102 0v-3a1 1 0 00-1-1zm3 1a1 1 0 012 0v3a1 1 0 11-2 0v-3zm5-1a1 1 0 00-1 1v3a1 1 0 102 0v-3a1 1 0 00-1-1z",clipRule:"evenodd"})});case"credit_card":return(0,nt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,nt.jsx)("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),(0,nt.jsx)("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]});case"e_wallet":return(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7H5V5h10v7H8.771z",clipRule:"evenodd"})});default:return(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})})}};return a?(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mb-6 animate-pulse",children:[(0,nt.jsx)("div",{className:"h-6 bg-gray-700 rounded w-1/4 mb-4"}),(0,nt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,nt.jsx)("div",{className:"h-20 bg-gray-700 rounded"}),(0,nt.jsx)("div",{className:"h-20 bg-gray-700 rounded"})]})]}):0===r.length?(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mb-6",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold mb-4 text-indigo-300",children:"Wallet Balances"}),(0,nt.jsx)("p",{className:"text-gray-400",children:"No wallets found. Go to the Wallets tab to add one!"})]}):(0,nt.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mb-4 mt-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold text-indigo-300",children:"Wallet Balances"}),(0,nt.jsxs)("div",{className:"text-xl font-bold ".concat(h(l)),children:["Rp ",Wd(l)]})]}),(0,nt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((e=>(0,nt.jsxs)("div",{className:"flex items-center p-3 bg-gray-700 rounded-lg",children:[(0,nt.jsx)("div",{className:"text-indigo-400 mr-3",children:f(e.type)}),(0,nt.jsxs)("div",{className:"flex-grow",children:[(0,nt.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,nt.jsx)("div",{className:"text-xs text-gray-400",children:"bank"===e.type?"Bank Account":"credit_card"===e.type?"Credit Card":"e_wallet"===e.type?"E-Wallet":"Cash"})]}),(0,nt.jsxs)("div",{className:"text-lg font-semibold ".concat(h(e.balance)),children:["Rp ",Wd(e.balance)]})]},e.id)))})]})};const Vd=function(e){let{isOpen:t,onClose:n,onApply:r,initialFilters:s,initialSort:a,availableCategories:o=[],availableTags:l=[],availableWallets:c=[]}=e;const[d,u]=(0,i.useState)(s),[h,f]=(0,i.useState)(a),[g,p]=(0,i.useState)([]),[m,b]=(0,i.useState)([]),[y,x]=(0,i.useState)([]);(0,i.useEffect)((()=>{s&&(s.walletId&&"all"!==s.walletId?p(Array.isArray(s.walletId)?s.walletId:[s.walletId]):p([]),s.categoryId&&"all"!==s.categoryId?b(Array.isArray(s.categoryId)?s.categoryId:[s.categoryId]):b([]),x(s.tags||[]))}),[s]),(0,i.useEffect)((()=>{u(s),f(a)}),[s,a]);const v=(e,t)=>{u((n=>(0,Me.A)((0,Me.A)({},n),{},{[e]:t})))},w=e=>{let t;"all"===e?(t=[],p(t)):(t=g.includes(e)?g.filter((t=>t!==e)):[...g,e],p(t)),v("walletId",t.length>0?t:"all")},_=e=>{let t;"all"===e?(t=[],b(t)):(t=m.includes(e)?m.filter((t=>t!==e)):[...m,e],b(t)),v("categoryId",t.length>0?t:"all")},k=[{id:"date_desc",name:"Newest to Oldest"},{id:"date_asc",name:"Oldest to Newest"},{id:"amount_desc",name:"Highest to Lowest Amount"},{id:"amount_asc",name:"Lowest to Highest Amount"}],[S,j]=(0,i.useState)(null),N=e=>{if(!e)return"";return("string"===typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};(0,i.useEffect)((()=>{const e=e=>{S&&!e.target.closest(".date-picker-container")&&j(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[S]);const E=e=>e?bt(e.color):"gray",C=e=>e.color||"gray";return(0,nt.jsx)(Pd,{isOpen:t,onClose:n,children:(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,nt.jsx)("div",{className:"sticky top-0 left-0 right-0 px-6 py-4 bg-gray-800 border-b border-gray-700 z-10",children:(0,nt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white",children:"Filter & Sort"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full bg-gray-700 bg-opacity-50",onClick:n,children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,nt.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,nt.jsx)("h4",{className:"text-md font-medium text-white",children:"Filter by:"}),(0,nt.jsx)("button",{type:"button",className:"text-xs px-2 py-1 text-indigo-300 hover:text-indigo-100 transition-colors",onClick:()=>{u({type:"all",walletId:"all",categoryId:"all",tags:[],dateRange:"all",startDate:"",endDate:""}),p([]),b([]),x([]),j(null)},children:"Reset Filters"})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 mb-2",children:"Type"}),(0,nt.jsxs)("div",{className:"flex bg-gray-700 rounded-md p-1",children:[(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat("all"===d.type?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>v("type","all"),children:"All"}),(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat("expense"===d.type?"bg-indigo-600 text-white":"text-gray-300"),onClick:()=>v("type","expense"),children:"Expense"}),(0,nt.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded ".concat("income"===d.type?"bg-green-600 text-white":"text-gray-300"),onClick:()=>v("type","income"),children:"Income"})]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 mb-2",children:"Date Range"}),(0,nt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"startDate",className:"block mb-2 text-sm text-gray-300",children:"Start Date"}),(0,nt.jsx)("input",{type:"text",id:"startDate",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select date",readOnly:!0,value:d.startDate?N(d.startDate):"",onClick:()=>j("start")}),"start"===S&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 date-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select Start Date"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>j(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsx)(jt,{value:{start:d.startDate?new Date(d.startDate):null,end:null},onChange:e=>{u((t=>(0,Me.A)((0,Me.A)({},t),{},{startDate:e.start,dateRange:"custom"}))),j(null)},onClose:()=>j(null),isSingleDatePicker:!0,pickerLabel:"Select Start Date"})]})})]}),(0,nt.jsxs)("div",{className:"relative",children:[(0,nt.jsx)("label",{htmlFor:"endDate",className:"block mb-2 text-sm text-gray-300",children:"End Date"}),(0,nt.jsx)("input",{type:"text",id:"endDate",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",placeholder:"Select date",readOnly:!0,value:d.endDate?N(d.endDate):"",onClick:()=>j("end")}),"end"===S&&(0,nt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 date-picker-container",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nt.jsx)("h4",{className:"text-lg font-medium text-white",children:"Select End Date"}),(0,nt.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white p-2 rounded-full",onClick:()=>j(null),children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,nt.jsx)(jt,{value:{start:null,end:d.endDate?new Date(d.endDate):null},onChange:e=>{u((t=>(0,Me.A)((0,Me.A)({},t),{},{endDate:e.end||e.start,dateRange:"custom"}))),j(null)},onClose:()=>j(null),isSingleDatePicker:!0,pickerLabel:"Select End Date"})]})})]})]})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 mb-2",children:"Wallet"}),(0,nt.jsx)("div",{className:"bg-gray-700 rounded-md py-2 px-1",children:(0,nt.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,nt.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-md text-xs font-medium cursor-pointer hover:bg-gray-600\n                        ".concat(0===g.length?"bg-indigo-600 text-white":"text-gray-300 bg-gray-800"),onClick:()=>w("all"),children:"All Wallets"}),c.map((e=>(0,nt.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-md text-xs font-medium cursor-pointer hover:bg-gray-600\n                          ".concat(g.includes(e.id)?"bg-indigo-600 text-white":"text-gray-300 bg-gray-800"),onClick:()=>w(e.id),children:e.name},e.id)))]})})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 mb-2",children:"Category"}),(0,nt.jsx)("div",{className:"bg-gray-700 rounded-md py-2 px-1",children:(0,nt.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,nt.jsx)(vt,{color:"gray",className:0===m.length?"ring-2 ring-offset-2 ring-offset-gray-800 ring-indigo-500":"",onClick:()=>_("all"),children:"All Categories"}),o.map((e=>(0,nt.jsx)(vt,{color:E(e),className:m.includes(e.id)?"ring-2 ring-offset-2 ring-offset-gray-800 ring-indigo-500":"",onClick:()=>_(e.id),children:e.name},e.id)))]})})]}),(0,nt.jsxs)("div",{className:"mb-4",children:[(0,nt.jsx)("label",{className:"block text-gray-300 mb-2",children:"Tags"}),(0,nt.jsxs)("div",{className:"bg-gray-700 rounded-md py-2 px-1",children:[(0,nt.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:l.map((e=>(0,nt.jsx)(vt,{color:C(e),className:y.includes(e.id)?"ring-2 ring-offset-2 ring-offset-gray-800 ring-indigo-500":"",onClick:()=>{const t=y.includes(e.id)?y.filter((t=>t!==e.id)):[...y,e.id];var n;x(n=t),v("tags",n)},children:e.name},e.id)))}),0===l.length&&(0,nt.jsx)("p",{className:"text-gray-500 text-xs px-2",children:"No tags available"})]})]})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("label",{htmlFor:"sort",className:"block text-gray-300 mb-2",children:"Sort by:"}),(0,nt.jsx)(ut,{name:"sort",options:k,displayValue:e=>e.name,defaultValue:k.find((e=>{const[t,n]=e.id.split("_");return h.field===t&&h.order===n})),onChange:e=>{const t=null!==e&&void 0!==e&&e.target?e.target.value:e;t&&t.id&&(e=>{const[t,n]=e.split("_");f({field:t,order:n})})(t.id)},"aria-label":"Sort Options"})]})]}),(0,nt.jsx)("div",{className:"sticky bottom-0 left-0 right-0 px-6 py-4 bg-gray-800 border-t border-gray-700 shadow-lg",children:(0,nt.jsx)("button",{type:"button",className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-300",onClick:()=>{r(d,h),n()},children:"Apply Filters & Sort"})})]})})})};const qd=function(e){let{expenses:t,deleteExpense:n,updateExpense:r,dbInitialized:s}=e;const{user:a}=it(),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)({type:"all",walletId:"all",categoryId:"all",tags:[],dateRange:"all",startDate:"",endDate:""}),[u,h]=(0,i.useState)({field:"date",order:"desc"}),[f,g]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[b,y]=(0,i.useState)([]),[x,v]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{try{if(s&&a){const e=await Ke.T0.getAll(a.id);g(e);const t=await Ke.d6.getAll(a.id);m(t);const n=await Ke.qF.getAll(a.id);y(n)}else{const e=localStorage.getItem("expense-categories");e&&g(JSON.parse(e));const t=localStorage.getItem("expense-tags");t&&m(JSON.parse(t));const n=localStorage.getItem("wallets");n&&y(JSON.parse(n))}}catch(e){console.error("Error loading filter data:",e)}})()}),[s,a]),(0,i.useEffect)((()=>{let e=t;if("all"!==c.type&&(e=e.filter((e=>"income"===c.type?e.isIncome:!e.isIncome))),"all"!==c.walletId&&(e=e.filter((e=>e.walletId===c.walletId))),"all"!==c.categoryId&&(e=e.filter((e=>e.category===c.categoryId))),"all"!==c.dateRange){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate());e=e.filter((e=>{const t=new Date(e.date);switch(t.setHours(0,0,0,0),c.dateRange){case"today":return t.getTime()===n.getTime();case"thisWeek":const e=new Date(n);e.setDate(n.getDate()-n.getDay());const r=new Date(n);return r.setDate(n.getDate()+(6-n.getDay())),t>=e&&t<=r;case"thisMonth":const i=new Date(n.getFullYear(),n.getMonth(),1),s=new Date(n.getFullYear(),n.getMonth()+1,0);return t>=i&&t<=s;default:return!0}}))}const n=[...e].sort(((e,t)=>{const n="amount"===u.field?parseFloat(e.amount):new Date(e.date),r="amount"===u.field?parseFloat(t.amount):new Date(t.date);return"asc"===u.order?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}));v(n)}),[t,c,u]),(0,nt.jsxs)("div",{className:"transaction-list-page",children:[(0,nt.jsxs)("div",{className:"flex justify-between items-center mb-4 mt-4",children:[(0,nt.jsx)("h2",{className:"text-xl font-semibold text-indigo-300",children:"Transaction History"}),(0,nt.jsxs)("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors flex items-center",children:[(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,nt.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"Filter & Sort"]})]}),(0,nt.jsx)(Tt,{expenses:x,deleteExpense:n,updateExpense:r,dbInitialized:s}),(0,nt.jsx)(Vd,{isOpen:o,onClose:()=>l(!1),onApply:(e,t)=>{d(e),h(t),l(!1)},initialFilters:c,initialSort:u,availableCategories:f,availableTags:p,availableWallets:b})]})},Jd=e=>{let{error:t,onClose:n}=e;const[r,s]=(0,i.useState)(!1),a='-- Create expenses table\nCREATE TABLE expenses (\n  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  amount DECIMAL(12, 2) NOT NULL,\n  description TEXT,\n  category TEXT,\n  date DATE NOT NULL,\n  walletId TEXT NOT NULL,\n  isIncome BOOLEAN DEFAULT FALSE,\n  notes TEXT,\n  photoUrl TEXT,\n  tags TEXT[] DEFAULT \'{}\',\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create categories table\nCREATE TABLE categories (\n  id TEXT PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  name TEXT NOT NULL,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create tags table\nCREATE TABLE tags (\n  id TEXT PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  name TEXT NOT NULL,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create wallets table\nCREATE TABLE wallets (\n  id TEXT PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  name TEXT NOT NULL,\n  type TEXT NOT NULL,\n  balance DECIMAL(12, 2) DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create transfers table\nCREATE TABLE transfers (\n  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  fromWallet TEXT NOT NULL,\n  fromWalletName TEXT,\n  toWallet TEXT NOT NULL,\n  toWalletName TEXT,\n  amount DECIMAL(12, 2) NOT NULL,\n  date DATE NOT NULL,\n  notes TEXT,\n  photoUrl TEXT,\n  timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create budgets table\nCREATE TABLE budgets (\n  id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  category TEXT NOT NULL,\n  amount DECIMAL(12, 2) NOT NULL,\n  period TEXT NOT NULL,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Add row-level security (RLS) policies\nALTER TABLE expenses ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own expenses" ON expenses FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own expenses" ON expenses FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own expenses" ON expenses FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own expenses" ON expenses FOR DELETE USING (auth.uid() = user_id);\n\nALTER TABLE categories ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own categories" ON categories FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own categories" ON categories FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own categories" ON categories FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own categories" ON categories FOR DELETE USING (auth.uid() = user_id);\n\nALTER TABLE tags ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own tags" ON tags FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own tags" ON tags FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own tags" ON tags FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own tags" ON tags FOR DELETE USING (auth.uid() = user_id);\n\nALTER TABLE wallets ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own wallets" ON wallets FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own wallets" ON wallets FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own wallets" ON wallets FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own wallets" ON wallets FOR DELETE USING (auth.uid() = user_id);\n\nALTER TABLE transfers ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own transfers" ON transfers FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own transfers" ON transfers FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own transfers" ON transfers FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own transfers" ON transfers FOR DELETE USING (auth.uid() = user_id);\n\nALTER TABLE budgets ENABLE ROW LEVEL SECURITY;\nCREATE POLICY "Users can view their own budgets" ON budgets FOR SELECT USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert their own budgets" ON budgets FOR INSERT WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update their own budgets" ON budgets FOR UPDATE USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete their own budgets" ON budgets FOR DELETE USING (auth.uid() = user_id);';return(0,nt.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,nt.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg max-w-xl w-full p-6 border border-gray-700",children:[(0,nt.jsxs)("div",{className:"text-center mb-6",children:[(0,nt.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-600 mb-4",children:(0,nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,nt.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Database Setup Required"}),(0,nt.jsx)("p",{className:"text-gray-300 mb-4",children:"The Supabase database tables have not been created yet. You need to run the SQL script in the Supabase SQL Editor to set up your database."}),t&&(0,nt.jsx)("div",{className:"bg-red-900/50 border border-red-800 rounded-md p-4 mb-4",children:(0,nt.jsx)("p",{className:"text-red-300 text-sm",children:t})})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Follow these steps:"}),(0,nt.jsxs)("ol",{className:"text-gray-300 space-y-3 list-decimal list-inside",children:[(0,nt.jsxs)("li",{children:["Log in to your Supabase dashboard at ",(0,nt.jsx)("a",{href:"https://app.supabase.io",className:"text-indigo-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"app.supabase.io"})]}),(0,nt.jsx)("li",{children:"Navigate to the SQL Editor in the left sidebar"}),(0,nt.jsx)("li",{children:"Create a new query"}),(0,nt.jsx)("li",{children:"Copy and paste the SQL script below"}),(0,nt.jsx)("li",{children:"Run the script to create all necessary tables"}),(0,nt.jsx)("li",{children:"Return to this app and refresh the page"})]})]}),(0,nt.jsxs)("div",{className:"mb-6",children:[(0,nt.jsx)("button",{onClick:()=>s(!r),className:"bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-800 mb-2 w-full",children:r?"Hide SQL Script":"Show SQL Script"}),r&&(0,nt.jsxs)("div",{className:"bg-gray-900 rounded-md p-3 mt-2",children:[(0,nt.jsx)("pre",{className:"text-xs text-gray-300 overflow-x-auto max-h-96 scrollbar-thin scrollbar-thumb-gray-700",children:a}),(0,nt.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a),alert("SQL Script copied to clipboard!")},className:"mt-2 bg-gray-700 text-gray-300 py-1 px-3 rounded text-sm hover:bg-gray-600",children:"Copy to Clipboard"})]})]}),(0,nt.jsx)("div",{className:"flex justify-end",children:(0,nt.jsx)("button",{onClick:n,className:"bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:"I'll do this later"})})]})})},Yd=()=>{const{user:e,signOut:t,isSessionValid:n,refreshSession:r}=it(),[s,a]=(0,i.useState)("home"),[o,l]=(0,i.useState)([]),[c,d]=(0,i.useState)([]),[u,h]=(0,i.useState)(!0),[f,g]=(0,i.useState)(!1),[p,m]=(0,i.useState)(0),[b,y]=(0,i.useState)(!1),[x,v]=(0,i.useState)(null),[w,_]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{if(h(!0),e){const e=await(0,Ke.e0)();y(e.success),e.success?await k():(v(e.message||"Failed to initialize Supabase database"),_(!0),console.error("Supabase initialization failed:",e),j())}}catch(t){console.error("Failed to initialize:",t),j()}finally{h(!1)}})()}),[e]);const k=async()=>{try{if(!e)return void console.error("Cannot load data: User not authenticated");const t=await Ke.expenseDB.getAll(e.id);l(t);const n=await Ke.T0.getAll(e.id);d(n),h(!1)}catch(t){console.error("Error loading data from Supabase:",t),j()}},S=async()=>{await k()},j=()=>{const e=localStorage.getItem("expenses");e&&l(JSON.parse(e));const t=localStorage.getItem("expense-categories");if(t)d(JSON.parse(t));else{d([{id:"food",name:"Food",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},{id:"transportation",name:"Transportation",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},{id:"entertainment",name:"Entertainment",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},{id:"utilities",name:"Utilities",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300"},{id:"housing",name:"Housing",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},{id:"healthcare",name:"Healthcare",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},{id:"other",name:"Other",color:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-300"}])}h(!1)};(0,i.useEffect)((()=>{!b&&o.length>0&&localStorage.setItem("expenses",JSON.stringify(o))}),[o,b]);const N=async t=>{try{if(!e)return void console.error("Cannot update expense: User not authenticated");if(!await n()){console.warn("Session expired, attempting to refresh...");try{await r()}catch(i){throw console.error("Session refresh failed, user needs to re-authenticate"),new Error("Your session has expired. Please sign in again.")}}const s=pr(e),a=await s.updateExpenseWithWalletUpdate(t);console.log("Expense and wallet updated successfully:",a),await S(),m((e=>e+1))}catch(i){console.error("Error updating expense:",i);let e="Failed to update expense. ";throw i.message.includes("not found")?e+="One of the wallets associated with this expense may have been deleted. Please check your wallets and try again.":i.message.includes("Insufficient balance")?e+=i.message:i.message.includes("session")||i.message.includes("authentication")?e+="Your session has expired. Please sign in again.":e+="Please try again or contact support if the problem persists.",alert(e),i}},E=async t=>{try{if(!e)return void console.error("Cannot delete expense: User not authenticated");const n=pr(e),r=await n.deleteExpenseWithWalletUpdate(t);console.log("Expense deleted and wallet balance restored:",r),await S(),m((e=>e+1))}catch(n){throw console.error("Error deleting expense:",n),n}};return(0,nt.jsxs)(nt.Fragment,{children:[w&&(0,nt.jsx)(Jd,{error:x,onClose:()=>_(!1)}),(0,nt.jsx)(zd,{user:e,signOut:t,activeTab:s,setActiveTab:a,setIsModalOpen:g}),(0,nt.jsx)("div",{className:"pt-16 pb-20 px-4 bg-gray-50 dark:bg-gray-900 min-h-screen",children:(0,nt.jsx)("div",{className:"max-w-7xl mx-auto",children:(()=>{if(u)return(0,nt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,nt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,nt.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]});switch(s){case"wallets":return(0,nt.jsxs)("div",{className:"space-y-6",children:[(0,nt.jsx)(Ud,{dbInitialized:b,refresh:p}),(0,nt.jsx)(Md,{dbInitialized:b,refreshWallets:p})]});case"budgets":return(0,nt.jsx)(Od,{dbInitialized:b});case"settings":return(0,nt.jsx)(Ad,{});case"transfer":return(0,nt.jsx)(Md,{dbInitialized:b,refreshWallets:p});case"transactions":return(0,nt.jsx)(qd,{expenses:o,deleteExpense:E,updateExpense:N,dbInitialized:b});default:return(0,nt.jsxs)(nt.Fragment,{children:[(0,nt.jsx)(Hd,{dbInitialized:b,refresh:p}),(0,nt.jsx)(br,{expenses:o,total:o.reduce(((e,t)=>e+t.amount),0)}),(0,nt.jsx)(Ed,{expenses:o,categories:c}),(0,nt.jsx)(Tt,{expenses:o,deleteExpense:E,updateExpense:N,dbInitialized:b})]})}})()})}),(0,nt.jsx)(Dd,{activeTab:s,onChange:a}),(0,nt.jsx)(Ld,{onClick:()=>g(!0)}),(0,nt.jsx)(Pd,{isOpen:f,onClose:()=>g(!1),title:"Add Transaction",children:(0,nt.jsx)(Et,{onSubmit:async t=>{try{if(!e)throw console.error("Cannot add expense: User not authenticated"),new Error("User not authenticated");console.log("Adding expense with data:",t);const n=pr(e),r=await n.addExpenseWithWalletUpdate(t);console.log("Expense and wallet updated successfully:",r),m((e=>e+1)),await S()}catch(n){throw console.error("Error adding expense:",n),n}},onClose:()=>g(!1),dbInitialized:b})})]})};const $d=function(){return(0,nt.jsxs)(ve,{children:[(0,nt.jsx)(ye,{path:"/login",element:(0,nt.jsx)(at,{})}),(0,nt.jsx)(ye,{path:"/signup",element:(0,nt.jsx)(ot,{})}),(0,nt.jsx)(ye,{path:"/forgot-password",element:(0,nt.jsx)(lt,{})}),(0,nt.jsx)(ye,{path:"/reset-password",element:(0,nt.jsx)(ct,{})}),(0,nt.jsx)(ye,{path:"/dashboard",element:(0,nt.jsx)(dt,{children:(0,nt.jsx)(Yd,{})})}),(0,nt.jsx)(ye,{path:"/",element:(0,nt.jsx)(be,{to:"/dashboard",replace:!0})}),(0,nt.jsx)(ye,{path:"*",element:(0,nt.jsx)(be,{to:"/dashboard",replace:!0})})]})};a.createRoot(document.getElementById("root")).render((0,nt.jsx)(i.StrictMode,{children:(0,nt.jsx)(st,{children:(0,nt.jsx)(Ne,{children:(0,nt.jsx)($d,{})})})}))})();
//# sourceMappingURL=main.cd168fae.js.map